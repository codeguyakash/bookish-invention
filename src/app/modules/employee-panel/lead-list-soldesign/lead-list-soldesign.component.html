<style>
    .equipment-subOptions textarea {margin: 10px 0px 6px 0px;}
    .equipment-subOptions input[type="text"] {margin: 0px 0px 16px 0px;}
    .error.equipment-error {margin: 15px 0px;}
    .field-wrapper .form-field{width: calc(100% - 240px);}
        .sidebar-tabs a.active{background: #053395; color: #fff;}
        .select-bg{background:#ddd}
        .downLoad{background: #09357f; color: #fff; padding: 10px; border-radius: 4px;}
        .gbgBtn{    background: #018000;color: #fff; padding: 10px; border-radius: 6px;}
        .nbtn.btn.btn-blue.btn-md { margin: 0 0 15px 27px;}
        .serchFild.field-wrapper .form-field {margin-left: auto;}

        .sidebar-tabs a.active{background: #053395; color: #fff;}
.select-bg{background:#ddd}
.downLoad{background: #09357f; color: #fff; padding: 10px; border-radius: 4px;}
.sendBox{    position: fixed;
    z-index: 9999;
    background: rgba(0,0,0,0.5);
    width: 100%;
    height: 100%;
    top: -100%;
    left: 0;opacity: 0}
    .sendBox.hideAside{   top:0;opacity: 1;}
.box-wrapper{    max-width: 500px;
    margin: 0 auto;
    height: 100%;}
.tableBoxx{display: table;
    width: 100%;
    height: 100%;}
.cellBoxx{    display: table-cell;
    vertical-align: middle;}
.sendWrapper {    width: 100%;
    float: left;
    background: #fff;
    padding: 20px;
    border-radius: 5px;position: relative}
    .menu.example5{position: absolute;
    color: #fff;
    background: #000;
    width: 30px;
    height: 30px;
    border-radius: 100%;
    line-height: 30px;
    text-align: center;
    font-size: 17px;
    padding: 0;
    vertical-align: middle;
    right: -16px;    top: -16px;}
    .nbtn.btn.btn-blue.btn-md{    margin: 0 0 15px 27px;}
    .field-wrapper .form-field{margin-left: auto;}
    .gbgBtn{    background: #018000;
    color: #fff;
    padding: 10px;
    border-radius: 6px;}
    table tr td{    word-wrap: break-word;}
    @media screen and (max-width: 1024px){

        .survey-page-container{flex-direction: column}
        .survey-page-left{width: 100%;}
        .survey-page-right{width: 100%;margin: 15px 0 0;}
    }
 .sendBox{    position: fixed; z-index: 9999; background: rgba(0,0,0,0.5);  width: 100%;   height: 100%;  top: -100%; left: 0;opacity: 0}
.sendBox.hideAside{   top:0;opacity: 1;}
.box-wrapper{    max-width: 1000px;  margin: 0 auto;  height: 100%;}
.tableBoxx{display: table;  width: 100%;  height: 100%;}
.cellBoxx{    display: table-cell;  vertical-align: middle;}
.sendWrapper {    width: 100%; float: left; background: #fff; padding: 0px; border-radius: 5px;position: relative}
.menu.example5{position: absolute; color: #fff; background: #000; width: 30px; height: 30px;border-radius: 100%;line-height: 30px;text-align: center;font-size: 17px;padding: 0;vertical-align: middle;right: -16px;    top: -16px;}
.sendWrapper h4{padding: 20px;margin-bottom: 0;background: #09357f;color: #fff;}
.sendWrapper form .field-wrapper{flex-direction: column;}
.sendWrapper form .field-wrapper label{padding: 0;margin-bottom: 10px;width: 100%;}
.sendWrapper form .field-wrapper .form-field{width: 100%;}
.sendWrapper form{padding: 20px;}
.sendWrapper .btn-blue{margin-top: 0}
.coldData .btn.btn-blue{font-size: 14px;text-transform: capitalize;}
.sendWrapper textarea{ border: 1px solid #706f6f;}
.table-border { border:1px solid #000000}
.mail-wraper{position: relative;max-height: 390px; overflow: auto;}
.mail-wraper .field-wrapper{padding: 15px;}
.mail-wraper .field-wrapper .table-border{padding: 5px;}
.sendbox-wrapper {align-items: center; margin-bottom: 10px;margin-left: 10px;}
.pricing_card {height:240px; max-width: 240px;}
.pricing_card .right {float: right;}
.silver_wrapper {width: 48%; float:right; margin-left: 2%;}

.gold_wrapper .field-wrapper{    align-items: flex-start; width:100%;}
.gold_wrapper .field-wrapper .section{width: calc(100% - 240px);}
.gold_wrapper .field-wrapper .section .item .numberField{width:100%}
.one_wrapper .field-wrapper .section{width: calc(100% - 240px);}
.one_wrapper .field-wrapper label{width:240px;}
.one_wrapper .field-wrapper .section .item{width: 100%; margin-left: 0px; display: inline-block;}
.one_wrapper .field-wrapper .section .item.label , .gold_wrapper .field-wrapper .section .item.label{    font-size: 16px; color: #282828; font-weight: 700;}
.one_wrapper .field-wrapper .section .item:nth-child(1){margin-right:0px;}

.gold_wrapper .field-wrapper .section .item{width: 47%; margin-left: 0px; display: inline-block;}
.gold_wrapper .field-wrapper .section .item:nth-child(1){margin-right:20px;}
.gold_wrapper .field-wrapper label{width:240px;}
.schedule-call-back ng-select ,.schedule-call-back select{width:48%;}
.schedule-call-back input.numberField{width:48%;}
.equip{ padding: 10px; color: white;}
 input[type=checkbox] { display:none; } /* to hide the checkbox itself */
input[type=checkbox] + label:before {
  font-family: FontAwesome;
  display: inline-block;
}

input[type=checkbox] + label {
    position: absolute;
    top: 70px;
}

 input[type=checkbox] + label:before { content: "\f096"; font-size: 30px;} /* unchecked icon */
 input[type=checkbox] + label:before { letter-spacing: 10px; } /* space between checkbox and label */

 input[type=checkbox]:checked + label:before { content: "\f046"; font-size: 30px;} /* checked icon */
 input[type=checkbox]:checked + label:before { letter-spacing: 5px; } /* allow space for check mark */
.checkBoxInput-x + label {
    display: inline !important;
    position: initial !important;
}
 .bigcheckBox {
    font-size:16px;
}
.proposal-email-table tr th{padding:10px 15px !important;border:1px solid #000000; color:#ffffff}
.proposal-email-table tr td{padding:10px 15px !important;border:1px solid #000000; color:#000000}
.proposal-email-table tr td.bg_gery{background: #e8e8e8;}
.proposal-email-table tr .bg_blue{background: #003f95;}
.proposal-email-table tr .bg_black{background: #000000;}
.border_left_white{border-left: 2px solid #ffffff!important;}
.text-left{text-align: left;}
.text-center{text-align: center;}
.bg_yellow{background: #ffbf27;}
.bg_green{background: #c4dfb3;}
.bg_light_blue{background: #dde9f6;}
.text-blue{color: #003f95;}

.schedule-call-back .field-wrapper{align-items: flex-start;}
</style>

<div class="main-container" [ngClass]="{'cc-container': isListing}">
    <aside class="sidebar">
        <div class="employee-info">
            <div class="pic">
                <i class="fa fa-user-circle" aria-hidden="true"></i>
            </div>
            <div class="detail">
                <span>Solution Designer</span>
            </div>
        </div>

        <!---nav class="sidebar-tabs">
            <a (click)="searchProjects()"  [ngClass]="{'active':(isListing == 'project-search')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>SEARCH IN PROJECTS</span>
            </a>
        </nav>
        <nav class="sidebar-tabs">
            <a (click)="searchLeads()"  [ngClass]="{'active':(isListing == 'lead-search')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>SEARCH IN LEADS</span>
            </a>
        </nav-->
        <nav class="sidebar-tabs">
            <a (click)="getLeadListDetails()"  [ngClass]="{'active':(isListing == 'lead-list')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Show Lead Listing</span>
            </a>
        </nav>
        <!-- <nav class="sidebar-tabs">
            <a (click)="getPaymentList('S')"  [ngClass]="{'active':(isListing == 'payment-release')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Payment Request Initiation List for Partner</span>
            </a>
        </nav> -->
        <nav class="sidebar-tabs">
            <a (click)="getRevisedProposal()"  [ngClass]="{'active':(isListing == 'revised-proposal-list')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Revised Proposal From Funnel</span>
            </a>
        </nav>
    </aside>
    <style>
        .highlight-row {
            font-weight: bold;
            color: green;
        }
    </style>
    <smart-search (SearchResults)="smartSearchResults($event)" *ngIf="showSmartSearchComponent"></smart-search>
    <div class="container" *ngIf="isListing == 'lead-list'">
        <h2>Solution Designer Lead-List</h2><br>
        <h2>Actionable</h2>
        <div class="table-wrapper" *ngIf="actionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>

                        <th>
                            Surveyor Name
                        </th>
                        <th>Survey Visited Date</th>
                        <th>Solution Designer</th>
                        <th> Project Status </th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of actionableList; let i = index" class="highlight-row">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td> -->
                        <td>{{data?.surveyor_name}}</td>
                        <td>{{data?.project_survey_visited}}</td>
                        <td>{{data?.solution_designer_name}}</td>
                        <td> {{data?.pmstate_name}} </td>
                        <td>
                            <a class="gbgBtn" (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid); getSoDesignerCharges(data?.project_id)">Open</a>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>
         <div class="no-data" *ngIf="loader">
             <img src="/assets/images/loader.gif" style="width:30px;height:30px;display: block;margin: 0 auto;" alt="LUMINOUS" />
          </div>
          <div class="no-data" *ngIf="record">
            No Actionable Listing
          </div>
        <br>
        <h2>Non-Actionable</h2>
        <div class="table-wrapper" *ngIf="nonActionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Surveyor Name
                        </th>
                        <th>Survey Visited Date</th>
                        <th>Solution Designer</th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of nonActionableList; let i = index">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td> -->
                        <td>{{data?.surveyor_name}}</td>
                        <td>{{data?.project_survey_visited}}</td>
                        <td>{{data?.solution_designer_name}}</td>
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <td>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
         <div class="no-data" *ngIf="loader">
            <img src="/assets/images/loader.gif" style="width:30px;height:30px;display: block;margin: 0 auto;" alt="LUMINOUS" />
          </div>
          <div class="no-data" *ngIf="record">
            No Non-Actionable Listing
          </div>
    </div>
    <!--Revised Proposal From Followup Start-->
    <div class="container" *ngIf="isListing == 'revised-proposal-list'">
        <h2>Revised Proposal From Funnel List</h2><br>
        <div class="table-wrapper" *ngIf="revisedProposalFolloupData.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Surveyor Name
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of revisedProposalFolloupData; let i = index" class="highlight-row">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td> -->
                        <td>{{data?.surveyor_name}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            <a class="gbgBtn" (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open</a>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <!--Revised Proposal From Followup End-->
    <div class="container" *ngIf="isListing == 'project-search'">
        <h2>Search In Projects</h2><br>
        <div>
            <form [formGroup]="searchForm" (ngSubmit)="submitSearch()">
                <div class="field-wrapper">
                    <label for="">Search Type</label>
                    <div class="form-field">
                        <select formControlName="qType" [(ngModel)]="queryType">
                            <option value="">Select</option>
                            <option value="cceld_firstname">First Name</option>
                            <option value="cceld_middlename">Middle Name</option>
                            <option value="cceld_lastname">Last Name</option>
                            <option value="cceld_mobileno">Phone</option>
                            <option value="project_code">Project Id</option>
                            <option value="project_status">Status</option>
                        </select>
                    </div>
                </div>
                <div class="field-wrapper" *ngIf="queryType != 'project_status'">
                    <label for="">Search String</label>
                    <div class="form-field">
                        <input type="text" formControlName="q" placeholder="">
                        <div class="error" *ngIf="searchForm.controls?.q?.errors?.required && isSearchFormSubmitted">Please enter search string</div>
                        <div class="error" *ngIf="searchForm.controls?.q?.errors?.pattern && isSearchFormSubmitted">Special character not allowed</div>
                    </div>
                </div>

                <div class="field-wrapper" *ngIf="queryType == 'project_status'">
                        <label for="">Select Project Status*</label>
                        <div class="form-field select-bg">
                             <ng-select [options]="projectStatusList" formControlName="project_status" placeholder="Select Project Status"></ng-select>
                            </div>

                </div>
                <div class="error" *ngIf="searchForm.controls?.project_status?.errors">Please select project status</div>
                <div class="field-wrapper serchFild">
                    <div class="form-field">
                        <button type="submit" class="nbtn btn btn-blue btn-md">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <div *ngIf="actionableList.length>0 || nonActionableList.length>0" align="right">
                <a href="{{downloadFileName}}" target="_blank" class="downLoad">Download</a>
        </div>
        <h2>Search Results</h2>
        <br>
        <h2>Actionable</h2>
        <div class="table-wrapper" *ngIf="actionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Surveyor Name
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of actionableList; let i = index" class="highlight-row">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td> -->
                        <td>{{data?.surveyor_name}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            <a (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open</a>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="actionableList.length<=0">
            No Actionable Projects
        </div>
        <br>
        <h2>Non-Actionable</h2>
        <div class="table-wrapper" *ngIf="nonActionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Surveyor Name
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of nonActionableList; let i = index">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td> -->
                        <td>{{data?.surveyor_name}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--|||||||||||||||||||||||-->
                        <td>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="nonActionableList.length<=0">
            No Non-Actionable Projects
        </div>
    </div>

    <div class="container" *ngIf="isListing == 'lead-search'">
           <h2>Search In Leads</h2><br>
        <div>
            <form [formGroup]="searchLeadForm" (ngSubmit)="submitLeadSearch()">
                <div class="field-wrapper">
                    <label for="">Search Type</label>
                    <div class="form-field">
                        <select formControlName="qType">
                            <option value="">Select</option>
                            <option value="lead_id">Lead Id</option>
                            <option value="lead_fname">First Name</option>
                            <option value="lead_mname">Middle Name</option>
                            <option value="lead_lname">Last Name</option>
                            <option value="lead_mobile">Phone</option>
                        </select>
                    </div>
                </div>
                <div class="field-wrapper">
                    <label for="">Search String</label>
                    <div class="form-field">
                        <input type="text" formControlName="q" placeholder="">
                        <div class="error" *ngIf="searchLeadForm.controls?.q?.errors?.required && isLeadSearchFormSubmitted ">Please enter search string</div>
                        <div class="error" *ngIf="searchLeadForm.controls?.q?.errors?.pattern && isLeadSearchFormSubmitted">Special character not allowed</div>
                    </div>
                </div>
                <div class="field-wrapper serchFild">
                    <div class="form-field">
                        <button type="submit" class="nbtn btn btn-blue btn-md">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <h2>Lead Search Results</h2>
        <div class="table-wrapper" *ngIf="unprocessedLeads.length>0 ">
            <!-- <p>hello</p> -->
            <table cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>
                            Lead ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Lead Created ON
                        </th>
                        <th>
                            Lead Status
                        </th>
                        <th>
                            Queue Status
                        </th>
                        <th>
                            Lead Payment Status
                        </th>
                        <th>
                            Locked By CCE
                        </th>
                        <th>
                            CCE ID
                        </th>
                        <th>
                            CCE Mobile
                        </th>
                        <th>
                            CCE Email
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of unprocessedLeads; let i = index">
                        <td>{{data?.lead_id}}</td>
                        <td>{{data?.lead_fname}} {{data?.lead_mname}} {{data?.lead_lname}}</td>
                        <td>{{data?.lead_mobile}}</td>
                        <td>{{data?.lead_address1}} {{data?.lead_address2}} {{data?.district_name}} {{data?.state_name}}-{{data?.lead_lead_pincode}}</td>
                        <td>{{data?.lead_createdon}}</td>
                        <td>{{lead_states[data?.lead_status]}}</td>
                        <td>{{data?.lead_queuestatus}}</td>
                        <td>{{
                            (data?.lead_iswaived==0)?(data?.payment_status==3)?'Paid':'Not Paid':'Waived'
                        }}</td>
                        <td>{{data?.emp_firstname}} {{data?.emp_middlename}} {{data?.emp_lastname}}</td>
                        <td>{{data?.emp_code}}</td>
                        <td>{{data?.emp_mobileno}}</td>
                        <td>{{data?.emp_email}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="unprocessedLeads.length<=0">
            No Results.
        </div>
    </div>

    <div class="container" *ngIf="!isListing">
        <div class="tab-box fixed">
            <div class="box">
                <section class="lead-panel-tab">
                    <div class="tab" (click)="showTabData(1)" [ngClass]="{'activatedSurveyView': panelSteps == 1}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36px" height="47px">
                            <path fill-rule="evenodd" fill="rgb(117, 183, 59)" d="M34.109,46.053 L1.890,46.053 C1.082,46.053 0.426,45.394 0.426,44.582 L0.426,2.418 C0.426,1.605 1.082,0.947 1.890,0.947 L20.929,0.947 L20.929,14.185 C20.929,14.996 21.585,15.655 22.393,15.655 L35.574,15.655 L35.574,44.582 C35.574,45.394 34.917,46.053 34.109,46.053 ZM7.748,22.519 C6.939,22.519 6.284,23.178 6.284,23.990 C6.284,24.802 6.939,25.461 7.748,25.461 C8.558,25.461 9.213,24.802 9.213,23.990 C9.213,23.177 8.558,22.519 7.748,22.519 ZM7.748,28.402 C6.939,28.402 6.284,29.061 6.284,29.874 C6.284,30.686 6.939,31.344 7.748,31.344 C8.558,31.344 9.213,30.686 9.213,29.874 C9.213,29.061 8.558,28.402 7.748,28.402 ZM7.748,34.286 C6.939,34.286 6.284,34.945 6.284,35.757 C6.284,36.569 6.939,37.228 7.748,37.228 C8.558,37.228 9.213,36.569 9.213,35.757 C9.213,34.945 8.558,34.286 7.748,34.286 ZM28.251,22.519 L13.606,22.519 C12.798,22.519 12.142,23.178 12.142,23.990 C12.142,24.802 12.798,25.461 13.606,25.461 L28.251,25.461 C29.060,25.461 29.716,24.802 29.716,23.990 C29.716,23.178 29.060,22.519 28.251,22.519 ZM28.251,28.402 L13.606,28.402 C12.798,28.402 12.142,29.061 12.142,29.874 C12.142,30.686 12.798,31.344 13.606,31.344 L28.251,31.344 C29.060,31.344 29.716,30.686 29.716,29.874 C29.716,29.061 29.060,28.402 28.251,28.402 ZM28.251,34.286 L13.606,34.286 C12.798,34.286 12.142,34.945 12.142,35.757 C12.142,36.569 12.798,37.228 13.606,37.228 L28.251,37.228 C29.060,37.228 29.716,36.569 29.716,35.757 C29.716,34.945 29.060,34.286 28.251,34.286 ZM23.858,1.808 L34.716,12.713 L23.858,12.713 L23.858,1.808 Z"
                            />
                        </svg>
                        <span>View Survey Form</span>
                    </div>
                    <div *ngIf="fillCartStates.indexOf(currentProjectState)>-1" class="tab" (click)="showTabData(2)" [ngClass]="{'activatedFillCart': panelSteps == 2}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="45px" height="46px">
                            <path fill-rule="evenodd" fill="rgb(49, 213, 202)" d="M43.957,31.537 L32.331,43.081 L26.455,44.671 L26.062,45.060 C25.916,45.207 25.722,45.280 25.528,45.280 C25.339,45.280 25.148,45.207 25.002,45.065 L24.986,45.069 L24.990,45.053 C24.701,44.761 24.701,44.291 24.995,44.000 L25.387,43.610 L26.988,37.776 L38.616,26.234 C39.467,25.388 40.952,25.388 41.804,26.234 L43.957,28.371 C44.383,28.794 44.618,29.355 44.618,29.954 C44.618,30.552 44.383,31.114 43.957,31.537 ZM27.139,42.930 L30.484,42.025 L28.050,39.610 L27.139,42.930 ZM28.733,38.166 L31.938,41.349 L39.676,33.666 L36.470,30.484 L28.733,38.166 ZM42.889,29.432 L40.735,27.294 C40.454,27.015 39.964,27.015 39.684,27.294 L37.539,29.424 L40.744,32.606 L42.889,30.476 C43.030,30.337 43.107,30.151 43.107,29.954 C43.107,29.757 43.030,29.572 42.889,29.432 ZM8.688,35.000 C8.271,35.000 7.933,35.335 7.933,35.750 C7.933,36.165 8.271,36.500 8.688,36.500 L25.069,36.500 L24.961,36.608 L22.519,45.500 L0.379,45.500 L0.379,0.500 L24.865,0.500 L35.883,11.439 L35.883,25.764 L26.581,35.000 L8.688,35.000 ZM8.688,18.500 L27.573,18.500 C27.990,18.500 28.329,18.165 28.329,17.750 C28.329,17.335 27.990,17.000 27.573,17.000 L8.688,17.000 C8.271,17.000 7.933,17.335 7.933,17.750 C7.933,18.165 8.271,18.500 8.688,18.500 ZM7.933,23.750 C7.933,24.165 8.271,24.500 8.688,24.500 L27.573,24.500 C27.990,24.500 28.329,24.165 28.329,23.750 C28.329,23.335 27.990,23.000 27.573,23.000 L8.688,23.000 C8.271,23.000 7.933,23.335 7.933,23.750 ZM16.242,11.000 L8.688,11.000 C8.271,11.000 7.933,11.335 7.933,11.750 C7.933,12.165 8.271,12.500 8.688,12.500 L16.242,12.500 C16.659,12.500 16.998,12.165 16.998,11.750 C16.998,11.335 16.659,11.000 16.242,11.000 ZM23.796,2.000 L23.796,12.500 L34.372,12.500 L23.796,2.000 ZM28.329,29.750 C28.329,29.335 27.990,29.000 27.573,29.000 L8.688,29.000 C8.271,29.000 7.933,29.335 7.933,29.750 C7.933,30.165 8.271,30.500 8.688,30.500 L27.573,30.500 C27.990,30.500 28.329,30.165 28.329,29.750 Z"
                            />
                        </svg>
                        <span>Fill Proposal Details</span>
                    </div>
                </section>
            </div>
        </div>

        <div class="survey-page-container">
            <div class="survey-page-left">
                <div class="box schedule-call-back" *ngIf="panelSteps == 2">
                    <h2 class="box-title">Fill Proposal Details</h2>
                    <section class="box-content survey-form">
                     <form id="call-reschedule" (window:beforeunload)="onBeforeUnload($event)" [formGroup]="kartRequest" (ngSubmit)="submitKartRequest()">
                        <p-panel (click)="setformsection('customer-form')" [toggleable]="true" [collapsed]="formsection!='customer-form'" >
                         <p-header class="ui-helper-clearfix">
                                    <span class="ui-panel-title" [style.color]="CustomerFormError?'red':''">Customer form:</span>
                            </p-header>
                            <div class="tab-content-detail">  <br>
                                <div class="field-wrapper">
                                    <label for="">First Name</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="first_name" placeholder="First Name">
                                        <div class="error" *ngIf="kartRequest.controls?.first_name?.errors?.required && isSubmitKartRequest">Please enter first name</div>
                                        <div class="error" *ngIf="kartRequest.controls?.first_name?.errors?.pattern && isSubmitKartRequest">Please enter a valid first name.</div>
                                        <!-- <div class="error" *ngIf="kartRequest.controls?.first_name?.errors">Please enter First Name</div> -->
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Last Name</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="last_name" placeholder="Last Name">
                                        <div class="error" *ngIf="kartRequest.controls?.last_name?.errors?.required && isSubmitKartRequest">Please enter last name</div>
                                        <div class="error" *ngIf="kartRequest.controls?.last_name?.errors?.pattern && isSubmitKartRequest">Please enter a valid last name.</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Email</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="email" placeholder="Email">
                                        <div class="error" *ngIf="kartRequest.controls?.email?.errors?.required && isSubmitKartRequest">Please enter email</div>
                                        <div class="error" *ngIf="kartRequest.controls?.email?.errors?.pattern && isSubmitKartRequest">Please enter a valid email.</div>
                                      </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Address 1</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="cceld_address1" placeholder="Address 1">
                                        <div class="error" *ngIf="kartRequest.controls?.cceld_address1?.errors?.required && isSubmitKartRequest">Please enter address 1</div>

                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Address 2</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="cceld_address2" placeholder="Address 2">
                                        <div class="error" *ngIf="kartRequest.controls?.cceld_address2?.errors?.required && isSubmitKartRequest">Please enter address</div>
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Pincode</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="pincode" placeholder="Pincode" (input)="knowYourStateCity($event.target.value)">
                                        <div class="error" *ngIf="kartRequest.controls?.pincode?.errors?.required && isSubmitKartRequest">Please enter Pincode</div>
                                        <div class="error" *ngIf="kartRequest.controls?.pincode?.errors?.pattern && isSubmitKartRequest">Please enter a valid Pincode.</div>
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">State</label>
                                    <div class="form-field">
                                        <!--input type="text" autocomplete="off" formControlName="state" placeholder="State" (selected)="ifStateIfCity('state')" [(ngModel)]="selectedState"-->
                                        <ng-select [options]="stateList" formControlName="state" placeholder="Select State" (selected)="ifStateIfCity('state')" [(ngModel)]="selectedState"></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.state?.errors?.required && isSubmitKartRequest">Please enter State</div>
                                        <div class="error" *ngIf="kartRequest.controls?.state?.errors?.pattern && isSubmitKartRequest">Please enter a valid State.</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">City</label>
                                    <div class="form-field">
                                        <!--input type="text" autocomplete="off" formControlName="city" placeholder="City" (selected)="ifStateIfCity('city')" [(ngModel)]="selectedCity"-->
                                        <ng-select [options]="cityList" formControlName="city" placeholder="Select City" (selected)="ifStateIfCity('city')" [(ngModel)]="selectedCity"></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.city?.errors?.required && isSubmitKartRequest">Please enter City</div>
                                        <div class="error" *ngIf="kartRequest.controls?.city?.errors?.pattern && isSubmitKartRequest">Please enter a valid City.</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">CC Email</label>
                                    <div class="form-field">
                                        <input type="text"  autocomplete="off" formControlName="CcEmail" placeholder="Please Enter CC Email" >
                                        <div class="error" *ngIf="kartRequest.controls?.CcEmail?.errors">Please enter CC Email</div>
                                        <div>Note: enter comma(,) Separated Emails</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Building type</label>
                                    <div class="form-field">
                                        <select formControlName="BuildingType">
                                            <option value="residential">Residential</option>
                                            <option value="commercial">Commercial</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.BuildingType?.errors">Please Provide Building Type</div>
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Type of site</label>
                                    <div class="form-field">
                                        <select *ngIf="displayCommercialList" formControlName="cceld_sitetype">
                                            <option value=" Industrial">Industrial</option>
                                            <option value="Institutional/Corporate">Institutional/Corporate</option>
                                            <option value="MSME">MSME</option>
                                            <option value="Education">Education</option>
                                            <option value="Government">Government</option>
                                            <option value="Others">Others</option>
                                        </select>
                                        <select *ngIf="!displayCommercialList" formControlName="cceld_sitetype">
                                            <option value="Multi-Storey">Multi-Storey</option>
                                            <option value="Villa/Independent House">Villa / Independent House</option>
                                            <option value="RWA/GroupHousing">RWA / Group Housing</option>
                                            <option value="HighRiseSociety">High Rise Society</option>
                                            <option value="Others">Others</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.cceld_sitetype?.errors">Type Of Site Required*</div>

                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Proposal Type</label>
                                    <div class="form-field">
                                        <select formControlName="proposal_type" (change)="onProposalType($event)">
                                            <option value="1">Short</option>
                                            <option value="2">Detailed</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_type?.errors?.required">Please Provide Proposal Type</div>
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Electricity Tariff (Rs)</label>
                                    <div class="form-field">
                                        <input type="text" class="numberField" formControlName="electricity_terrif" placeholder="Electricity Tariff (Rs/kWh)" >
                                        <div class="error" *ngIf="kartRequest.controls?.electricity_terrif?.errors?.required  && isSubmitKartRequest">Please enter Electricity Tariff (Rs/kWh)</div>
                                        <div class="error" *ngIf="kartRequest.controls?.electricity_terrif?.errors?.pattern  && isSubmitKartRequest">Please enter valid Ex:14.53</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Discom</label>
                                    <div class="form-field">
                                        <input type="text" formControlName="discom" placeholder="Discom">
                                        <div class="error" *ngIf="kartRequest.controls?.discom?.errors">Please Provide discom</div>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="off_grid">
                                    <label for="">Average Monthly bill (Rs)</label>
                                    <div class="form-field">
                                        <input type="text" class="numberField" formControlName="AvgMonthlyBill" placeholder="Average Monthly bill" (keypress)="_keyPress($event)">
                                        <div class="error" *ngIf="kartRequest.controls?.AvgMonthlyBill?.errors">Please Provide Average Monthly bill</div>
                                    </div>
                                </div>


                                <div class="field-wrapper">
                                    <label for="">Average Power Cut</label>
                                    <div class="form-field">
                                        <input type="text" class="numberField" formControlName="AvgPowerCut" placeholder="Average Power Cut">
                                        <div class="error" *ngIf="kartRequest.controls?.AvgPowerCut?.errors">Please Provide Average Power Cut</div>
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Roof Type</label>
                                    <div class="form-field">
                                        <select formControlName="RoofType">
                                            <option value="Flat RCC">Flat RCC</option>
                                            <option value="Tin Shed">Tin Shed</option>
                                            <option value="Asbestos">Asbestos</option>
                                            <option value="Ground Mount">Ground Mount</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.RoofType?.errors">Please Provide Roof Type</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Connection Type</label>
                                    <div class="form-field">
                                        <ng-select *ngIf="(displayEquip && off_grid); else block" autocomplete="off" [options]="connectionTypeCommercial" formControlName="sf_connection_type" placeholder="Select Connection Type"></ng-select>
                                        <ng-template #block>
                                            <ng-select   autocomplete="off"  [options]="connectionType" formControlName="sf_connection_type" placeholder="Select Connection Type"></ng-select>
                                       </ng-template>
                                        <div class="error" *ngIf="kartRequest.controls?.sf_connection_type?.errors">Please select connection type</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                  <label for="">Sanctioned Load Capacity (kW)</label>
                                  <div class="form-field">
                                      <input type="text" autocomplete="off" formControlName="sf_sanctioned_load_capacity" placeholder="Sanctioned Load Capacity">
                                      <div class="error" *ngIf="kartRequest.controls?.sf_sanctioned_load_capacity?.errors?.required && isSubmitKartRequest">Please enter sanctioned load capacity</div>
                                      <div class="error" *ngIf="kartRequest.controls?.sf_sanctioned_load_capacity?.errors?.pattern && isSubmitKartRequest">Please enter valid value Ex:14.53</div>
                                      <div class="error" *ngIf="kartRequest.controls?.sf_sanctioned_load_capacity?.errors?.min && isSubmitKartRequest">Please enter minimum of 1</div>
                                  </div>
                              </div>
                                <div class="field-wrapper">
                                  <label for="">Proposed DC capacity</label>
                                  <div class="form-field">
                                      <input type="text" class="numberField" formControlName="proposal_dc_capacity_val" placeholder="Proposal DC capacity">
                                      <div class="error" *ngIf="kartRequest.controls?.proposal_dc_capacity_val?.errors">Required</div>
                                  </div>
                              </div>
                          </div>
                        </p-panel>
                        <p-panel  [toggleable]="true" (click)="setformsection('solar-component')" [collapsed]="formsection!='solar-component'">
                            <p-header class="ui-helper-clearfix">
                                    <span class="ui-panel-title" [style.color]="SolarComponentsError?'red':''">Solar Components:</span>
                            </p-header>
                            <div class="tab-content-detail">  <br>
                                <div class="field-wrapper">
                                    <label for="">Solution Type</label>
                                    <div class="form-field">
                                        <ng-select autocomplete="off" [options]="proposalSolutionType" formControlName="proposal_solution_type" placeholder="Select Solution Type" ></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_solution_type?.errors">Please select solution type</div>
                                    </div>
                                </div>
                                 <div class="field-wrapper" *ngIf="!off_grid">
                                        <label for="">Average Running Load</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="avg_running_load" placeholder="Average Running Load">
                                            <div class="error" *ngIf="kartRequest.controls?.avg_running_load?.errors?.required">Please Provide Average Running Load</div>
                                            <div class="error" *ngIf="kartRequest.controls?.avg_running_load?.errors?.pattern">Please enter valid Ex:14.53</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Type Of Solar Inverter with Different Rating</label>
                                        <div class="form-field">
                                            <ng-select autocomplete="off"  class="numberField" [options]="SolarInverterNumber" formControlName="proposal_inverter_number" placeholder="No. Of Solar Inverter"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_number?.errors?.required && isSubmitKartRequest">Please Select No of solar Inverter</div>

                                        </div>
                                    </div>
                                    <div><!--SOler invert one-->
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Rating(In Kw)</label>
                                        <div class="form-field">
                                            <ng-select autocomplete="off"  class="numberField" [options]="SolarInverterOptions" formControlName="proposal_inverter_rating" placeholder="Solar Inverter Rating(In Kw)" (blur)="onInverterQuantity($event)"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Rating</div>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating?.errors?.pattern && isSubmitKartRequest">Please enter valid value Ex:14.53</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Phase</label>
                                        <div class="form-field">
                                            <!-- <input type="text" autocomplete="off" class="numberField" formControlName="proposal_inverter_phase" placeholder="Inverter Phase"> -->
                                            <ng-select [options]="GTIphase" formControlName="proposal_inverter_phase" placeholder="Inverter Phase"></ng-select>

                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_phase?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Phase</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Quantity</label>
                                        <div class="form-field">
                                            <input type="text" id="solarquantity" autocomplete="off" class="numberField" formControlName="proposal_inverter_quantity" placeholder="Inverter Quantity" (blur)="onInverterQuantity($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_quantity?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Quantity</div>
                                        </div>
                                    </div>
                                </div>

                                <div  *ngIf="numberOfSolarInverter>=2"><!--SOler invert two-->
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Rating(In Kw) 2nd</label>
                                        <div class="form-field">
                                            <ng-select autocomplete="off"  class="numberField" [options]="SolarInverterOptions" formControlName="proposal_inverter_rating2" placeholder="Solar Inverter Rating(In Kw)" (blur)="onInverterQuantity($event)"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating2?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Rating</div>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating2?.errors?.pattern && isSubmitKartRequest">Please enter valid value Ex:14.53</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Phase 2nd</label>
                                        <div class="form-field">
                                            <!-- <input type="text" autocomplete="off" class="numberField" formControlName="proposal_inverter_phase2" placeholder="Inverter Phase"> -->
                                            <ng-select [options]="GTIphase" formControlName="proposal_inverter_phase2" placeholder="Inverter Phase"></ng-select>

                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_phase2?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Phase</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Quantity 2nd</label>
                                        <div class="form-field">
                                            <input type="text" autocomplete="off" id="solarquantity2" class="numberField" formControlName="proposal_inverter_quantity2" placeholder="Inverter Quantity" (blur)="onInverterQuantity($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_quantity2?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Quantity</div>
                                        </div>
                                    </div>
                                </div>

                                <div *ngIf="numberOfSolarInverter>=3"><!--SOler invert three-->
                                    <div class="field-wrapper" >
                                        <label for="">Solar Inverter Rating(In Kw) 3rd</label>
                                        <div class="form-field">
                                            <ng-select autocomplete="off"  class="numberField" [options]="SolarInverterOptions" formControlName="proposal_inverter_rating3" placeholder="Solar Inverter Rating(In Kw)" (blur)="onInverterQuantity($event)"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating3?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Rating</div>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_rating3?.errors?.pattern && isSubmitKartRequest">Please enter valid value Ex:14.53</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Phase 3rd</label>
                                        <div class="form-field">
                                            <!-- <input type="text" autocomplete="off" class="numberField" formControlName="proposal_inverter_phase3" placeholder="Inverter Phase"> -->
                                            <ng-select [options]="GTIphase" formControlName="proposal_inverter_phase3" placeholder="Inverter Phase"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_phase3?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Phase</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Solar Inverter Quantity 3rd</label>
                                        <div class="form-field">
                                            <input type="text" autocomplete="off" class="numberField" id="solarquantity3" formControlName="proposal_inverter_quantity3" placeholder="Inverter Quantity" (blur)="onInverterQuantity($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_inverter_quantity3?.errors?.required && isSubmitKartRequest">Please enter Solar Inverter Quantity</div>
                                        </div>
                                    </div>
                                </div>

                                    <div class="field-wrapper">
                                        <label for="">No. of solar panels</label>
                                        <div class="form-field">
                                            <input type="text" autocomplete="off" class="numberField" formControlName="number_of_solar_panel" placeholder="No. of solar panels" (blur)="onNoOfSolarPanelBlur($event)" (keyup)="calculateDCapacity()" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.number_of_solar_panel?.errors?.required && isSubmitKartRequest">Please enter No. of solar panels</div>
                                            <div class="error" *ngIf="kartRequest.controls?.number_of_solar_panel?.errors?.pattern && isSubmitKartRequest">Please enter only numeric value.</div>
                                        </div>
                                    </div>

                                        <div class="field-wrapper">



                                              <label for="">Module capacity (Wp)</label>
                                              <div class="form-field">
                                                <ng-select
                                                  [options]="solarPvModuleRating"
                                                  formControlName="module_capacity"
                                                  placeholder="Module capacity in Wp"

                                                ></ng-select>
                                                <div class="error" *ngIf="kartRequest.controls?.module_capacity?.errors?.required && isSubmitKartRequest ">Please enter Module capacity in Wp</div>
                                                <div class="error" *ngIf="kartRequest.controls?.module_capacity?.errors?.pattern && isSubmitKartRequest">Please enter only numeric value.</div>
                                              </div>

                                        </div>
                                        <div class="field-wrapper">
                                                <label for="">DC Capacity in Watts (Wp)</label>
                                                <div class="form-field">
                                                    <input type="text" autocomplete="off" class="numberField" formControlName="proposal_dc_capacity" (keypress)="_keyPress($event)" placeholder="DC Capacity in watts">
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_dc_capacity?.errors?.required && isSubmitKartRequest">Please enter DC capacity in watts</div>
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_dc_capacity?.errors?.pattern && isSubmitKartRequest">Please enter only numeric value.</div>
                                                </div>
                                        </div>
                                    <div class="field-wrapper">
                                        <label for="">Panel Type</label>
                                        <div class="form-field">
                                            <ng-select [options]="proposalPanelType" formControlName="proposal_panel_type" (focusout)="onSolarPanelBlur($event)"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_panel_type?.errors  && isSubmitKartRequest">Please select Panel type</div>
                                        </div>
                                    </div>
                                      <div class="field-wrapper">
                                        <label for="">Insolation Ref city</label>
                                        <div class="form-field">
                                            <ng-select [options]="InsolationRefcityListing" formControlName="proposal_insolated_city" placeholder="Select insolated city"></ng-select>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_insolated_city?.errors  && isSubmitKartRequest">Please select insolated city</div>
                                        </div>
                                    </div>

                                    <div class="field-wrapper">
                                        <label for="">Estimated Energy Generated per kW (units/year) </label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="global_solr_irr" placeholder=" Estimated Energy Generated per kW (units/year)" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.global_solr_irr?.errors?.required  && isSubmitKartRequest">Please enter Estimated Energy Generated per kW (units/year)</div>
                                            <div class="error" *ngIf="kartRequest.controls?.global_solr_irr?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                        </div>
                                    </div>

                                    <div class="field-wrapper">
                                        <label for="">No. of SPGS</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="no_of_spgs" placeholder="No. of SPGS" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.no_of_spgs?.errors?.required && isSubmitKartRequest">Please enter No. of SPGS</div>
                                            <div class="error" *ngIf="kartRequest.controls?.no_of_spgs?.errors?.pattern && isSubmitKartRequest">Please enter only numeric value.</div>
                                        </div>
                                    </div>
                                    <ng-template [ngIf]="off_grid && displayEquip">
                                        <div class="field-wrapper">
                                            <label for="">Inverter Accessories</label>
                                            <div class="form-field">
                                                <input type="radio" id="dgZero" name="proposal_syncValue" formControlName="proposal_syncValue" value="dgZero" (change)="onSynChange($event.target.value)">
                                                <label for="dgZero">DG Sync + Zero Export Device</label><br>

                                                <input type="radio" id="dg" name="proposal_syncValue" formControlName="proposal_syncValue" value="dg" (change)="onSynChange($event.target.value)">
                                                <label for="dg"> DG Sync</label><br>

                                                <input type="radio" id="zero" name="proposal_syncValue" formControlName="proposal_syncValue" value="zero" (change)="onSynChange($event.target.value)">
                                                <label for="zero">Zero Export Device</label><br>

                                                <input type="radio" id="none" name="proposal_syncValue" formControlName="proposal_syncValue" value="none" (change)="onSynChange($event.target.value)">
                                                <label for="none">None</label><br>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_syncValue?.errors?.required">Please Select Inverter Accessories</div>

                                            </div>
                                        </div>

                                        <div class="field-wrapper">
                                            <label for="">Accessories Amount (Rs)</label>
                                            <div class="form-field">
                                            <input type="text" class="numberField" id="dgzeroAmount" autocomplete="off" formControlName="proposal_syncAmount" placeholder="Amount" (keypress)="isNumberKey($event)"/>
                                            <div class="error" *ngIf="kartRequest.controls?.proposal_syncAmount?.errors?.required && !syncAmountHide ">Please Enter Accessories Amount</div>
                                            </div>
                                        </div>
                                    </ng-template>

                                </div>
                            </p-panel>
                        <p-panel  [toggleable]="true" (click)="setformsection('pricing')" [collapsed]="formsection!='pricing'">
                            <p-header class="ui-helper-clearfix">
                                    <span class="ui-panel-title" [style.color]="PricingandValueOfferingsError?'red':''">Pricing and Value Offerings:</span>
                            </p-header>
                                <div class="tab-content-detail">  <br>
                                <div *ngIf="!displayEquip || !off_grid" class="field-wrapper">
                                    <label for="">Structure BOM</label>
                                    <div class="form-field">
                                        <textarea type="text"  formControlName="StrucBOM" placeholder="Structure BOM"></textarea>
                                        <div class="error" *ngIf="kartRequest.controls?.StrucBOM?.errors">Please Provide Structure BOM</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Service Support</label>
                                    <div class="form-field">
                                        <textarea  formControlName="proposal_service_support" placeholder="Service Support"></textarea>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_service_support?.errors && isSubmitKartRequest">Please enter Service Support</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Proposal AMC</label>
                                    <div class="form-field">
                                        <textarea formControlName="proposal_amc" placeholder="Proposal AMC"></textarea>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_amc?.errors && isSubmitKartRequest">Please Proposal AMC</div>
                                    </div>
                                </div>
                                <div *ngIf="off_grid && displayEquip" class="field-wrapper">
                                    <label for="">AMC Maintenance</label>
                                    <div class="form-field">
                                        <textarea formControlName="amc_maintanace" placeholder="AMC Maintenance"></textarea>
                                        <div class="error" *ngIf="kartRequest.controls?.amc_maintanace?.errors && isSubmitKartRequest">Please AMC Maintenance</div>
                                    </div>
                                </div>
                                <div *ngIf="off_grid && displayEquip" class="field-wrapper">
                                    <label for="">AMC Charge</label>
                                    <div class="form-field">
                                        <select (selected)="kartRequest.controls.amc_option.value" formControlName="amc_option" (change)="onAmcOptionChange($event)">
                                            <option value="0">Amount (Rs)</option>
                                            <option value="1">Percentage</option>
                                            <option value="2">Don’t mention</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.amc_option?.errors && isSubmitKartRequest">Please Select AMC charge option</div>
                                        <input type="text" class="numberField" formControlName="amc_charge" placeholder="AMC Charge" (keypress)="isNumberKey($event)">
                                        <div class="error" *ngIf="kartRequest.controls?.amc_charge?.errors && isSubmitKartRequest">Please enter AMC charge</div>
                                   </div>
                                </div>
                                <div class="field-wrapper"  *ngIf="!(displayEquip && off_grid)">
                                    <label for="">Structure Type</label>
                                    <div class="form-field">
                                        <!--input type="text" formControlName="proposal_structure_type" placeholder="Structure Type"-->
                                        <ng-select [options]="StructType"  formControlName="proposal_structure_type" placeholder="Select Structure Type" ></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_structure_type?.errors  && isSubmitKartRequest">Please enter Structure Type</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">EMI Option</label>
                                    <div class="form-field">
                                        <ng-select [(ngModel)]="selecteEmiOption" [options]="emiOptions" formControlName="proposal_emi_option" placeholder="Select EMI Options"></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_emi_option?.errors && isSubmitKartRequest">Please Select EMI Option</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                <label for="" *ngIf="kartRequest.controls.BuildingType.value ==''
                                ||kartRequest.controls.BuildingType.value == 'commercial'
                                || kartRequest.controls.BuildingType.value == 'industrial'
                                ||  kartRequest.controls.BuildingType.value == 'Institution'">Discount Option</label>
                                <!-- <label for="" *ngIf="kartRequest.controls.BuildingType.value == 'commercial'">Discount Option</label> -->
                                    <label for="" *ngIf="kartRequest.controls.BuildingType.value == 'residential'">Subsidy Option</label>
                                    <div class="form-field">
                                        <select (selected)="kartRequest.controls.is_discount.value" formControlName="is_discount">
                                            <option value="0">Not Available</option>
                                            <option value="1">Available</option>
                                        </select>
                                        <!-- <div class="error" *ngIf="kartRequest.controls?.is_discount?.errors">Please select whether discount is available or not</div> -->
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="off_grid">
                                    <label for="">Pricing Options</label>
                                    <div class="form-field">
                                        <ng-select  [options]="pricingOptions" formControlName="proposal_pricing_options" placeholder="Select Pricing Options"></ng-select>
                                        <div class="error" *ngIf="kartRequest.controls?.proposal_pricing_options?.errors && isSubmitKartRequest">Please choose Pricing Options</div>
                                    </div>
                                </div>
                                <!--div class="field-wrapper">
                                    <img class="pricing_card gold_wrapper" [src]="img_gold" *ngIf="selectePricingOption==1 || selectePricingOption==3" />
                                    <img class="pricing_card silver_wrapper" [src]="img_silver" *ngIf="selectePricingOption==2 || selectePricingOption==3" />
                                </div-->

                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">&nbsp;</label>
                                        <div class="section">
                                            <div class="form-field item label" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <span *ngIf="off_grid">GOLD PACKAGE</span>
                                                <span *ngIf="!off_grid">Off-grid PACKAGE</span>
                                            </div>
                                            <div class="form-field item label" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                SILVER PACKAGE
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>

                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Solar PV Panel</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <textarea formControlName="proposal_solar_pv_panels_gold" placeholder="Solar PV Panel" (focusout)="onSolarPanelBlur($event)"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_solar_pv_panels_gold?.errors && isSubmitKartRequest">Please enter Solar PV Panel(Gold)</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                    <textarea formControlName="proposal_solar_pv_panels_silver" placeholder="Solar PV Panel" (focusout)="onSolarPanelBlur($event)"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_solar_pv_panels_silver?.errors && isSubmitKartRequest">Please enter Solar PV Panel(Silver)</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>
                                <div *ngIf="!off_grid" class="" class="one_wrapper">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Solar Battery</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1">
                                                <textarea formControlName="proposal_solar_battery" placeholder="Solar Battery"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_solar_battery?.errors && isSubmitKartRequest">Please enter Solar Battery</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>

                              <div  *ngIf="!displayEquip" class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Earthing & PV Protection system</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <textarea formControlName="proposal_earthing_pv_protection_system_gold" placeholder="Earthing & PV Protection system"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_earthing_pv_protection_system_gold?.errors">Please Enter Earthing & PV Protection system</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <textarea formControlName="proposal_earthing_pv_protection_system_silver" placeholder="Earthing & PV Protection system"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_earthing_pv_protection_system_silver?.errors">Please Enter Earthing & PV Protection system</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>

                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Project Value incl. of GST (Rs) </label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                    <input type="text" class="numberField" formControlName="project_value_gold" placeholder="Project Value incl. of GST (Rs)" (keypress)="_keyPress($event)">
                                                    <div class="error" *ngIf="kartRequest.controls?.project_value_gold?.errors?.required && isSubmitKartRequest">Please enter  Project value incl. of GST (Rs)</div>
                                                    <div class="error" *ngIf="kartRequest.controls?.project_value_gold?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                    <input type="text" class="numberField" formControlName="project_value_silver" placeholder="Project Value incl. of GST (Rs)"
                                                    (keypress)="_keyPress($event)">
                                                    <div class="error" *ngIf="kartRequest.controls?.project_value_silver?.errors?.required && isSubmitKartRequest">Please enter Project value incl. of GST (Rs)</div>
                                                    <div class="error" *ngIf="kartRequest.controls?.project_value_silver?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3" >
                                    <label for="">Payment Split</label>
                                    <div class="form-field" style="margin-left: -255px;width: 50%;">
                                        <select formControlName="payment_split">
                                            <option value="3" >3</option>
                                            <option value="4" >4</option>
                                        </select>
                                        <div class="error" *ngIf="kartRequest.controls?.payment_split?.errors?.required">Please select number of Payments </div>
                                    </div>
                                </div>

                                <div style="width: 100%; clear: both;"></div>
                                <!--  -->
                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3" >
                                            <label for="" style="font-weight: bold;">Payment Tranche</label>
                                        <div class="section" style="display: flex; flex-direction:row ;">
                                            <div class="form-field item" style="width: 100%;">
                                                <!-- <textarea   formControlName='proposal_advanced_des'  style="height: 90px;width: 47%;margin-top:5px;"></textarea> -->
                                                <label for="" style="font-weight: bold;">Description</label>
                                         </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <label for="" style="font-weight: bold;">Percentage</label>
                                                    </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <label for="" style="font-weight: bold;">Silver %</label>
                                               </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  -->
                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3" >
                                            <label for="">Advance Percentage</label>
                                        <div class="section" style="display: flex; flex-direction:row ;">

                                            <div class="form-field item" style="width: 100%;" formArrayName='tranche_description'>
                                                <!-- <textarea   formControlName='proposal_advanced_des'  style="height: 90px;width: 47%;margin-top:5px;"></textarea> -->
                                                <input type="text" class="numberField" formControlName="0"  style="width: 70%;">
                                                <!-- <div class="error" *ngIf="kartRequest.controls?.proposal_advanced_des?.errors?.required">Required*</div> -->
                                                <div class="error" *ngIf="tranche_description.controls[0].errors?.required">Required*</div>

                                         </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                    <input type="text" class="numberField" formControlName="proposal_advanced" placeholder="Advance %" (keypress)="_keyPress($event)" style="width: 50%;">
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_advanced?.errors?.pattern  && isSubmitKartRequest">Please enter Advance %</div>
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_advanced?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                    <input type="text" class="numberField" formControlName="proposal_advance_silver" placeholder="Advance %" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck_silver()" style="width: 50%;">
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver?.errors?.required  && isSubmitKartRequest">Please enter Advance %</div>
                                                    <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>

                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">2nd Tranche Percentage</label>
                                        <div class="section" style="display: flex; flex-direction:row ;">

                                            <div class="form-field item" style="width: 100%;" formArrayName='tranche_description'>
                                                <!-- <textarea   formControlName='proposal_advanced_des'  style="height: 90px;width: 47%;margin-top:5px;"></textarea> -->
                                                <input type="text" class="numberField" formControlName="1"  style="width: 70%;">
                                                <!-- <div class="error" *ngIf="kartRequest.controls?.proposal_payment_2_des?.errors?.required">Required*</div> -->
                                                <div class="error" *ngIf="tranche_description.controls[1].errors?.required">Required*</div>

                                         </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_payment_2" placeholder="2nd Tranche Percentage" (keypress)="_keyPress($event)" style="width: 50%;">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_payment_2?.errors?.required  && isSubmitKartRequest">Please enter 2nd Tranche Percentage</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_payment_2?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_advance_silver_1" placeholder="2nd Tranche Percentage" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck_silver()" style="width: 50%;">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver_1?.errors?.required  && isSubmitKartRequest">Please enter 2nd Tranche Percentage</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver_1?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>


                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">3rd Tranche Percentage</label>
                                        <div class="section" style="display: flex; flex-direction:row ;">
                                            <div class="form-field item" style="width: 100%;" formArrayName='tranche_description'>
                                                <!-- <textarea   formControlName='proposal_advanced_des'  style="height: 90px;width: 47%;margin-top:5px;"></textarea> -->
                                                <input type="text" class="numberField" formControlName="2"  style="width: 70%;">
                                                <!-- <div class="error" *ngIf="kartRequest.controls?.proposal_payment_3_des?.errors?.required">Required*</div> -->
                                                <div class="error" *ngIf="tranche_description.controls[2].errors?.required">Required*</div>

                                         </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_payment_3" placeholder="3rd Tranche Percentage" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck()" style="width: 50%;">
                                                <div class="error"  *ngIf="kartRequest.controls?.proposal_payment_3?.errors?.required  && isSubmitKartRequest">Please enter 3rd Tranche Percentage</div>
                                                <div class="error" *ngIf="!show_dialog && payment_percentage_check==0">Sum of Advance%, 2nd Tranche %, 3rd Tranche % should be 100</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_payment_3?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_advance_silver_2" placeholder="3rd Tranche Percentage" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck_silver()" style="width: 50%;">
                                                <div class="error"  *ngIf="kartRequest.controls?.proposal_advance_silver_2?.errors?.required  && isSubmitKartRequest">Please enter 3rd Tranche Percentage</div>
                                                <div class="error" *ngIf="!show_dialog && payment_percentage_check_silver==0">Sum of Advance%, 2nd Tranche %, 3rd Tranche % should be 100</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver_2?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>


                                        </div>
                                    </div>
                                </div>

                  <div *ngIf="show_dialog">
                                 <div style="width: 100%; clear: both;"></div>

                                <div class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">4th Tranche Percentage</label>
                                        <div class="section" style="display: flex; flex-direction:row ;">
                                            <div class="form-field item" style="width: 100%;" formArrayName='tranche_description'>
                                                <!-- <textarea   formControlName='proposal_advanced_des'  style="height: 90px;width: 47%;margin-top:5px;"></textarea> -->
                                                <input type="text" class="numberField" formControlName="3"  style="width: 70%;">
                                         </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_payment_4" placeholder="4th Tranche Percentage" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck()" style="width: 50%;">
                                                <div class="error"  *ngIf="kartRequest.controls?.proposal_payment_4?.errors?.required  && isSubmitKartRequest">Please enter 4th Tranche Percentage</div>
                                                <div class="error" *ngIf="payment_percentage_check==0">Sum of Advance%, 2nd Tranche %, 3rd Tranche %, 4th Tranche % should be 100</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_payment_4?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_advance_silver_3" placeholder="4th Tranche Percentage" (keypress)="_keyPress($event)" (keyup)="paymentPercentageCheck_silver()" style="width: 50%;">
                                                <div class="error"  *ngIf="kartRequest.controls?.proposal_advance_silver_3?.errors?.required  && isSubmitKartRequest">Please enter 4th Tranche Percentage</div>
                                                <div class="error" *ngIf="payment_percentage_check_silver==0">Sum of Advance%, 2nd Tranche %, 3rd Tranche %,4th Tranche % should be 100</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_advance_silver_3?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                <div style="width: 100%; clear: both;"></div>


                                <div class="" *ngIf="selecteEmiOption==1" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">EMI</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_emi_gold" placeholder="Proposal EMI">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_gold?.errors?.required  && isSubmitKartRequest">Please Enter EMI</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_gold?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_gold?.errors?.min  && isSubmitKartRequest">Please enter amount minimum of Rs 1.</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="proposal_emi_silver" placeholder="EMI Amount">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.required  && isSubmitKartRequest">Please Enter EMI</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.min  && isSubmitKartRequest">Please enter amount minimum of Rs 1.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="width: 100%; clear: both;"></div>

                                <div class="field-wrapper" *ngIf="off_grid || kartRequest.controls.proposal_solution_type.value == '3'">
                                    <label for="">Net-Metering cost in project price</label>
                                    <div class="form-field" style="margin-left: -255px;width: 50%;">
                                        <select formControlName='netMeteringcost'>
                                            <option value='0'>Include</option>
                                            <option value='1'>Exclude</option>
                                        </select>
                                    </div>
                                </div>

                                <div style="width: 100%; clear: both;"></div>

                                <div class="" *ngIf="kartRequest.controls.is_discount.value == 1" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="" *ngIf="kartRequest.controls.BuildingType.value == 'commercial'|| kartRequest.controls.BuildingType.value==''||
                                         kartRequest.controls.BuildingType.value=='industrial' || kartRequest.controls.BuildingType.value=='Institution'">Special Discount Offered (Rs)</label>
                                        <label for="" *ngIf="kartRequest.controls.BuildingType.value == 'residential'">Special Subsidy Offered (Rs)</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text" class="numberField"  formControlName="discount" (keypress)="_keyPress($event)" [placeholder]="kartRequest.controls.BuildingType.value == 'residential'  ? 'Subsidy' : 'Discount'">
                                                <div class="error" *ngIf="kartRequest.controls?.discount?.errors?.required   && isSubmitKartRequest">
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'residential' ">
                                                        Please Provide Subsidy
                                                        </ng-container>
                                                        <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'commercial'">
                                                            Please Provide Discount
                                                            </ng-container>

                                                                            </div>
                                                <div class="error" *ngIf="kartRequest.controls?.discount?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                                <div class="error" *ngIf="kartRequest.controls?.discount?.errors?.min   && isSubmitKartRequest">
                                                    Please Provide
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'commercial'">
                                                        discount
                                                    </ng-container>
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'residential'">
                                                    subsidy
                                                        </ng-container>
                                                    minimum of 1</div>
                                               </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" class="numberField" formControlName="discount_silver" (keypress)="_keyPress($event)" [placeholder]="kartRequest.controls.BuildingType.value == 'residential'? 'Subsidy' : 'Discount'">
                                                <div class="error" *ngIf="kartRequest.controls?.discount_silver?.errors?.required   && isSubmitKartRequest">
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'residential' ">
                                                        Please Provide Subsidy
                                                        </ng-container>
                                                        <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'commercial'">
                                                            Please Provide Discount
                                                            </ng-container>
                                                </div>
                                                <div class="error" *ngIf="kartRequest.controls?.discount_silver?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                                <div class="error" *ngIf="kartRequest.controls?.discount_silver?.errors?.min   && isSubmitKartRequest">
                                                    Please Provide
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'commercial'">
                                                        discount
                                                    </ng-container>
                                                    <ng-container *ngIf="kartRequest.controls.BuildingType.value == 'residential'">
                                                    subsidy
                                                        </ng-container>
                                                    minimum of 1                                                </div>

                                                <!-- <input type="text" class="numberField" formControlName="proposal_emi_silver" placeholder="EMI Amount">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.required  && isSubmitKartRequest">Please Enter EMI</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.pattern  && isSubmitKartRequest">Please enter only numeric value.</div>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_emi_silver?.errors?.min  && isSubmitKartRequest">Please enter amount minimum of Rs 1.</div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>


                                <div *ngIf="isResidential && off_grid" class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Remote Monitoring System</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <textarea formControlName="proposal_remote_monitoring_system_gold" placeholder="Remote Monitoring System"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_remote_monitoring_system_gold?.errors">Please Enter Remote Monitoring System</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <textarea  formControlName="proposal_remote_monitoring_system_silver" placeholder="Remote Monitoring System"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_remote_monitoring_system_silver?.errors">Please Enter Remote Monitoring System</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="width: 100%; clear: both;"></div>


                                 <div  *ngIf="!displayEquip" class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Maintenance</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <textarea formControlName="proposal_maintenance_gold" placeholder="Maintenance"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_maintenance_gold?.errors">Please Enter Maintenance</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <textarea  formControlName="proposal_maintenance_silver" placeholder="Maintenance"></textarea>
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_maintenance_silver?.errors">Please Enter Maintenance</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div  *ngIf="!displayEquip" class="" [ngClass]="{'gold_wrapper': selectePricingOption==3  , 'one_wrapper': (selectePricingOption==1 || selectePricingOption==2)}">
                                    <div class="field-wrapper" *ngIf="selectePricingOption==1 || selectePricingOption==2 || selectePricingOption==3">
                                        <label for="">Insurance</label>
                                        <div class="section">
                                            <div class="form-field item" *ngIf="selectePricingOption==1 || selectePricingOption==3">
                                                <input type="text"  formControlName="proposal_insurance_gold" placeholder="Insurance Option">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_insurance_gold?.errors">Please Enter Insurance</div>
                                            </div>
                                            <div class="form-field item" *ngIf="selectePricingOption==2 || selectePricingOption==3">
                                                <input type="text" formControlName="proposal_insurance_silver" placeholder="Insurance">
                                                <div class="error" *ngIf="kartRequest.controls?.proposal_insurance_silver?.errors">Please Enter Insurance</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div style="width: 100%; clear: both;"></div>

                                <div class="field-wrapper">
                                    <label for="">Proposal Additional Email Content</label>
                                    <div class="form-field">
                                        <quill-editor [styles]="{height: '250px'}" formControlName="proposal_addition_email_text"></quill-editor>
                                        <!-- <input type="text" formControlName="proposal_addition_email_text" placeholder="Proposal Addition Email Text"> -->
                                        <!-- <div class="error" *ngIf="kartRequest.controls?.proposal_addition_email_text?.errors">Please Provide Proposal Addition Email Text</div> -->
                                    </div>
                                </div>
                          </div>
                        </p-panel>
                          <p-panel  [toggleable]="true" (click)="setformsection('bos')" [collapsed]="formsection!='bos'">
                            <p-header class="ui-helper-clearfix">
                                    <span class="ui-panel-title" [style.color]="BoSEquipmentDetailsError?'red':''">BoS Equipment Details:</span>
                                </p-header>
                            <div class="tab-content-detail">
                                <br>
                            <div class="field-wrapper" *ngIf="!off_grid">
                                <label for="">Inverter Voltage</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="inverter_voltage" placeholder="Inverter Voltage" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.inverter_voltage?.errors">Please Provide Inverter Voltage</div>
                                </div>
                            </div>
                            <div class="field-wrapper" *ngIf="!off_grid">
                                <label for="">Battery Series</label>
                                <div class="form-field">
                                    <ng-select [options]="batterySeries" formControlName="battery_series" placeholder="Select Battery Series"></ng-select>
                                    <div class="error" *ngIf="kartRequest.controls?.battery_series?.errors">Please Provide Battery Series</div>
                                </div>
                            </div>

                            <div class="field-wrapper" *ngIf="!off_grid">
                                <label for="">Battery Capacity</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="battery_capacity" placeholder="Battery Capacity" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.battery_capacity?.errors">Please Provide Battery Capacity</div>
                                </div>
                            </div>
                            <div class="field-wrapper" *ngIf="!off_grid">
                                <label for="">Battery Volt</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="battery_volt" placeholder="Battery Volt" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.battery_volt?.errors">Please Provide Battery Volt</div>
                                </div>
                            </div>
                            <div class="field-wrapper" *ngIf="!off_grid">
                                <label for="">No. of battery</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="battery_nos" placeholder="No. of battery" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.battery_nos?.errors">Please Provide no. of battery</div>
                                </div>
                            </div>


                            <div class="field-wrapper">
                                <label *ngIf="!displayEquip || !off_grid">Delivery Weeks</label>
                                <label *ngIf="displayEquip && off_grid">Delivery & commissioning</label>
                                <div class="form-field">
                                    <input *ngIf="!displayEquip || !off_grid" type="text" class="numberField" formControlName="Dlvryweeks" placeholder="Delivery Weeks" (keypress)="_keyPress($event)">
                                    <select  *ngIf="displayEquip && off_grid"  formControlName="Dlvryweeks">
                                        <option value="2-3">2-3 Months</option>
                                        <option value="3-4">3-4 Months</option>
                                        <option value="4-5">4-5 Months</option>
                                        <option value="5-6">5-6 Months</option>
                                    </select>
                                    <div class="error" *ngIf="kartRequest.controls?.Dlvryweeks?.errors?.required">Please Provide Delivery <span  *ngIf="!displayEquip || !off_grid">Weeks</span><span  *ngIf="displayEquip">& commissioning</span></div>
                                </div>
                            </div>

                            <div class="field-wrapper"  *ngIf="displayEquip && off_grid">
                                <label for="">Structure Type</label>
                                <div class="form-field">
                                    <!--input type="text" formControlName="proposal_structure_type" placeholder="Structure Type"-->
                                    <ng-select [options]="StructType"  formControlName="proposal_structure_type" placeholder="Select Structure Type" ></ng-select>
                                    <div class="error" *ngIf="kartRequest.controls?.proposal_structure_type?.errors  && isSubmitKartRequest">Please enter Structure Type</div>
                                </div>
                        </div>


                            <div *ngIf="!displayEquip || !off_grid">
                            <div class="field-wrapper">
                                <label for="">Installation Weeks</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Installweeks" placeholder="Installation Weeks" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.Installweeks?.errors">Please Provide Installation Weeks</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Offer Validity in Days</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Offrvalidays" placeholder="Offer Validity in Days" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.Offrvalidays?.errors">Please Provide Offer Validity in Days</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">ACDB Quantity</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="ACDBqty" placeholder="ACDB Quantity" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.ACDBqty?.errors">Please Provide ACDB Quantity</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">DC Cable Core</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Dccablecore" placeholder="DC Cable Core" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.Dccablecore?.errors">Please Provide DC Cable Core</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">DC Cable sqmm</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Dccablesqmm" placeholder="DC Cable sqmm" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.Dccablesqmm?.errors">Please Provide DC Cable sqmm</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">AC Cable Core</label>
                                <div class="form-field">
                                    <!--input type="text" formControlName="Accablecore" placeholder="Accablecore"-->
                                    <ng-select [options]="AcCableCore" formControlName="Accablecore" placeholder="Select AC cable core"></ng-select>
                                    <div class="error" *ngIf="kartRequest.controls?.Accablecore?.errors">Please Provide AC cable core</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">AC Cable sqmm</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Accablesqmm" placeholder="AC Cable sqmm" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.Accablesqmm?.errors">Please Provide AC Cable sqmm</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">AC Cable length</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="Accablelen" placeholder="AC Cable length">
                                    <div class="error" *ngIf="kartRequest.controls?.Accablelen?.errors?.required">Please Provide AC cable length</div>
                                    <div class="error" *ngIf="kartRequest.controls?.Accablelen?.errors?.pattern">Please enter valid Ex:14.53</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Earthing Diameter</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="EarthingDia" placeholder="Earthing Diameter">
                                    <div class="error" *ngIf="kartRequest.controls?.EarthingDia?.errors?.required">Please Provide Earthing Diameter</div>
                                    <div class="error" *ngIf="kartRequest.controls?.EarthingDia?.errors?.pattern">Please enter valid Ex:14.53</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Earthing Length</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="EarthingLen" placeholder="Earthing Length">
                                    <div class="error" *ngIf="kartRequest.controls?.EarthingLen?.errors?.required">Please Provide Earthing Length</div>
                                    <div class="error" *ngIf="kartRequest.controls?.EarthingLen?.errors?.pattern">Please enter valid Ex:14.53</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Number of Earthing</label>
                                <div class="form-field">
                                    <!--input type="text" formControlName="EarthingNos" placeholder="Earthing Nos"-->
                                    <ng-select [options]="EarthingNos" formControlName="EarthingNos" placeholder="Select Number of Earthing"></ng-select>

                                    <div class="error" *ngIf="kartRequest.controls?.EarthingNos?.errors">Please Provide Number of Earthing</div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">No. Of Cells</label>
                                <div class="form-field">
                                    <!--input type="text" formControlName="ModNoofcells" placeholder="No. Of Cells"-->
                                    <ng-select [options]="NoOfCells" formControlName="ModNoofcells" placeholder="Select No of cells"></ng-select>
                                    <div class="error" *ngIf="kartRequest.controls?.ModNoofcells?.errors">Please Provide No of cells</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">No. of LA</label>
                                <div class="form-field">
                                    <input type="text" class="numberField" formControlName="NoofLA" placeholder="No. of LA" (keypress)="_keyPress($event)">
                                    <div class="error" *ngIf="kartRequest.controls?.NoofLA?.errors">Please Provide No. of LA</div>
                                </div>
                            </div>
                            </div>
                            <div *ngIf="displayEquip && off_grid"  class="contaier">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Component</th>
                                            <th>Description</th>
                                            <th>Make</th>
                                            <th>Qty</th>
                                            <th>Warranty</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of ComponentData">
                                                <td width="5%">
                                                    <input [id]="data.component" class="checkBoxInput-x" type="checkbox"  [value]="data.component" [checked]="data.checked" (change)="onComponentData($event,data)">
                                                 <label [for]="data.component"></label>
                                                </td>
                                                <td width="5%">{{data.component}}</td>
                                                <td width="45%">
                                                    <textarea  cols="30" rows="10" [(ngModel)]="data.description" [ngModelOptions]="{standalone: true}" (blur)="onBlur(data,data.component)"></textarea>
                                                </td>
                                                <td width="15%"><input type="text" [(ngModel)]=data.make [ngModelOptions]="{standalone: true}" (blur)="onBlur(data,data.component)"></td>
                                                <td width="15%"><input type="text" [(ngModel)]=data.qty [ngModelOptions]="{standalone: true}" (blur)="onBlur(data,data.component)"></td>
                                                <td width="15%"><input type="text" [(ngModel)]="data.warranty" [ngModelOptions]="{standalone: true}" (blur)="onBlur(data,data.component)"></td>
                                            </tr>
                                            </tbody>
                                    </table>
                                </div>
                                <div *ngIf="displayEquip && off_grid" class="contaier">
                                    <h5>Optional Equipments</h5><br>
                                    <table class="table table-bordered">
                                            <tbody>
                                                <tr *ngFor="let data of equipmentData">
                                                    <td width="5%">
                                                        <input [id]="data.component" class="checkBoxInput-x" type="checkbox"  [value]="data.component" [checked]="data.checked" (change)="onEquipmentData($event,data)">
                                                     <label [for]="data.component"></label>
                                                    </td>
                                                    <td width="5%"*ngIf="data.id <= 5">{{data.component}}</td>
                                                    <td width="5%" *ngIf="data.id > 5"><input type="text" [(ngModel)]=data.component [ngModelOptions]="{standalone: true}" (blur)="onBlurdata(data,data.component)"></td>
                                                    <td width="45%">
                                                        <textarea  cols="30" rows="10" [(ngModel)]="data.description" [ngModelOptions]="{standalone: true}" (blur)="onBlurdata(data,data.component)"></textarea>
                                                    </td>
                                                    <td width="15%"><input type="text" [(ngModel)]=data.make [ngModelOptions]="{standalone: true}" (blur)="onBlurdata(data,data.component)"></td>
                                                    <td width="15%"><input type="text" [(ngModel)]=data.qty [ngModelOptions]="{standalone: true}" (blur)="onBlurdata(data,data.component)"></td>
                                                    <td width="15%"><input type="text" [(ngModel)]="data.warranty" [ngModelOptions]="{standalone: true}" (blur)="onBlurdata(data,data.component)"></td>
                                                </tr>
                                                </tbody>
                                        </table>
                                        <a class="btn btn-blue btn-md equip" (click)="addRow()">
                                            <i class="fa fa-plus"></i>   Add a new equipment
                                        </a>
                                       </div>
                            </div>
                            <br>
                            </p-panel>
                            <div *ngIf="off_grid">
                                    <p-panel  [toggleable]="true" (click)="setformsection('financialcalc')" [collapsed]="formsection!='financialcalc'">
                                        <p-header class="ui-helper-clearfix">
                                                <span class="ui-panel-title" [style.color]="FinancialandPaybackCalculationError?'red':''">Financial and Payback Calculation:</span>
                                        </p-header>
                                    <div class="tab-content-detail">
                                        <br>
                                    <div class="field-wrapper">
                                        <label for="">Financial and Payback Calculation:</label>
                                        <div class="form-field">
                                            <input type="checkbox" class="checkBoxInput-x" id="capex"  value="capex" [checked]="capexSelected" (change)="onChangePayback($event)" >
                                            <label for="capex">Capex</label>
                                            <span *ngIf="displayEquip">
                                            <input type="checkbox" id="opex" class="checkBoxInput-x" id="opex" value="opex" [checked]="opexSelected"   (change)="onChangePayback($event)" >
                                            <label for="opex">Opex</label> </span><br>

                                           <div class="error" *ngIf="kartRequest.controls?.paybackValidation?.errors">Financial and Payback Calculation Required*</div>
                                         </div>
                                    </div>

                                <div class="field-wrapper">
                                        <label for="">Degradation in generation (% per year) </label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="degradation" placeholder="Degradation in generation" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.degradation?.errors">Please Provide Degradation in generation</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Escalation in EB Tariff (% per year) </label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="escalation" placeholder="Escalation" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.escalation?.errors">Please Provide Escalation</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_capex.value =='1'">
                                        <label for="">Bank Finance</label>
                                        <div class="form-field">
                                            <select  [(ngModel)]="bank_finance" (selected)="bank_finance" formControlName="bank_finance">
                                                <option value="1">Yes</option>
                                                <option value="0">No</option>
                                            </select>
                                            <div class="error" *ngIf="kartRequest.controls?.bank_finance?.errors">Please Provide Bank finance</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="(kartRequest.controls.is_capex.value  && bank_finance=='1' )">
                                        <label for="">Estimated Loan(%)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="estimated_loan" placeholder="Estimated Loan" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.estimated_loan?.errors">Please Provide Estimated Loan</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper"  *ngIf="(kartRequest.controls.is_capex.value  && bank_finance=='1')">
                                        <label for="">Rate of Interest(%)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="interest_rate" placeholder="Rate of Interest" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.interest_rate?.errors">Please Provide Rate of Interest</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="(kartRequest.controls.is_capex.value  && bank_finance==1)">
                                        <label for="">Repayment Period(years)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="repayment_period" placeholder="Repayment Period" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.repayment_period?.errors">Please Provide Repayment Period</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_capex.value ==1">
                                        <label for="">Corporate Tax Rate(%)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="corporate_tax_rate" placeholder="Corporate Tax Rate" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.corporate_tax_rate?.errors">Please Provide Corporate Tax Rate</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_capex.value == 1">
                                        <label for="">Discounted Rate(%)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="discounted_rate" placeholder="Discounted Rate" (keypress)="isNumberKey($event,1)">
                                            <div style="color: cornflowerblue;"> 0 value means no ROI row in proposal</div>
                                         </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_capex.value == 1">
                                        <label for="">Depreciation in 1st year(%)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="deprication" placeholder="depreciation" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.deprication?.errors">Please Provide depreciation</div>
                                        </div>
                                    </div>

                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_opex.value == 1 && displayEquip">
                                        <label for="">PPA Tariff(Rs/Unit)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="ppa_tarif" placeholder="PPA Tariff" (keypress)="isNumberKey($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.ppa_tarif?.errors">Please Provide PPA Tariff</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_opex.value == 1  && displayEquip">
                                        <label for="">Payment Security Period: (in months)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="payment_security_period" placeholder="Payment Security Period" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.payment_security_period?.errors">Please Provide Payment Security Period</div>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="kartRequest.controls.is_opex.value == 1  && displayEquip">
                                        <label for="">PPA Tenure(Years)</label>
                                        <div class="form-field">
                                            <input type="text" class="numberField" formControlName="ppa_tenure" placeholder="PPA Tenure" (keypress)="_keyPress($event)">
                                            <div class="error" *ngIf="kartRequest.controls?.ppa_tenure?.errors">Please Provide PPA Tenure</div>
                                        </div>
                                    </div>
                            </div> </p-panel>
                        </div>
                        <!-- <p-panel [toggleable]="true" (click)="setformsection('charges')" [collapsed]="formsection!='charges'">
                            <p-header class="ui-helper-clearfix">
                                <span class="ui-panel-title" [style.color]="ChargeFormError?'red':''">Charges</span>
                            </p-header>
                            <div class="tab-content-detail"> <br>
                                <div class="field-wrapper">
                                    <label for="">Platform charges*</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="platform_charges" placeholder="Platform charge">
                                        <div class="error" *ngIf="kartRequest.controls?.platform_charges?.errors?.required && isSubmitKartRequest">
                                            Please enter Platform Charge</div>
                                        <div class="error" *ngIf="kartRequest.controls?.platform_charges?.errors?.pattern && isSubmitKartRequest">
                                            Please enter a valid Platform Charge</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Material cost*</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="material_cost" placeholder="Material Cost">
                                        <div class="error" *ngIf="kartRequest.controls?.material_cost?.errors?.required && isSubmitKartRequest">
                                            Please enter Material cost</div>
                                        <div class="error" *ngIf="kartRequest.controls?.material_cost?.errors?.pattern && isSubmitKartRequest">
                                            Please enter a valid Material cost</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Partner cost*</label>
                                    <div class="form-field">
                                        <input type="text" autocomplete="off" formControlName="partner_cost" placeholder="Partner Cost">
                                        <div class="error" *ngIf="kartRequest.controls?.partner_cost?.errors?.required && isSubmitKartRequest">
                                            Please enter Partner cost</div>
                                        <div class="error" *ngIf="kartRequest.controls?.partner_cost?.errors?.pattern && isSubmitKartRequest">
                                            Please enter a valid Partner cost</div>
                                    </div>
                                </div>
                            </div>
                        </p-panel> -->
                        <br>
                            <div class="field-wrapper">
                                <label for="">Email Signature</label>
                                <div class="form-field">
                                    <quill-editor [styles]="{height: '250px'}" formControlName="proposal_email_signature"></quill-editor>
                                    <div class="error" *ngIf="kartRequest.controls?.proposal_email_signature?.errors?.required && isSubmitKartRequest"> Email Signature Required*</div>
                                </div>
                            </div>

                            <div class="form-actions">
                                <input class="button button-blue" type="button" value="Cancel" (click)="getLeadListDetails()">
                                <input  *ngIf="!actionLoader" class="button button-blue" type="submit" value="Save and Generate Proposal">
                                <span *ngIf="actionLoader == 'fillKart_loader'" class="btn btn-blue">
                                    <img src="/assets/images/loader.gif" style="width:30px;height:30px;" alt="LUMINOUS" />
                                </span>
                            </div>

                        </form>
                    </section>
                    <div class="form-actions">
                        <span *ngIf="actionLoader == 'fillKart_loader'">
                            <img src="/assets/images/loader.gif" style="margin-top:-700px;left: 50%;margin-left:-4em;font-size:40px" />
                        </span>
                    </div>
                </div>
                <!-- start survey-form -->
                <div class="survey-form audit-form" *ngIf="panelSteps == 1">
                    <p-panel  [toggleable]="true" [collapsed]="true">
                        <p-header class="ui-helper-clearfix">
                                <span class="ui-panel-title" >Customer Care Form:</span>
                        </p-header>
                        <div class="tab-content-detail">
                            <h3>Consumer Personal Information</h3>
                            <div class="field-wrapper">
                                <label for="">First Name *</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_firstname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Middle Name </label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_middlename}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Last Name *</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_lastname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 1.</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_address1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 2</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_address2}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Pincode</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_pincode}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">City</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_city}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">State</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_state}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Contact Number</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_mobileno}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Email ID</label>
                                <div class="form-field">
                                    <span>{{consumerprojectdata?.cceld_email}}</span>
                                </div>
                            </div>

                        </div>
                    </p-panel>
                    <p-panel [toggleable]="true" [collapsed]="true">
                        <p-header class="ui-helper-clearfix">
                                <span class="ui-panel-title" >Survey Form:</span>
                        </p-header>
                        <div class="tab-content-detail">
                            <div *ngIf="surveyorFormData?.building_type == 2">
                            <h3>Alternate Contact Person</h3>
                            <div class="field-wrapper">
                                <label for="">First name</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.cp_firstname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                    <label for="">Last name</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.cp_lastname}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                        <label for="">Mobile Number</label>
                                        <div class="form-field">
                                            <span>{{surveyorFormData?.cp_mobileno}}</span>
                                        </div>
                                    </div>
                                </div>
                            <h3>Electric Parameter</h3>

                            <div class="field-wrapper">
                                <label for="">Main Line Transformer Status (If installed by customer)</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_mainline_transformer_status]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Transformer Capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_transformer_capacity}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Transformer Connection type</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_transformer_connection_type}}</span>
                                </div>
                            </div> -->
                            <h3>Existing Power Back-Up Solutions</h3>
                            <!-- <div class="field-wrapper">
                                <label for="">DG Set capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_dgset_capacity}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">DG Set Connection type</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_dgset_connection_type}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">DG Brand</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_dg_brand}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Inverter capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_inverter_capacity}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Inverter Connection type</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_inverter_connection_type}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Inverter Brand</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_inverter_brand}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Inverter DC Voltage (DC operation Voltage</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_inverterdc_voltage}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Battery Brand</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_battery_brand}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Battery Capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_battery_capacity}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Battery Rating Factor</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_battery_rating_factor}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Battery Type</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_battery_type}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Battery Age</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_battery_age}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Availability of Grid (7 AM-6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_availability_of_grid1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Availability of Grid (6PM-7 AM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_availability_of_grid2}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Primary Source of Supply during day</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_primary_source_of_supply_during_day}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Primary Source of Supply during evening</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_primary_source_of_supply_during_evening}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Minimum Running Load in day time (7 AM-6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_min_running_loadin_daytime}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Load running after (6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_load_running_after6}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Critical Load on which back up is required</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_critical_load_onwhich_backup_isrequired}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Operation Hours of Critical Load (Back up Hours)

                                </label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_operation_hour_of_critical_load}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Secondary Source of supply if available</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_secondary_source_of_supply_if_available}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Termination DB/LT panel capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_termination_dblt_panel_capacity}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">No. of existing Earthing Pit</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_no_of_existing_earthin_pit}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Evacuation Voltage</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_evacuation_voltage}}</span>
                                </div>
                            </div>

                            <h3>
                                SPACE Availability
                            </h3>

                            <div class="field-wrapper">
                                <label for="">Type of Roof</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_type_of_roof}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Shadow Free Area Available</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_shadow_free_area}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Installation Location (Name of Building)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_installation_location}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Other Spaces Available for Installation</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_other_spaces_available_for_installation}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                <label for="">Number of floors in the building</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_no_of_floors_in_the_building}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Roof Accessibility</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_roof_accessibility}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Distance of Existing LT Panel / LT Board from Roof</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_distance_of_existing_lt_panelboard_from_roof}}</span>
                                </div>
                            </div> -->
                            <!-- <div class="field-wrapper">
                                <label for="">Any preference (Floor/Location) for inverter installation</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_preference_for_invertor_installation}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Chipping on roof allowance</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_chipping_on_roof_allowance}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Can the panels be mounted facing towards true south</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_can_the_panels_be_mounted_facing_towards_true_south}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">In case of non true south sites (mention the diflection / azimuth angle)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_incase_of_nontrue_southsites}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">In case of shed, is the drilling allowed on it</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_incase_of_shed_isdrill_allowed]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Is the shed facing towards true south</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_isthe_shed_facing_towards_true_south]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Details of Shed</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_details_of_shed}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Area of the place where PCU / Battery to be placed</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_area_of_the_place_where_pcu}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Ventilation Available in Battery/PCU Room</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_ventilation_available_in_batterypcu_room]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Distance from Roof to Inverter / Battery Room</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_distance_from_roof_to_inverter_battery_room}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Distance from Inverter / Battery Room to LT Board</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_distance_from_inverter_battery_room_to_lt_board}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Length of wire-run from each array to Inverter</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_length_of_wirerun_from_each_array_to_inverter}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Space Available for Secure Storage of Material</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_space_available_for_secure_storage_of_material]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Space available for earthing</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_space_available_for_earthing]}}</span>
                                </div>
                            </div>
                            <h3>Shadow Consideration</h3>
                            <!-- <div class="field-wrapper">
                                <label for="">Shading: describe type of shading here(Array 1:2: 3: 4:)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_shading}}</span>
                                </div>
                            </div> -->
                            <div class="field-wrapper">
                                <label for="">Height of the Parapet Wall</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_height_of_the_parapet_wall}}</span>
                                </div>
                            </div>


                            <div class="field-wrapper">
                                <label for="">Protruding Objects/Mumty in installation location(water tank, Dish,Antennae)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_protruding_objects_mumty_in_installation_location}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Details of High Altitude Trees/Buildings facing south</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_details_of_high_altitude_trees_buildings_facing_south}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Latitude, Longitude of site</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_latitude_longitude_of_site}}</span>
                                </div>
                            </div>

                        </div>
                    </p-panel>
                    <p-panel  [toggleable]="true">
                        <p-header class="ui-helper-clearfix">
                                <span class="ui-panel-title" >Feasibility Status:</span>
                        </p-header>
                        <br>
                        <div class="field-wrapper">
                            <label for="">Feasible Solution Type</label>
                            <div class="form-field">

                                <ng-container *ngIf="proposalEmailData?.proposalDetails && !(proposalEmailData?.proposalDetails?.proposal_code||proposalEmailData?.proposalDetails?.proposal_created_by||proposalEmailData?.proposalDetails?.proposal_created_on)">
                                <span>{{(surveyorFormData?.sf_feasible_solution_type)?solutionType[surveyorFormData?.sf_feasible_solution_type]:'Not
                                    Entered'}}</span>
                                </ng-container>

                                    <ng-container *ngIf="proposalEmailData?.proposalDetails && (proposalEmailData?.proposalDetails?.proposal_code||proposalEmailData?.proposalDetails?.proposal_created_by||proposalEmailData?.proposalDetails?.proposal_created_on)">
                                        <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type ==1">Grid-Tied</span>
                                        <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type ==2">Off-Grid</span>
                                        <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type ==3">Hybrid</span>
                                    </ng-container>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Ground Clearance of structure recommended by surveyor</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_ground_clearance_of_structure_recommended_by_surveyor}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Proposed DC Capacity</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_proposed_dc_capacity}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Proposed AC Capacity</label>
                            <div class="form-field">
                                <span>{{(surveyorFormData?.sf_proposed_ac_capacity)?surveyorFormData?.sf_proposed_ac_capacity:'Not
                                    Entered'}}</span>
                            </div>
                        </div>

                        <div class="field-wrapper">
                            <label for="">Feasible Solution Remarks:</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_feasiblity_remarks}}</span>
                            </div>
                        </div>

                    </p-panel>
                    <!-- <p-panel header="Load Survey Form:" [toggleable]="true">
                        <div class="table-wrapper full-wth">
                            <table cellpadding="0" cellspacing="0">
                                <tr>
                                    <th>Load Category</th>
                                    <th>Device Description</th>
                                    <th>Operating Source</th>
                                    <th>Operating Voltage</th>
                                    <th>Power Watts (B)</th>
                                    <th>Quantity Day Time (A)</th>
                                    <th>Back-up Hours of use During Day time (c)</th>
                                    <th>Quantity night time (E)</th>
                                    <th>Back-up Hours of use During night time (D)</th>
                                    <th>
                                        <span>= A * B * C</span>
                                        Watt hour energy day time</th>
                                    <th>
                                        <span>= E * B * D</span>
                                        Watt hour energy night time</th>

                                </tr>
                                <tr *ngFor="let hero of loadSurveyorFormData; let i = index;">
                                    <td>
                                        <strong>{{hero?.lsf_load_category}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_device_description}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{opSource[hero?.lsf_operating_source]}}</strong>
                                    </td>
                                    <td>
                                        <strong>220~240V</strong>

                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_power_watts}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_quantity_day_time}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_backup_hours_of_use_during_day_time}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_quantity_night_time}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_backup_hours_of_use_during_night_time}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_watt_hour_energy_day_time}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{hero?.lsf_watt_hour_energy_night_time}}</strong>
                                    </td>

                                </tr>


                            </table>
                        </div>
                    </p-panel> -->


                     <p-panel  [toggleable]="true" [collapsed]="true">
                        <p-header class="ui-helper-clearfix">
                                <span class="ui-panel-title" >Project History</span>
                        </p-header>
                        <div class="table-wrapper">
                            <table cellpadding="0" cellspacing="0">
                                <tr>
                                    <th>S.no.</th>
                                    <th>Role</th>
                                    <th>Name</th>
                                    <th>Checklist</th>
                                    <th>Completion</th>
                                    <th>Status</th>
                                    <th>Date & Time</th>
                                    <!-- <th></th> -->
                                </tr>
                                <ng-template ngFor let-projectData [ngForOf]="projectDetail" let-i="index">
                                    <tr *ngIf="projectData?.pstatus_lastmodifiedby">
                                <!-- <tr *ngFor="let projectData of projectDetail; let i = index;"> -->
                                    <td>
                                        <strong>{{ i+1 }}</strong>
                                    </td>
                                    <td>
                                        <strong>{{projectData?.role_name}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{projectData?.emp_firstname}} {{projectData?.emp_middlename}} {{projectData?.emp_lastname}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{projectData?.psm_status}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{yesNo[projectData?.pstatus_checkliststatus]}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{isSuccess[projectData?.pstatus_checkliststatus]}}</strong>
                                    </td>
                                    <td>
                                        <strong>{{projectData?.pstatus_lastmodifiedon}}</strong>
                                    </td>

                                </tr>
                            </ng-template>


                            </table>
                        </div>
                    </p-panel>
                </div>
                 <!--@description: to Show Existing Projects and leads of mobile
                    @developer: Roshan
                -->



                <div *ngIf="panelSteps == 1" style="margin-top: 8px;">
                    <div *ngIf="ongoingLead || coldLead || ongoingProject || rejectedProject" class="survey-form audit-form" >
                        <p-panel [toggleable]="true" [collapsed]="true">
                            <p-header class="ui-helper-clearfix">
                                    <span class="ui-panel-title" >Existing Leads</span>
                            </p-header>
                            <!--Existing projects Code-->
                            <div class="table-wrapper">
                                    <table  cellpadding="0" cellspacing="0">
                                            <thead>
                                                <tr>
                                                    <th>Lead Id</th>
                                                    <th>Project Id</th>
                                                    <th>Name</th>
                                                    <th>Address</th>
                                                    <th>Lead Status</th>
                                                    <th>Project Status</th>
                                                    <th>Lead Mobile</th>
                                                    <th>Alternate Mobile</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngIf="ongoingLead.length>0">
                                                <tr *ngFor="let ongLd of ongoingLead; let i = index">
                                                    <td>{{ongLd?.lead_id}}</td>
                                                    <td>N/A</td>
                                                    <td>{{ongLd?.consumer_full_name}}</td>
                                                    <td>{{(ongLd?.address.trim() !='')?ongLd?.address:'N/A'}}</td>
                                                    <td>Lead In Progress</td>
                                                    <td>N/A</td>
                                                    <td>{{ongLd?.lead_mobile}}</td>
                                                    <td>{{ongLd?.consumer_mobileno}}</td>
                                                </tr>
                                            </tbody>

                                            <tbody *ngIf="coldLead.length>0">
                                                <tr *ngFor="let coldLd of coldLead; let j = index">
                                                    <td>{{coldLd?.lead_id}}</td>
                                                    <td>N/A</td>
                                                    <td>{{coldLd?.consumer_full_name}}</td>
                                                    <td>{{(coldLd?.address.trim()!='')?coldLd?.address:'N/A'}}</td>
                                                    <td>Rejected Lead</td>
                                                    <td>N/A</td>
                                                    <td>{{coldLd?.lead_mobile}}</td>
                                                    <td>{{coldLd?.consumer_mobileno}}</td>
                                                </tr>
                                            </tbody>

                                            <tbody *ngIf="ongoingProject.length>0">
                                                <tr *ngFor="let ongPj of ongoingProject; let k = index">
                                                    <td>{{ongPj?.lead_id}}</td>
                                                    <td>{{ongPj?.project_code}}</td>
                                                    <td>{{(ongPj?.address.trim()!='')?ongPj?.address:'N/A'}}</td>
                                                    <td>{{ongPj?.address}}</td>
                                                    <td>N/A</td>
                                                    <td>Project In Progress</td>
                                                    <td>{{ongPj?.lead_mobile}}</td>
                                                    <td>{{ongPj?.consumer_mobileno}}</td>
                                                </tr>
                                            </tbody>

                                            <tbody *ngIf="rejectedProject.length>0">
                                                <tr *ngFor="let rejPj of rejectedProject; let l = index">
                                                    <td>{{rejPj?.lead_id}}</td>
                                                    <td>{{rejPj?.project_code}}</td>
                                                    <td>{{rejPj?.consumer_full_name}}</td>
                                                    <td>{{(ongPj?.address.trim()!='')?ongPj?.address:'N/A'}}</td>
                                                    <td>N/A</td>
                                                    <td>Project Rejected</td>
                                                    <td>{{rejPj?.lead_mobile}}</td>
                                                    <td>{{rejPj?.consumer_mobileno}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                            </div>
                        </p-panel>
                    </div>


                <!--project contact listing-->
                <div class="" style="margin: 10px 0">
                        <h2>Project Contacts</h2>
                        <div class="ct-form form-types formFull table-wrapper">
                            <table cellpadding="0" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Mobile</th>
                                        <th>Email</th>
                                        <th>Designation</th>
                                    </tr>
                                </thead>
                                <tbody>

                                  <tr *ngFor="let contact of contactsList">
                                    <td>{{contact.pc_fname}}</td>
                                    <td>{{contact.pc_lname}}</td>
                                    <td>{{contact.pc_mobile}}</td>
                                    <td style="text-transform: none">{{contact.pc_email}}</td>
                                    <td>{{contact.pc_designation}}</td>
                                  </tr>
                                </tbody>
                              </table>
                        </div>
                      </div>
                </div>

                <!-- end survey-form do task-->
            </div>
            <div class="survey-page-right" *ngIf="!isListing">
                <div class="dashboard-inner">
                    <h2>Project Checklists Details</h2>
                    <form *ngIf="!actionLoader" id="surveyor_checklist_submit" [formGroup]="checklistSubmitForm" (ngSubmit)="changeProjectStatus()">
                        <div class="col-md-6">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="ChecklistItems" formControlName="checklist_name" placeholder="Select Checklist" (selected)="checkIfRemarkable($event.value)"></ng-select>
                                </div>
                                <div class="error" *ngIf="checklistSubmitForm.controls?.checklist_name?.errors?.required && isSubmitChecklist">
                                    This Is Required
                                </div>
                                <div class="error" *ngIf="checklistSubmitForm.controls?.checklist_name.value &&checklistSubmitForm.controls?.checklist_name.value != 10 && is_email_sent == 0 && isSubmitChecklist">
                                    Please Fill All Details
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="isCloseReason">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="projectCloseReason" formControlName="project_close_reason" placeholder="Select Reason"></ng-select>
                                </div>
                                <div class="error" *ngIf="checklistSubmitForm.controls?.project_close_reason?.errors?.required && isSubmitChecklist">
                                    Select Reason to close
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!--<div class="form-field">
                                <h3>Checklist Status</h3>
                                <div class="field-addon">
                                    <span>
                                        <label for="">
                                            <input type="radio" value="0" name="checklist_status" formControlName="checklist_status"> No</label>
                                    </span>
                                    <span>
                                        <label for="">
                                            <input type="radio" value="1" name="checklist_status" formControlName="checklist_status"> Yes</label>
                                    </span>
                                </div>
                                <div class="error" *ngIf="checklistSubmitForm.controls?.checklist_status?.errors?.required && isSubmitChecklist">
                                    This Is Required
                                </div>
                            </div> -->
                            <div *ngIf="isRemarkable">
                                <textarea name="remarks" formControlName="remarks" placeholder="Enter Remarks.."></textarea>
                                <div class="error" *ngIf="checklistSubmitForm.controls?.remarks?.errors?.required && isSubmitChecklist">
                                    This Is Required
                                </div>
                            </div>
                        </div>
                        <div class="form-field" *ngIf="selectPartner">
                            <div class="field-addon">
                                <span class="field-icon"></span>
                                <ng-select [options]="partnerList" formControlName="partner_id" placeholder="Select Partner"></ng-select>
                            </div>
                            <div class="error" *ngIf="checklistSubmitForm.controls?.partner_id?.errors?.required && isSubmitChecklist">
                                This Is Required
                            </div>
                        </div>
<!--{{proposalEmailData.is_email_sent==0}}-->


                        <div class="actions text-center">
                            <input type="submit" class="btn btn-green btn-md" value="Submit">
                        </div>
                    </form>
                    <button class="btn btn-blue btn-md" *ngIf="proposalEmailData?.proposalDetails && (projectSolutionDesignerId == currentEmpId) && (proposalEmailData?.proposalDetails?.proposal_code||proposalEmailData?.proposalDetails?.proposal_created_on) " (click)="openEmailPreviewPopup();">Proposal Email Preview</button>

                    <div *ngIf="actionLoader=='checklist_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>
                </div>
                <div class="dashboard-inner" *ngIf="!isListing">
                    <form [formGroup]="uploadDocument" *ngIf="isEligibleForDocUpload && !actionLoader">
                        <h3>Upload Documents</h3>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <ng-select [options]="documentList" formControlName="documentListName" placeholder="Select Document">
                                    </ng-select>
                                    <div class="error" *ngIf="uploadDocument.controls?.documentListName?.errors?.required && isSubmittedDocument">Document is required.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="file" (change)="fileChange($event,currentProjectId)" name="file" formControlName="uploadDocumentFile" />
                                    <div class="error" *ngIf="uploadDocument.controls?.uploadDocumentFile?.errors?.required && isSubmittedDocument">Upload document is required.</div>
                                </div>
                            </div>
                        </div>
                    </form>
                     <!-- File dropalble directive by @ctrl/ngx-droppable@1.2.2  @developer: Roshan-->
                     <div droppable (filesDropped)="handleFilesDropped($event)" *ngIf="!isListing && isEligibleForDocUpload && !actionLoader" style="height:150px; width:100%; border:1px dotted grey">Or Drop File Here</div>
                     <!--Ends dropable-->

                    <div *ngIf="actionLoader=='upload_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>

                    <div class="margin-20" [innerHTML]="myHtml">
                    </div>



                    <h3>Uploaded Documents</h3>
                    <div *ngIf="actionLoader=='uploadedDocs_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>
                    <div *ngIf="!actionLoader">
                        <div class="checkoff">
                            <i class=""></i>
                            <div>
                                    <a href="{{baseurl}}/public/catalog/Solar by Luminous Catalogue.pdf" target="_blank">
                                        <img width="200px" src="/assets/images/pdf_image.png">
                                    </a>
                                    <input id="proposal_check" class="checkBoxInput" type="checkbox"  (change)="ProposalCatalogSelect($event,'catalog')" [checked]="(proposalEmailData?.proposalDetails?.proposal_catalog && proposalEmailData?.proposalDetails?.proposal_catalog=='1')?true:false">
                                    <label for="proposal_check"></label>
                                    <div>Catalogue</div>
                                </div>
                            </div>
                            <div class="checkoff">
                                <i class=""></i>
                                <div>
                                        <a href="{{baseurl}}/public/catalog/solarbyluminous™ - An Introduction.pdf" target="_blank">
                                            <img width="200px" src="/assets/images/pdf_image.png">
                                        </a>
                                        <input id="proposal_check_intro" class="checkBoxInput" type="checkbox" (change)="ProposalCatalogSelect($event,'intro')" [checked]="(proposalEmailData?.proposalDetails?.proposal_intro && proposalEmailData?.proposalDetails?.proposal_intro=='1')?true:false">
                                    <label for="proposal_check_intro"></label>
                                        <div>Introduction</div>
                                    </div>
                                </div>
                    <div *ngFor="let docs of projectDocuments" class="checkoff">
                        <i class="fa fa-remove confirmRemove" (click)="confirmDeleteDoc(docs)"></i>
                        <div *ngIf="['jpeg', 'jpg', 'png', 'JPEG', 'JPG', 'PNG'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                            <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                <img width="200px" src="{{baseurl}}{{docs.pdoc_filename}}">
                            </a>
                            <input id="{{docs.pdoc_filename}}" class="checkBoxInput" *ngIf="docs.pdoc_type == 'Proposal'" type="checkbox" (change)="ProposalDoumentSelect($event,docs.pdoc_id)" value="{{docs.pdoc_createdon}}" [checked]="docs.pdoc_attached_email=='0'?false:true">
                            <label for="{{docs.pdoc_filename}}"></label>
                            <div class="documentType">{{docs.pdoc_type =='Add more files' ? docs.pdoc_filename.split("/").pop(): docs.pdoc_type}} ({{docs.system_generated ==1 ? "System Generated" : "Uploaded" }})</div>

                        </div>
                        <div *ngIf="['pdf', 'PDF'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                            <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                <img width="200px" src="/assets/images/pdf_image.png">
                            </a>
                            <input id="{{docs.pdoc_filename}}" class="checkBoxInput" *ngIf="docs.pdoc_type == 'Proposal'" type="checkbox" (change)="ProposalDoumentSelect($event,docs.pdoc_id)" value="{{docs.pdoc_createdon}}" [checked]="docs.pdoc_attached_email=='0'?false:true">
                            <label for="{{docs.pdoc_filename}}"></label>
                            <div class="documentType">{{docs.pdoc_type =='Add more files' ? docs.pdoc_filename.split("/").pop() : docs.pdoc_type}}  ({{docs.system_generated ==1 ? "System Generated" : "Uploaded" }})</div>
                        </div>
                        <div *ngIf="['doc', 'docx', 'DOC', 'DOCX'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                            <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                <img width="200px" src="/assets/images/docx.png">
                            </a>
                            <input id="{{docs.pdoc_filename}}" class="checkBoxInput" *ngIf="docs.pdoc_type == 'Proposal'" type="checkbox" (change)="ProposalDoumentSelect($event,docs.pdoc_id)" value="{{docs.pdoc_createdon}}" [checked]="docs.pdoc_attached_email=='0'?false:true">
                            <label for="{{docs.pdoc_filename}}"></label>
                            <div class="documentType">{{docs.pdoc_type =='Add more files' ? docs.pdoc_filename.split("/").pop() : docs.pdoc_type}}   ({{docs.system_generated ==1 ? "System Generated" : "Uploaded" }})</div>

                        </div>
                        <div *ngIf="['xls', 'xlsx', 'csv', 'XLS', 'XLSX', 'CSV'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                            <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                <img width="200px" src="/assets/images/xls.png">
                            </a>
                            <input id="{{docs.pdoc_filename}}" class="checkBoxInput" *ngIf="docs.pdoc_type == 'Proposal'" type="checkbox" (change)="ProposalDoumentSelect($event,docs.pdoc_id)" value="{{docs.pdoc_createdon}}" [checked]="docs.pdoc_attached_email=='0'?false:true">
                            <label for="{{docs.pdoc_filename}}"></label>
                            <div class="documentType">{{docs.pdoc_type =='Add more files' ? docs.pdoc_filename.split("/").pop() : docs.pdoc_type}}   ({{docs.system_generated ==1 ? "System Generated" : "Uploaded" }})</div>
                        </div>
                    </div>
                    </div>
                </div>

        </div>
    </div>
</div>

<div class="container" *ngIf="isListing=='payment-release'">
        <h2>Payment Request Initiation List</h2>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>
                            S.No.
                        </th>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Partner ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project Type
                        </th>
                        <th>
                            Payment Type
                        </th>
                        <th>
                            Payment Cycle
                        </th>
                        <th>
                            Amount Received
                        </th>
                        <th>
                            Release Amount
                        </th>
                        <th>
                            Transaction ID
                        </th>
                        <th>
                            Payment Date
                        </th>
                        <th>
                            Payment Release Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor='let payment of paymentList; let i = index'>
                        <td>{{i+1}}</td>
                        <td>{{payment.consumer_id}}</td>
                        <td>{{payment.project_code}}</td>
                        <td>{{payment.project_partner}}</td>
                        <td>{{payment.lead_fname}}</td>
                        <td>{{payment.cceld_ongridoffgrid}}</td>
                        <td>{{payment.payment_category}}</td>
                        <td>{{payment.payment_cycle}}</td>
                        <td>{{payment.amount}}</td>
                        <td>{{payment.release_amount}}</td>
                        <td>{{payment.pay_gat_transaction_id}}</td>
                        <td>{{payment.created}}</td>
                        <td>{{payment.payment_release_status}}</td>
                        <td>
                            <a *ngIf="!payment.payment_release_status" (click)='getReleaseForm(payment)'>Request Release</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
</div>

<div class="box schedule-call-back" *ngIf='isListing=="payment-release" && isReleaseForm'>
    <h2 class="box-title">Please enter the amount to be released - SSP</h2>
    <section class="box-content">

        <form id="release-payment" [formGroup]="releasePaymentAmount" (ngSubmit)="releasePayment()">
            <div class="field-wrapper">
                <label for="">Partner ID:</label>
                <div class="form-field">
                    <input type="text" formControlName="partner_id" placeholder="" [readonly]="true">
                </div>
            </div>
            <div class="field-wrapper">
                <label for="">Enter release Amount</label>
                <div class="form-field">
                    <input type="text" formControlName="release_payment_amount" placeholder="Release Payment">
                    <div class="error" *ngIf="releasePaymentAmount.controls.release_payment_amount?.errors?.required && isFormSubmitted">Please enter release amount.</div>
                    <div class="error" *ngIf="releasePaymentAmount.controls.release_payment_amount?.errors?.greaterThan && isFormSubmitted">Release amount should be less than amount given by consumer.</div>
                </div>
            </div>
            <div class="form-actions">
               <input class="button button-grey" type="button" value="Cancel" (click)="cancelReleasePayment()">
                <input class="button button-blue" type="submit" value="Submit">
            </div>
        </form>
    </section>
</div>

<div class="sendBox" [ngClass]="{hideAside:openEmailPreviewBox,showAside:!openEmailPreviewBox}" *ngIf="proposalEmailData">
    <div class="box-wrapper">
        <div class="tableBoxx">
                <div class="cellBoxx">
                    <div class="sendWrapper">
                        <div>
                            <h4>Proposal Email Preview</h4>
                            <div class="mail-wraper">
                                <div class="field-wrapper">
                                    Dear  {{proposalEmailData?.cceld_firstname | titlecase }} {{proposalEmailData?.cceld_lastname | titlecase}},<br/><br/> Thank you for showing interest in Solar Power Solutions from Luminous.
                                    Based on your inputs and discussion with solarbyluminous™ team, we have computed the best solar solution
                                    for you.<br/><br />
                                    We recommend a {{proposalEmailData?.proposalDetails?.proposal_dc_capacity / 1000 }} kWp {{solutionTypeText}}
                                    rooftop.
                                    solar PV power plant with {{proposalEmailData?.proposalDetails?.proposal_number_of_solar_panel}} panels of {{proposalEmailData?.proposalDetails?.proposal_module_capacity}} Wp {{panelTypeText}} PV modules.
                                    The pricing and payment details are as below.
                                </div>
                                <div class="field-wrapper">
                                    <table style='border-collapse:collapse' class="proposal-email-table" width='100%'>
                                        <tr>
                                            <th  class="bg_black" style="width: 68px;">S. No.</th>
                                            <th  class="bg_black border_left_white text-left" >Component</th>
                                            <th  *ngIf="selectePricingOption!=2" class="bg_blue"><span *ngIf="off_grid">Gold Package</span><span *ngIf="!off_grid">Description</span></th>
                                            <th *ngIf="selectePricingOption!=1" class="bg_blue border_left_white">Silver Package</th>
                                        <tr>
                                            <td class='table-border bg_gery text-center'>1.</td>
                                            <td class='table-border bg_gery'>Solar PV Panel</td>
                                            <td class='table-border bg_light_blue ' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_solar_pv_panels_gold}}</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_solar_pv_panels_silver}}</td>
                                        </tr>
                                        <tr>
                                            <td class='table-border bg_gery text-center'>2.</td>
                                            <td class='table-border bg_gery'>Structure</td>
                                            <td class='table-border' colspan="2">{{proposalEmailData?.proposalDetails?.proposal_structure_type}}</td>
                                        </tr>
                                        <tr>
                                            <td class='table-border bg_gery text-center'>3.</td>
                                            <td class='table-border bg_gery'>Solar Inverter</td>
                                            <td class='table-border' colspan="2"> Luminous
                                                <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type == 1">{{ onGridInverterEmailValue }}</span>
                                                <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type == 2">{{ offGridInverterEmailValue }}</span>
                                                <span *ngIf="proposalEmailData?.proposalDetails?.proposal_solution_type == 3">{{ hybridInverterEmailValue }}</span>
                                            </td>
                                        </tr>
                                        <tr *ngIf="!off_grid">
                                                <td class='table-border bg_gery text-center'>4.</td>
                                                <td class='table-border bg_gery'>Solar Battery</td>
                                                <td class='table-border' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_solar_battery}}</td>
                                            </tr>
                                        <tr>
                                            <td class='table-border bg_gery text-center'><span *ngIf="off_grid">4.</span><span *ngIf="!off_grid">5.</span></td>
                                            <td class='table-border bg_gery'>Earthing & PV Protection system</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_earthing_pv_protection_system_gold}}</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_earthing_pv_protection_system_silver}}</td>
                                        </tr>
                                        <tr *ngIf="off_grid">
                                            <td class='table-border bg_gery text-center'><span *ngIf="off_grid">5.</span></td>
                                            <td class='table-border bg_gery'>Remote Monitoring System</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_remote_monitoring_system_gold}}</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_remote_monitoring_system_silver}}</td>
                                        </tr>
                                       <ng-container *ngIf="!displayEquip">
                                        <tr>
                                            <td class='table-border bg_gery text-center'>6.</td>
                                            <td class='table-border bg_gery'>Maintenance</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_maintenance_gold}}</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_maintenance_silver}}</td>
                                        </tr>
                                        </ng-container>
                                        <!-- <ng-container >
                                        <tr >
                                            <td class='table-border bg_gery text-center'>6.</td>
                                            <td class='table-border bg_gery'>Maintenance</td>
                                            <td class='table-border bg_light_blue'>{{proposalEmailData?.proposalDetails?.amc_maintanace}}</td>
                                        </tr>
                                        </ng-container> -->

                                        <ng-container  *ngIf="!displayEquip">
                                            <tr>
                                                <td class='table-border bg_gery text-center'>7.</td>
                                                <td class='table-border bg_gery'>Insurance</td>
                                                <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_insurance_gold}}</td>
                                                <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_insurance_silver}}</td>
                                            </tr>
                                            </ng-container>

                                         <ng-container *ngIf="displayEquip && off_grid">
                                        <tr>
                                            <td class='table-border bg_gery text-center'>7.</td>
                                            <td class='table-border bg_gery'>Insurance</td>
                                            <!-- <td class='table-border bg_light_blue'>{{SolarPlantInsurance}}</td> -->
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=2" >{{proposalEmailData?.proposalDetails?.proposal_insurance_gold}}</td>
                                            <td class='table-border bg_light_blue' *ngIf="selectePricingOption!=1" >{{proposalEmailData?.proposalDetails?.proposal_insurance_silver}}</td>



                                        </tr>
                                        </ng-container>

                                        <tr>
                                            <td class='table-border bg_gery text-center'>8.</td>
                                            <td class='table-border bg_gery'>Service Support</td>
                                            <td class='table-border' colspan="2">{{proposalEmailData?.proposalDetails?.proposal_service_support}}</td>
                                        </tr>
                                        <tr>
                                            <td class='table-border bg_gery text-center'>9.</td>
                                            <td class='table-border bg_gery'>AMC</td>
                                            <td class='table-border' colspan="2">{{proposalEmailData?.proposalDetails?.proposal_amc}}</td>
                                        </tr>
                                        <tr>
                                            <th class='table-border text-center bg_blue' colspan="4">Solution Pricing</th>
                                        </tr>
                                        <tr>
                                            <td class='table-border bg_gery text-center' colspan="2" style="width: 342px;">Total System Price <!-- (G - S) --></td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.proposal_project_value_gold | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.proposal_project_value_silver | indianCurrency}}</td>
                                        </tr>

                                        <tr *ngIf="proposalEmailData?.proposalDetails?.is_discount == 1">
                                            <td class='table-border bg_gery text-center' colspan="2" style="width: 342px;">Special
                                                <ng-container *ngIf="proposalEmailData?.cceld_buildingtype=='commercial'">
                                                    Discount
                                                    </ng-container>
                                                    <ng-container *ngIf="proposalEmailData?.cceld_buildingtype=='residential'">
                                                        Subsidy
                                                    </ng-container> Offered <!-- (G - S) --></td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.discount | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.discount_silver | indianCurrency}}</td>

                                        </tr>
                                        <tr *ngIf="(proposalEmailData?.cceld_buildingtype == 2 || proposalEmailData?.cceld_buildingtype == 'commercial')">
                                            <td class='table-border bg_gery text-center' colspan="2" style="width: 342px;">Basic System Price (excl. GST) <!-- (G - S) --></td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" >{{(proposalEmailData?.proposalDetails?.proposal_project_value_gold - proposalEmailData?.proposalDetails?.discount)/1.138 | currency:"₹":2 }}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" > {{(proposalEmailData?.proposalDetails?.proposal_project_value_silver - proposalEmailData?.proposalDetails?.discount_silver)/1.138  | currency:"₹":2}}</td>
                                        </tr>
                                        <tr *ngIf="(proposalEmailData?.cceld_buildingtype == 2 || proposalEmailData?.cceld_buildingtype == 'commercial')">
                                            <td class='table-border bg_gery text-center' colspan="2" style="width: 342px;">GST(13.8%) <!-- (G - S) --></td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" > {{(proposalEmailData?.proposalDetails?.proposal_project_value_gold - (proposalEmailData?.proposalDetails?.proposal_project_value_gold - proposalEmailData?.proposalDetails?.discount)/1.138) | currency:"₹":2 }}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" > {{(proposalEmailData?.proposalDetails?.proposal_project_value_silver - (proposalEmailData?.proposalDetails?.proposal_project_value_silver - proposalEmailData?.proposalDetails?.discount_silver)/1.138 ) | currency:"₹":2 }}</td>
                                        </tr>
                                        <tr *ngIf="proposalEmailData?.proposalDetails?.is_discount == 1 || proposalEmailData?.cceld_buildingtype == 2 || proposalEmailData?.cceld_buildingtype == 'commercial'">
                                            <td class='table-border bg_gery text-center' colspan="2" style="width: 342px;">Effective System Price <!-- (G - S) --></td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{(proposalEmailData?.proposalDetails?.proposal_project_value_gold - proposalEmailData?.proposalDetails?.discount) | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{(proposalEmailData?.proposalDetails?.proposal_project_value_silver - proposalEmailData?.proposalDetails?.discount_silver) | indianCurrency}}</td>
                                        </tr>
                                        <tr class="bg_yellow">
                                            <td class='table-border text-center' colspan="2">Advance Amount
                                                <!-- (G-{{proposalEmailData?.proposal_advanced}}%) (S-{{proposalEmailData?.proposal_advance_silver}}%) -->
                                            </td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{ previewProposalAdvanced | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{ previewProposalAdvanceSilver| indianCurrency}}</td>
                                        </tr>
                                        <tr class="bg_yellow" >
                                            <td colspan=2 class='table-border text-center'>2nd Tranche Amount
                                                <!-- (G-{{proposalEmailData?.proposal_payment_2}}%) (S-{{proposalEmailData?.proposal_advance_silver_1}}%) -->
                                            </td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{ previewProposalPayment2 | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{ previewProposalAdvanceSilver1| indianCurrency}}</td>
                                        </tr>
                                        <tr class="bg_yellow">
                                            <td colspan=2 class='table-border text-center'><span *ngIf="proposalEmailData?.proposalDetails?.payment_split == 4">3rd</span>
                                                <span *ngIf="proposalEmailData?.payment_split != 4">Final</span>
                                                 Tranche Amount
                                                <!-- (G-{{proposalEmailData?.proposal_payment_3}}%) (S-{{proposalEmailData?.proposal_advance_silver_2}}%) -->
                                            </td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{previewProposalPayment3 | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{ previewProposalAdvanceSilver2 | indianCurrency}}</td>
                                        </tr>
                                            <tr *ngIf="proposalEmailData?.proposalDetails?.payment_split == 4" class="bg_yellow">
                                                <td colspan=2 class='table-border text-center'>Final Tranche Amount
                                                    <!-- (G-{{proposalEmailData?.proposal_payment_3}}%) (S-{{proposalEmailData?.proposal_advance_silver_2}}%) -->
                                                </td>
                                                <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{ previewProposalPayment4 | indianCurrency}}</td>
                                                <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{ previewProposalAdvanceSilver3 | indianCurrency}}</td>
                                            </tr>
                                        <tr  *ngIf="proposalEmailData?.proposalDetails?.proposal_emi_option==1">
                                            <td class='table-border text-center bg_blue' style="color:#ffffff;" colspan="4">Easy EMIs</td>
                                        </tr>
                                        <tr *ngIf="proposalEmailData?.proposalDetails?.proposal_emi_option==1" class="bg_yellow">
                                            <td class='table-border text-center' colspan="2">EMI(Rs.)</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=2" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.proposal_emi_gold | indianCurrency}}</td>
                                            <td class='table-border text-center' *ngIf="selectePricingOption!=1" ><i class="fa fa-inr"></i> {{proposalEmailData?.proposalDetails?.proposal_emi_silver | indianCurrency}}</td>
                                        </tr>
                                        <tr *ngIf="off_grid">
                                            <th class='table-border text-center bg_blue' colspan="4">Savings</th>
                                        </tr>
                                        <tr class="bg_green text-center"  *ngIf=" off_grid && proposalEmailData?.proposalDetails?.proposal_lifetime_savings!='0' && !proposal_lifetime_saving">

                                            <td class='table-border' colspan="2">Expected Lifetime Savings</td>
                                            <td class='table-border' colspan="2"><i class="fa fa-inr"></i>
                                                {{ (proposalEmailData?.proposalDetails?.proposal_lifetime_savings > 0 ? proposalEmailData?.proposalDetails?.proposal_lifetime_savings : 0 )| indianCurrency}} Lakhs ({{proposalEmailData?.proposalDetails?.proposal_global_solr_irr}}KWh/yr/KWp,@{{proposalEmailData?.proposalDetails?.proposal_electricity_terrif}}/KWh)</td>
                                        </tr>

                                        <tr class="bg_green text-center"  *ngIf=" off_grid && proposalEmailData?.proposalDetails?.proposal_lifetime_savings =='0' && proposal_lifetime_saving">

                                            <td class='table-border' colspan="2">Expected Lifetime Savings</td>
                                            <td class='table-border' colspan="2"><i class="fa fa-inr"></i>
                                                {{ (proposalEmailData?.proposalDetails?.proposal_lifetime_savings_opex > 0 ? proposalEmailData?.proposalDetails?.proposal_lifetime_savings_opex : 0 )| indianCurrency}} Lakhs ({{proposalEmailData?.proposalDetails?.proposal_global_solr_irr}}KWh/yr/KWp,@{{proposalEmailData?.proposalDetails?.proposal_electricity_terrif}}/KWh)</td>
                                        </tr>

                                            <tr class="bg_green text-center"  *ngIf=" off_grid  && proposalEmailData?.proposalDetails?.proposal_lifetime_savings && proposalEmailData?.proposalDetails?.proposal_lifetime_savings!='0' && proposal_lifetime_saving">

                                            <td class='table-border' colspan="2">Expected Lifetime Savings From Capex</td>
                                            <td class='table-border' colspan="2"><i class="fa fa-inr"></i> {{ (proposalEmailData?.proposalDetails?.proposal_lifetime_savings > 0 ? proposalEmailData?.proposalDetails?.proposal_lifetime_savings : 0 )| indianCurrency}} Lakhs ({{proposalEmailData?.proposalDetails?.proposal_global_solr_irr}}KWh/yr/KWp,@{{proposalEmailData?.proposalDetails?.proposal_electricity_terrif}}/KWh)</td>

                                        </tr>
                                        <tr class="bg_green text-center" *ngIf=" off_grid  && proposalEmailData?.proposalDetails?.proposal_lifetime_savings && proposalEmailData?.proposalDetails?.proposal_lifetime_savings!='0' && proposal_lifetime_saving">
                                            <td class='table-border' colspan="2">Expected Lifetime Savings From Opex</td>
                                            <td class='table-border' colspan="2"><i class="fa fa-inr"></i> {{ (proposalEmailData?.proposalDetails?.proposal_lifetime_savings_opex > 0 ? proposalEmailData?.proposalDetails?.proposal_lifetime_savings_opex : 0 )| indianCurrency}} Lakhs ({{proposalEmailData?.proposalDetails?.proposal_global_solr_irr}}KWh/yr/KWp, @PPA tariff{{ (proposalEmailData?.proposalDetails?.ppa_tarif|indianCurrency)}}/KWh ,{{+' '+proposalEmailData?.proposalDetails?.ppa_tenure}} years PPA tenure )</td>
                                        </tr>

                                    </table>
                                </div>
                                <div class="sendbox-wrapper" [innerHTML]="proposal_addition_email_text" ></div>
                                <div class="sendbox-wrapper" *ngIf="proposal_advanced && proposal_advance_silver ;else elseBlock">
                                <strong>Go ahead and book your solar solution now by paying {{proposal_advanced}}% advance.</strong>
                                </div>

                                <ng-template #elseBlock>
                                    <div class="sendbox-wrapper">
                                    <strong >Go ahead and book your solar solution now by paying
                                     <ng-container *ngIf='proposal_advanced'>{{proposal_advanced}}</ng-container>
                                    <ng-container *ngIf='proposal_advance_silver'>{{proposal_advance_silver}}</ng-container>
                                    % advance.
                                    </strong>
                                    </div>
                                    </ng-template>

                                <div class="sendbox-wrapper text-blue">
                                    <strong>Account details for direct payment transfer through NEFT/RTGS/IMPS</strong>
                                </div>
                                <div class="sendbox-wrapper text-blue">

                                        Account Name         :      Luminous Power Technologies Pvt. Ltd.<br/>
                                        Account no.          :      50200028679955<br/>
                                        IFSC Code            :      HDFC0001721<br/>
                                        Bank Name            :      HDFC Bank<br/>
                                        Bank Branch          :      MG Road, Gurugram, Haryana<br/>
                                </div>
                                <div class="sendbox-wrapper">
                                        Hope our proposal is in line with your expectations. In case you have a query, please do get in touch with your relationship manager or write to us at solar@luminousindia.com .<br/><br/>
                                            <br/>Regards
                                            <div class="email_signature" [innerHTML]="proposalEmailData?.proposalDetails?.proposal_email_signature"></div>

                                </div>
                                <img src="/assets/images/EmailClosure.jpg" style="    width: auto; height: auto; margin-bottom: 40px; margin-left: 10px;" alt="LUMINOUS Email Closure" />
                            </div>
                            <div class="sendbox-wrapper" style="text-align: right; margin-right: 30px; margin-top:10px;">
                                <a *ngIf="!actionLoader" href="javascript:void(0)" class="btn btn-blue" style="padding: 10px 15px; border-radius: 0px;" (click)="SendEmail()">Send Email</a>
                                <span *ngIf="actionLoader == 'fillKart_loader'" class="btn btn-blue"  style="padding: 10px 15px; border-radius: 0px;">
                                    <img src="/assets/images/loader.gif" style="width:30px;height:30px;" alt="LUMINOUS" />
                                </span>
                                <a href="javascript:void(0)" class="btn btn-blue" style="padding: 10px 15px; border-radius: 0px;" (click)="openEmailPreviewBox=!openEmailPreviewBox">Close</a>
                            </div>
                        </div>
                        <div class="error"></div>
                        <a href="javascript:void(0)" class="menu example5" (click)="openEmailPreviewBox=!openEmailPreviewBox">
                            <span>x</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isLoginEmp == true" style="margin: 30px; padding: 30px; background-color: #fff; font-size: 32px; text-align: center;">
    <p>Unauthorised Access. Please login to access.</p>
</div>

<div class="loader-wrapper" [style.display]="!userData ? 'block' : 'none'">
    <div class="loader"></div>
</div>

<div class="loader-wrapper" *ngIf="ConfirmDeleting">
        <div class="sendWrapper wraperDelete">
                <h3 class="padding">Are you sure you want to delete selected document</h3>
                <div class="alignRight">
                        <input type="Delete" class="button button-blue button-norm" (click)="DeleteDocument(pdoc_data)" value="Delete">
                        <input type="close" class="button button-grey button-norm" (click)="hideConfirmDeleting()"  value="Close" >
                </div>

        </div>

    </div>
<style>
        img{
            width:100%;
        }
    .wraperDelete{
        width: 400px;
        margin: 200px 500px;
        padding: 20px;
    }
    .padding {
        padding:20px 10px;
    }
    .button-norm {
        width:100px;
        margin: 0px 15px 0px 0px;
        height: 40px;
        border-radius: 0px !important;
    }
    .alignRight{
        text-align: right;
        margin-top: 50px;
    }

        .checkoff {
        padding: 25px 0px;
        position:relative;
        }
        /*.checkoff>.fa-remove{
        opacity:0;
        }*/

        .checkoff:hover img {
        opacity: 0.3;
        }

        .checkoff:hover i {
        opacity: 1;
        }
        .documentType {
            color:black;
            text-align: justify;
            /* position: absolute;
            bottom: 6px;
            right: 0px; */
        }

        .fa-remove {
            font-size:24px;
            float:right;
            color:red;
        }
        .confirmRemove {
            position: relative;
            z-index: 20;
            cursor: grabbing;
            top: 30px;
            right: 0px;
            margin: 10px;
        }
</style>
