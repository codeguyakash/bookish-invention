
<style>
    img {
        width: 100%;
    }

    .viewintraction{
    width: 713px;
     margin: 137px 310px;
     padding: 20px;
     background: #fff;
  }


    .wraperDelete {
        width: 400px;
        margin: 200px 500px;
        padding: 20px;
        background: #fff;
    }

    .padding {
        padding: 20px 10px;
    }

    .button-norm {
        width: 100px;
        margin: 0px 15px 0px 0px;
        height: 40px;
        border-radius: 0px !important;
    }

    .alignRight {
        text-align: right;
        margin-top: 50px;
    }

    .checkoff {
        padding: 25px 0px;
        position: relative;
    }

    /*.checkoff>.fa-remove{
    opacity:0;
    }*/

    .checkoff:hover img {
        opacity: 0.3;
    }

    .checkoff:hover i {
        opacity: 1;
    }

    .documentType {
        color: black;
        position: absolute;
        bottom: 6px;
        right: 0px;
    }

    .fa-remove {
        font-size: 24px;
        float: right;
        color: red;
    }

    .confirmRemove {
        position: relative;
        z-index: 20;
        cursor: grabbing;
        right: 0px;
        /* top: 30px;
        margin: 10px; */
    }

  .viwintrbtn{
     margin-left: 597px;
  }
  .btncls{
    background-color: transparent;
    color: #5d5d5d !important;
    border: 2px solid #5d5d5d;
    text-transform: capitalize;
    font-weight: 600;
  }

  .call-history{
    width: 684px;
    height: 200px;
    overflow: scroll;
   }

</style>

<div class="main-container" [ngClass]="{'cc-container': isListing}">
    <aside class="sidebar">
        <div class="employee-info">
            <div class="pic">
                <i class="fa fa-user-circle" aria-hidden="true"></i>
            </div>
            <div class="detail">
                <span>Site Surveyor</span>
            </div>
        </div>

        <nav class="sidebar-tabs">
            <a (click)="getTodaysServeyList()" [ngClass]="{'active':(isListing == 'today_survey')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Today's Survey</span>
            </a>
        </nav>
        <!-- <nav class="sidebar-tabs" *ngIf="userData.emp_external != 1">
            <a (click)="searchProjects()"  [ngClass]="{'active':(isListing == 'project-search')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>SEARCH IN PROJECTS</span>
            </a>
        </nav> -->
        <nav class="sidebar-tabs">
            <a (click)="getLeadListDetails('surveyor_action_listing')"
                [ngClass]="{'active':(isListing == 'surveyor_action_listing')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Show Lead Listing(Actionable)</span>
            </a>
        </nav>
        <nav class="sidebar-tabs">
            <a (click)="getLeadListDetails('surveyor_nonaction_listing')"
                [ngClass]="{'active':(isListing == 'surveyor_nonaction_listing')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Show Lead Listing(Non-Actionable)</span>
            </a>
        </nav>
        <nav class="sidebar-tabs">
            <a (click)="getPojectListDetails(1)" [ngClass]="{'active':(isListing == 'project_status_listing')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Project Status</span>
            </a>
        </nav>
        <nav class="sidebar-tabs">
            <a (click)="getClarificationListDetails(1)" [ngClass]="{'active':(isListing == 'clarification_listing')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Clarification</span>
            </a>
        </nav>
        <nav class="sidebar-tabs" *ngIf="userData.emp_external != 1">
            <a (click)="searchLeads()" [ngClass]="{'active':(isListing == 'lead-search')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Search In All Leads</span>
            </a>
        </nav>
        <nav class="sidebar-tabs" *ngIf="userData.emp_external != 1">
            <a (click)="advanceReceived()" [ngClass]="{'active':(isListing == 'advance-received')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Pending Hand Over</span>
            </a>
        </nav>
        <nav class="sidebar-tabs" *ngIf="userData.emp_external != 1">
            <a (click)="addLead()" [ngClass]="{'active':(isListing == 'add-lead')}">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <span>Add lead</span>
            </a>
        </nav>
    </aside>
    <style>
        .highlight-row{
            font-weight: bold;
            color: green;
        }
    </style>
    <smart-search (SearchResults)="smartSearchResults($event)" *ngIf="showSmartSearchComponent"></smart-search>
    <div class="container" *ngIf="isListing == 'surveyor_action_listing'">
        <h2>Site Surveyor List</h2>
        <!--<br> <h2>Actionable</h2> -->
        <div class="table-wrapper" *ngIf="actionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Scheduled Date
                        </th>
                        <th>
                            Time
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Lead Source
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of actionableList; let i = index" class="highlight-row">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_scheduledate}}</td>
                        <td>{{times[data?.cceld_scheduletime]}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <td>{{data?.source_master_name}}</td>
                        <td>
                            <a class="gbgBtn"
                                (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="loader">
            <img src="/assets/images/loader.gif" style="width:30px;height:30px;display: block;margin: 0 auto;" alt="LUMINOUS" />
        </div>
        <div class="no-data" *ngIf="record">
            No Actionable Listing
        </div>
    </div>
    <div class="container" *ngIf="isListing == 'surveyor_nonaction_listing'">
        <h2>Site Surveyor List</h2>
        <!-- <h2>Non-Actionable</h2> -->
        <div class="table-wrapper" *ngIf="nonActionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Date
                        </th>
                        <th>
                            Time
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of nonActionableList; let i = index">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_scheduledate}}</td>
                        <td>{{times[data?.cceld_scheduletime]}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
                        <td>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="loader">
            <img src="/assets/images/loader.gif" style="width:30px;height:30px;display: block;margin: 0 auto;" alt="LUMINOUS" />
        </div>
        <div class="no-data" *ngIf="record">
            No Non-Actionable Listing
        </div>
    </div>

    <div class="container" *ngIf="isListing == 'project-search'">
        <h2>Search In Projects</h2><br>
        <div class="dashboard-inner">
            <form [formGroup]="searchForm" (ngSubmit)="submitSearch()">
                <div class="field-wrapper">
                    <label for="">Search Type</label>
                    <div class="form-field">
                        <select formControlName="qType" [(ngModel)]="queryType">
                            <option value="">Select</option>
                            <option value="cceld_firstname">First Name</option>
                            <option value="cceld_middlename">Middle Name</option>
                            <option value="cceld_lastname">Last Name</option>
                            <option value="cceld_mobileno">Phone</option>
                            <option value="project_code">Project Id</option>
                            <option value="project_status">Status</option>
                        </select>
                    </div>
                </div>
                <div class="field-wrapper" *ngIf="queryType != 'project_status'">
                    <label for="">Search String</label>
                    <div class="form-field">
                        <input type="text" formControlName="q" placeholder="Please enter search string">
                        <div class="error" *ngIf="searchForm.controls?.q?.errors?.required && isSearchFormSubmitted">
                            Please enter search string</div>
                        <div class="error" *ngIf="searchForm.controls?.q?.errors?.pattern && isSearchFormSubmitted">
                            Special character not allowed</div>
                    </div>
                </div>

                <div class="field-wrapper" *ngIf="queryType == 'project_status'">
                    <label for="">Select Project Status*</label>
                    <div class="form-field select-bg">
                        <ng-select [options]="projectStatusList" formControlName="project_status"
                            placeholder="Select Project Status"></ng-select>
                        <div class="error" *ngIf="searchForm.controls?.project_status?.errors">Please select project
                            status</div>
                    </div>
                </div>
                <div class="field-wrapper serchFild">
                    <div class="form-field">
                        <button type="submit" class="btn nbtn btn-blue btn-md ">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <div *ngIf="actionableList.length>0 || nonActionableList.length>0" align="right">
            <a href="{{downloadFileName}}" class="downLoad" target="_blank">Download</a>
        </div>
        <h2>Search Results</h2>
        <br>
        <h2>Actionable</h2>
        <div class="table-wrapper" *ngIf="actionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Date
                        </th>
                        <th>
                            Time
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                        <th>
                            Details
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of actionableList; let i = index" class="highlight-row">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_scheduledate}}</td>
                        <td>{{times[data?.cceld_scheduletime]}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>

                        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->

                        <td>
                            <a class="gbgBtn"
                                (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open2</a>
                        </td>
                        <td>
                            <a (click)="getProjectStatusDataDetailed(data?.project_id)">Details</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="actionableList.length<=0">
            No Actionable Projects
        </div>
        <br>
        <h2>Non-Actionable</h2>
        <div class="table-wrapper" *ngIf="nonActionableList.length>0">
            <table>
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Date
                        </th>
                        <th>
                            Time
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                        <th>
                            Details
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of nonActionableList; let i = index">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_scheduledate}}</td>
                        <td>{{times[data?.cceld_scheduletime]}}</td>
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
                        <td>

                        </td>
                        <td>
                            <a (click)="getProjectStatusDataDetailed(data?.project_id)">Details</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="nonActionableList.length<=0">
            No Non-Actionable Projects
        </div>
    </div>


    <div class="container" *ngIf="isListing == 'lead-search'">
        <h2>Search In Leads</h2><br>
        <div>
            <form [formGroup]="searchLeadForm" (ngSubmit)="submitLeadSearch()">
                <div class="field-wrapper">
                    <label for="">Search Type</label>
                    <div class="form-field">
                        <select formControlName="qType">
                            <option value="">Select</option>
                            <option value="lead_id">Lead Id</option>
                            <option value="lead_fname">First Name</option>
                            <option value="lead_mname">Middle Name</option>
                            <option value="lead_lname">Last Name</option>
                            <option value="lead_mobile">Phone</option>
                        </select>
                    </div>
                </div>
                <div class="field-wrapper">
                    <label for="">Search String</label>
                    <div class="form-field">
                        <input type="text" formControlName="q" placeholder="Please enter search string">
                        <div class="error"
                            *ngIf="searchLeadForm.controls?.q?.errors?.required && isLeadSearchFormSubmitted">Please
                            enter search string</div>
                        <div class="error"
                            *ngIf="searchLeadForm.controls?.q?.errors?.pattern && isLeadSearchFormSubmitted">Special
                            character not allowed</div>
                    </div>
                </div>
                <div class="field-wrapper serchFild search-btn">
                    <div class="form-field">
                        <button type="submit" class="btn nbtn btn-blue btn-md p-0">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <h2>Lead Search Results</h2>
        <div class="table-wrapper" *ngIf="unprocessedLeads.length>0 ">
            <!-- <p>hello</p> -->
            <table cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>
                            Lead ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Lead Created ON
                        </th>
                        <th>
                            Lead Status
                        </th>
                        <th>
                            Queue Status
                        </th>
                        <th>
                            Lead Payment Status
                        </th>
                        <th>
                            Locked By CCE
                        </th>
                        <th>
                            CCE ID
                        </th>
                        <th>
                            CCE Mobile
                        </th>
                        <th>
                            CCE Email
                        </th>
                        <th>
                            Send Payment Link
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of unprocessedLeads; let i = index">
                        <td>{{data?.lead_id}}</td>
                        <td>{{data?.lead_fname}} {{data?.lead_mname}} {{data?.lead_lname}}</td>
                        <td>{{data?.lead_mobile}}</td>
                        <td>{{data?.lead_address1}} {{data?.lead_address2}} {{data?.district_name}}
                            {{data?.state_name}}-{{data?.lead_lead_pincode}}</td>
                        <td>{{data?.lead_createdon}}</td>
                        <td>{{lead_states[data?.lead_status]}}</td>
                        <td>{{data?.lead_queuestatus}}</td>
                        <td>{{ (data?.lead_iswaived==0)?(data?.payment_status==3)?'Paid':'Not Paid':'Waived' }}
                        </td>
                        <td>{{data?.emp_firstname}} {{data?.emp_middlename}} {{data?.emp_lastname}}</td>
                        <td>{{data?.emp_code}}</td>
                        <td>{{data?.emp_mobileno}}</td>
                        <td>{{data?.emp_email}}</td>
                        <td>
                            <button *ngIf="!sendLinkLoader || i != currentButton" class="send-pay-button" type="button"
                                (click)="sendPaymentLink(data?.lead_id, i)">Send</button>
                            <button *ngIf="sendLinkLoader && i == currentButton" class="send-pay-button" type="button">
                                <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="unprocessedLeads.length<=0">
            No Results.
        </div>
    </div>

    <!-- clarification listing -->
    <div class="container" *ngIf="isListing == 'clarification_listing'">
        <h2>Clarification List</h2>
        <div *ngIf="clarileadData.length > 0">
            <div class="table-wrapper">
                <!-- <p>hello</p> -->
                <table cellpadding="0" cellspacing="0">
                    <thead>
                        <tr>
                            <th>
                                Customer ID
                            </th>
                            <th>
                                Customer Name
                            </th>
                            <th>
                                Project ID
                            </th>
                            <th>
                                Contact No.
                            </th>
                            <th>
                                Address
                            </th>
                            <!-- <th>
                                Date
                            </th>
                            <th>
                                Time
                            </th> -->
                            <th>
                                Project Status
                            </th>
                            <th>
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of clarileadData; let i = index">
                            <td>{{data?.consumer_code}}</td>
                            <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                            <td>{{data?.project_code}}</td>
                            <td>{{data?.cceld_mobileno}}</td>
                            <td>{{data?.cceld_address1}}</td>
                            <!-- <td>{{data?.cceld_scheduledate}}</td>
                            <td>{{times[data?.cceld_scheduletime]}}</td> -->
                            <!--|||||||||||||||||||||||-->
                            <td>
                                {{data?.pmstate_name}}
                            </td>

                            <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->

                            <td>
                                <a *ngIf="openStates.indexOf(data.project_state)>-1" class="gbgBtn"
                                    (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open3</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- <h2 (click)="auditDataDisplay()">audit</h2> -->
            <style>
                ul {
                    overflow: hidden;
                }

                li {
                    display: inline-block;
                }

                .custom-pagination input {
                    margin: 10px;
                    width: 70px;
                    padding: 0 5px;
                }

                .btn-blue {
                    background-color: #04357f;
                    box-shadow: 0 4px 5.87px 0.13px rgba(32, 111, 230, .35);
                    border-radius: 27px;
                    color: #fff;
                    text-align: center;
                    font-size: 18px;
                    border: none;
                }
            </style>
            <ul *ngIf="clarileadData" style="white-space:nowrap;">

                <!-- <li [ngClass]="{disabled:pages === 1}">
                    <a (click)="getClarificationListDetails(pages - 1)">
                        <i *ngIf="pages > 1" class="fa fa-angle-left" style="cursor:pointer;">
                        </i>
                    </a>
                </li> -->
                &nbsp; &nbsp;
                <li>
                    <a>Page {{pages}} of {{pageCount}}</a>
                </li>
                &nbsp; &nbsp;
                <!-- <li [ngClass]="{disabled:pages === pageCount}">
                    <a (click)="getClarificationListDetails(pages + 1)">
                        <i *ngIf="pages < pageCount" class="fa fa-angle-right" style="cursor:pointer;">
                        </i>
                    </a>
                </li> -->
                <li>
                    <div class="custom-pagination">
                        <form [formGroup]="paginationSubmitForm" (ngSubmit)="pageSubmit()">
                            <input type="number" formControlName="page_number" class="form-text" min="0"
                                max="{{pageCount}}" (keypress)=_keyPress($event)>
                            <button type="submit" class="btn btn-blue btn-md">Go</button>
                            <span class="error" *ngIf="paginationSubmitForm.controls?.page_number?.errors?.max">Page
                                number must be less than or equal to {{pageCount}}</span>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
        <div class="no-data" *ngIf="clarileadData.length <= 0">
            No Clarified Projects
        </div>
    </div>

    <!-- project status listing -->
    <div class="container" *ngIf="isListing == 'project_status_listing'">
        <h2>Project Status List</h2>
        <div class="table-wrapper">
            <!-- <p>hello</p> -->
            <table cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>
                            Customer ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <!-- <th>
                            Date
                        </th>
                        <th>
                            Time
                        </th> -->
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of projectleadData; let i = index">
                        <td>{{data?.consumer_code}}</td>
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <!-- <td>{{data?.cceld_scheduledate}}</td>
                        <td>{{times[data?.cceld_scheduletime]}}</td> -->
                        <!--|||||||||||||||||||||||-->
                        <td>
                            {{data?.pmstate_name}}
                        </td>
                        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->

                        <td>
                            <a (click)="getProjectStatusDataDetailed(data?.project_id)">Details</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- <h2 (click)="auditDataDisplay()">audit</h2> -->
        <ul *ngIf="projectleadData" style="white-space:nowrap;">

            <!-- <li [ngClass]="{disabled:pages === 1}">
                <a (click)="getPojectListDetails(pages - 1)">
                    <i *ngIf="pages > 1" class="fa fa-angle-left" style="cursor:pointer;">
                    </i>
                </a>
            </li> -->
            &nbsp; &nbsp;
            <li>
                <a>Page {{pages}} of {{pageCount}}</a>
            </li>
            &nbsp; &nbsp;
            <!-- <li [ngClass]="{disabled:pages === pageCount}">
                <a (click)="getPojectListDetails(pages + 1)">
                    <i *ngIf="pages < pageCount" class="fa fa-angle-right" style="cursor:pointer;">
                    </i>
                </a>
            </li> -->
            <li>
                <div class="custom-pagination">
                    <form [formGroup]="paginationSubmitForm" (ngSubmit)="pageSubmit()">
                        <input type="number" formControlName="page_number" class="form-text" min="0" max="{{pageCount}}"
                            (keypress)=_keyPress($event)>
                        <button type="submit" class="btn btn-blue btn-md">Go</button>
                        <span class="error" *ngIf="paginationSubmitForm.controls?.page_number?.errors?.max">Page number
                            must be less than or
                            equal to {{pageCount}}</span>
                    </form>

                </div>
            </li>
        </ul>

    </div>

    <div class="container survey-box" *ngIf="!isListing">
        <div class="tab-box fixed">
            <div class="box">
                <section class="lead-panel-tab d-flex">
                    <div class="tab" (click)="openProjectChecklistDetails(currentProjectId, consumerID)"
                        [ngClass]="{'activatedSurveyForm': panelSteps == 1}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36px"
                            height="47px">
                            <path fill-rule="evenodd" fill="rgb(117, 183, 59)"
                                d="M34.109,46.053 L1.890,46.053 C1.082,46.053 0.426,45.394 0.426,44.582 L0.426,2.418 C0.426,1.605 1.082,0.947 1.890,0.947 L20.929,0.947 L20.929,14.185 C20.929,14.996 21.585,15.655 22.393,15.655 L35.574,15.655 L35.574,44.582 C35.574,45.394 34.917,46.053 34.109,46.053 ZM7.748,22.519 C6.939,22.519 6.284,23.178 6.284,23.990 C6.284,24.802 6.939,25.461 7.748,25.461 C8.558,25.461 9.213,24.802 9.213,23.990 C9.213,23.177 8.558,22.519 7.748,22.519 ZM7.748,28.402 C6.939,28.402 6.284,29.061 6.284,29.874 C6.284,30.686 6.939,31.344 7.748,31.344 C8.558,31.344 9.213,30.686 9.213,29.874 C9.213,29.061 8.558,28.402 7.748,28.402 ZM7.748,34.286 C6.939,34.286 6.284,34.945 6.284,35.757 C6.284,36.569 6.939,37.228 7.748,37.228 C8.558,37.228 9.213,36.569 9.213,35.757 C9.213,34.945 8.558,34.286 7.748,34.286 ZM28.251,22.519 L13.606,22.519 C12.798,22.519 12.142,23.178 12.142,23.990 C12.142,24.802 12.798,25.461 13.606,25.461 L28.251,25.461 C29.060,25.461 29.716,24.802 29.716,23.990 C29.716,23.178 29.060,22.519 28.251,22.519 ZM28.251,28.402 L13.606,28.402 C12.798,28.402 12.142,29.061 12.142,29.874 C12.142,30.686 12.798,31.344 13.606,31.344 L28.251,31.344 C29.060,31.344 29.716,30.686 29.716,29.874 C29.716,29.061 29.060,28.402 28.251,28.402 ZM28.251,34.286 L13.606,34.286 C12.798,34.286 12.142,34.945 12.142,35.757 C12.142,36.569 12.798,37.228 13.606,37.228 L28.251,37.228 C29.060,37.228 29.716,36.569 29.716,35.757 C29.716,34.945 29.060,34.286 28.251,34.286 ZM23.858,1.808 L34.716,12.713 L23.858,12.713 L23.858,1.808 Z" />
                        </svg>
                        <span>Survey Form</span>
                    </div>
                    <div class="tab" (click)="getProjectStatusDataDetailed(currentProjectId)"
                        [ngClass]="{'activatedProjectStatus': panelSteps == 2}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="45px"
                            height="46px">
                            <path fill-rule="evenodd" fill="rgb(49, 213, 202)"
                                d="M43.957,31.537 L32.331,43.081 L26.455,44.671 L26.062,45.060 C25.916,45.207 25.722,45.280 25.528,45.280 C25.339,45.280 25.148,45.207 25.002,45.065 L24.986,45.069 L24.990,45.053 C24.701,44.761 24.701,44.291 24.995,44.000 L25.387,43.610 L26.988,37.776 L38.616,26.234 C39.467,25.388 40.952,25.388 41.804,26.234 L43.957,28.371 C44.383,28.794 44.618,29.355 44.618,29.954 C44.618,30.552 44.383,31.114 43.957,31.537 ZM27.139,42.930 L30.484,42.025 L28.050,39.610 L27.139,42.930 ZM28.733,38.166 L31.938,41.349 L39.676,33.666 L36.470,30.484 L28.733,38.166 ZM42.889,29.432 L40.735,27.294 C40.454,27.015 39.964,27.015 39.684,27.294 L37.539,29.424 L40.744,32.606 L42.889,30.476 C43.030,30.337 43.107,30.151 43.107,29.954 C43.107,29.757 43.030,29.572 42.889,29.432 ZM8.688,35.000 C8.271,35.000 7.933,35.335 7.933,35.750 C7.933,36.165 8.271,36.500 8.688,36.500 L25.069,36.500 L24.961,36.608 L22.519,45.500 L0.379,45.500 L0.379,0.500 L24.865,0.500 L35.883,11.439 L35.883,25.764 L26.581,35.000 L8.688,35.000 ZM8.688,18.500 L27.573,18.500 C27.990,18.500 28.329,18.165 28.329,17.750 C28.329,17.335 27.990,17.000 27.573,17.000 L8.688,17.000 C8.271,17.000 7.933,17.335 7.933,17.750 C7.933,18.165 8.271,18.500 8.688,18.500 ZM7.933,23.750 C7.933,24.165 8.271,24.500 8.688,24.500 L27.573,24.500 C27.990,24.500 28.329,24.165 28.329,23.750 C28.329,23.335 27.990,23.000 27.573,23.000 L8.688,23.000 C8.271,23.000 7.933,23.335 7.933,23.750 ZM16.242,11.000 L8.688,11.000 C8.271,11.000 7.933,11.335 7.933,11.750 C7.933,12.165 8.271,12.500 8.688,12.500 L16.242,12.500 C16.659,12.500 16.998,12.165 16.998,11.750 C16.998,11.335 16.659,11.000 16.242,11.000 ZM23.796,2.000 L23.796,12.500 L34.372,12.500 L23.796,2.000 ZM28.329,29.750 C28.329,29.335 27.990,29.000 27.573,29.000 L8.688,29.000 C8.271,29.000 7.933,29.335 7.933,29.750 C7.933,30.165 8.271,30.500 8.688,30.500 L27.573,30.500 C27.990,30.500 28.329,30.165 28.329,29.750 Z" />
                        </svg>
                        <span>Project History</span>
                    </div>
                </section>
            </div>
        </div>
        <div class="survey-page-container">
            <!-- start audit page -->
            <div class="survey-page-left" *ngIf="showForm == 'only_cc_form'">
                <!-- start survey-form -->
                <div class="survey-form audit-form">
                    <p-panel header="Customer Care Form:" [toggleable]="true">
                        <div class="tab-content-detail">
                            <h3>Consumer Personal Information</h3>
                            <div class="field-wrapper">
                                <label for="">Lead Reference</label>
                                <div class="form-field">
                                        <span
                                        *ngIf="cceFilledData?.cceld_reference">{{cceFilledData?.cceld_reference}}</span>

                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Lead Reference Remarks</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_referenceremarks}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">First Name *</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_firstname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Middle Name </label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_middlename}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Last Name *</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_lastname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 1</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_address1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 2</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_address2}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Pincode</label>
                                <div class="form-field">
                                    <!-- <span>{{cceFilledData?.cceld_pincode}}</span> -->
                                  <span>{{cceFilledDataPinCode?cceFilledDataPinCode:''}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Landmark</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_landmark}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Locality</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_locality}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">City</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_city}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">State</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_state}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Country</label>
                                    <div class="form-field">
                                        <span>{{cceFilledData?.cceld_state}}</span>
                                    </div>
                                </div> -->

                            <div class="field-wrapper">
                                <label for="">Contact Number</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_mobileno}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Alernate Contact Number</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_alternatecntctno}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Email ID</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceld_email}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Building Type</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_buildingtype}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Type of Site</label>
                                <div class="form-field">
                                    <span
                                        *ngIf="cceFilledData?.cceLeaddata?.cceld_sitetype">{{cceFilledData?.cceLeaddata?.cceld_sitetype | underscoreRemove}}</span>
                                    <!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Number of floors</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_totalfloor}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Customer Floor</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_customerfloor}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Owner</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_isowner == 1 ? 'Yes' : 'No'}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Period of rent</label>
                                    <div class="form-field">
                                        <span>{{cceFilledData?.cceLeaddata?.cceld_rentperiod}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Roof Rights</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_roofright == 1 ? 'Yes' : 'No'}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Other area if available</label>
                                <div class="form-field">
                                    <span
                                        *ngIf="cceFilledData?.cceLeaddata?.cceld_otherarea && cceFilledData?.cceLeaddata?.cceld_otherareaunit">{{cceFilledData?.cceLeaddata?.cceld_otherarea}}
                                        {{cceFilledData?.cceLeaddata?.cceld_otherareaunit | underscoreRemove}}</span>
                                    <!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Budget</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_budget}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Financing Required</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_isfinancereq}}</span><!-- change -->
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Transport Feasibility</label>
                                    <div class="form-field">
                                        <span>{{cceFilledData?.cceLeaddata?.cceld_istransportfeasible}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Scheduled Site Visit Date</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_scheduledate}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Scheduled Site Visit Time</label>
                                <div class="form-field" [ngSwitch]="cceFilledData?.cceLeaddata?.cceld_scheduletime">
                                    <!-- <span>{{time_const_audit}}</span>change -->
                                    <!-- <span>{{cceFilledData?.cceLeaddata?.cceld_scheduletime}}:00:00</span> -->
                                 <span *ngSwitchCase="'1'">10:00-12:00</span>
                                 <span *ngSwitchCase="'2'">12:00-14:00</span>
                                 <span *ngSwitchCase="'3'">14:00-16:00</span>
                                 <span *ngSwitchCase="'4'">16:00-18:00</span>


                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Motive</label>
                                    <div class="form-field">
                                        <span>{{cceFilledData?.cceLeaddata?.cceld_motive}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Average Electricity Bill</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_avgelectricitybill}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Solution Required</label>
                                <div class="form-field">
                                    <span
                                        *ngIf="cceFilledData?.cceLeaddata?.cceld_ongridoffgrid">{{cceFilledData?.cceLeaddata?.cceld_ongridoffgrid | underscoreRemove}}</span>
                                    <!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Existing Power Source</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_existpowersource}}</span><!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Back Up Details</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_backupdetail}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Type of Connection</label>
                                <div class="form-field">
                                    <span
                                        *ngIf="cceFilledData?.cceLeaddata?.cceld_phasetype">{{cceFilledData?.cceLeaddata?.cceld_phasetype | underscoreRemove}}</span>
                                    <!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Average Power Cut during Day</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_powercutinday}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Average Power Cut during Night</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_powercutinnight}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Roof Type</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_rooftype}}</span><!-- change -->
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Roof Area</label>
                                <div class="form-field">
                                    <span
                                        *ngIf="cceFilledData?.cceLeaddata?.cceld_roofarea && cceFilledData?.cceLeaddata?.cceld_roofareaunit">{{cceFilledData?.cceLeaddata?.cceld_roofarea}}
                                        {{cceFilledData?.cceLeaddata?.cceld_roofareaunit | underscoreRemove}}</span>
                                    <!-- change -->
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Remarks</label>
                                    <div class="form-field">
                                        <span>{{cceFilledData?.cceLeaddata?.cceld_remarks}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Notes</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_notes}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Name of Contact Person at Site</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_contactperson}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Contact Number of Contact Person at Site</label>
                                <div class="form-field">
                                    <span>{{cceFilledData?.cceLeaddata?.cceld_contactnumber}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Site Survey Payment Status</label>
                                <div class="form-field">
                                    <span *ngIf="cceFilledData?.approval_status==1" style="color:green;">Payment
                                        Approved</span>
                                    <span *ngIf="cceFilledData?.approval_status==0" style="color:red;">Payment Approval
                                        Pending</span>
                                    <span *ngIf="!cceFilledData?.approval_status" style="color:red;">Payment Not
                                        Done</span>
                                </div>
                            </div>
                        </div>
                    </p-panel>
                </div>
            </div>
            <div class="survey-page-left" *ngIf="showForm == 'survey_form'">
                <form [formGroup]="surveyorFillFormRequest" (ngSubmit)="submitSurveyorFormRequest()">
                    <!-- start survey-form -->
                    <div class="survey-form">
                        <div *ngIf="isRejectionListing == true" [ngClass]="{'hide-all': isloadExpand}">
                            <h3>REJECTION REMARKS</h3>
                            <div class="form-field">
                                <span>{{rejData}}</span>
                            </div>
                        </div>
                        <p-panel header="Customer Care Form:" [toggleable]="true"
                            [ngClass]="{'hide-all': isloadExpand}">
                            <div class="tab-content-detail">
                                <h3>Consumer Personal Information</h3>
                                <div class="field-wrapper">
                                    <label for="">First Name *</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_firstname"
                                            placeholder="First Name" (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_firstname?.errors?.pattern">
                                            {{site_survey_error_msg.FNAME}}
                                        </div>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_firstname?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Middle Name </label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_middlename"
                                            placeholder="Middle Name" (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_middlename?.errors?.pattern && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.MNAME}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Last Name *</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_lastname"
                                            placeholder="Last Name" (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_lastname?.errors?.pattern">
                                            {{site_survey_error_msg.LNAME}}
                                        </div>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_lastname?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Address 1</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_address1"
                                            placeholder="Address 1" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Address 2</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_address2"
                                            placeholder="Address 2 " (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Pincode *</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_pincode"
                                            placeholder="Pincode" (input)="getSurveyFormCityStateFromPin($event.target.value)" (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_pincode?.errors?.pattern && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.PINCODE}}
                                        </div>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_pincode?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">City</label>
                                    <!-- <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_cityid"
                                            placeholder="City" (focusout)="submitButtonValue(3)">
                                    </div> -->
                                    <div class="form-field">
                                        <ng-select  [options]="cityList" formControlName="sf_cityid" placeholder="Select City" (blur)="submitButtonValue(3)"></ng-select>
                                    </div>

                                </div>
                                <div class="field-wrapper">
                                    <label for="">State</label>
                                    <!-- <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_stateid"
                                            placeholder="State" (focusout)="submitButtonValue(3)">
                                    </div> -->

                                        <div class="form-field">
                                            <ng-select  [options]="stateList" formControlName="sf_stateid" placeholder="Select State" (blur)="submitButtonValue(3)"></ng-select>
                                        </div>

                                </div>

                                <div class="field-wrapper">
                                    <label for="">Contact Number *</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_mobileno"
                                            placeholder="Contact Number" maxlength="10"
                                            (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_mobileno?.errors?.pattern && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.MOBILENO_PATTERN}}
                                        </div>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_mobileno?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Email ID</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_email"
                                            placeholder="Email ID" (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_email?.errors?.pattern && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.EMAIL_PATTERN}}
                                        </div>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_email?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Source of Enquiry</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_reference"
                                            placeholder="Source of Enquiry" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Building Type *</label>
                                    <div class="form-field">

                                            <select formControlName="building_type">
                                                    <option value="residential">Residential</option>
                                                    <option value="commercial">Commercial</option>
                                                </select>

                                                <div class="error"  *ngIf="surveyorFillFormRequest.controls?.building_type?.errors?.required && isSubmitSurveyorFillFormRequest">
                                                    Building Type Required*
                                                </div>

                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Type Of Site*</label>
                                    <div class="form-field">
                                        <select *ngIf="isCommercial" formControlName="site_type">
                                            <option value=" Industrial">Industrial</option>
                                            <option value="Institutional/Corporate">Institutional/Corporate</option>
                                            <option value="MSME">MSME</option>
                                            <option value="Education">Education</option>
                                            <option value="Government">Government</option>
                                            <option value="Others">Others</option>
                                        </select>
                                        <select *ngIf="!isCommercial" formControlName="site_type">
                                            <option value="Multi-Storey">Multi-Storey</option>
                                            <option value="Villa/Independent House">Villa / Independent House</option>
                                            <option value="RWA/GroupHousing">RWA / Group Housing</option>
                                            <option value="HighRiseSociety">High Rise Society</option>
                                            <option value="Others">Others</option>
                                        </select>
                                        <div class="error"  *ngIf="surveyorFillFormRequest.controls?.site_type?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            Type Of Site Required*
                                        </div>
                                    </div>

                                </div>

                                <div class="field-wrapper">
                            <label for="">Select Project Type*</label>
                            <div class="form-field">
                             <ng-select [options]="projectType" formControlName="sf_project_type" placeholder="Select Project Type"></ng-select>
                             <div class="error" *ngIf="surveyorFillFormRequest.controls?.sf_project_type?.errors?.required && isSubmitSurveyorFillFormRequest">
                                Project Type Required*
                              </div>
                            </div>

                            </div>


                                <div *ngIf="isCommercial">
                                        <div class="field-wrapper">
                                                <input type="checkbox"  data-md-icheck (change)="toggleVisibility($event)" [checked]="isPrimaryApplicantSame"> Same as primary Applicant
                                            </div>
                                        <div class="field-wrapper">
                                                <label for="">Contact Person First Name </label>
                                                <div class="form-field">
                                                    <input class="text-caps" type="text" formControlName="cp_firstname"
                                                        placeholder="First Name" (focusout)="submitButtonValue(3)">
                                                    <div class="error"
                                                        *ngIf="surveyorFillFormRequest.controls?.cp_firstname?.errors?.pattern">
                                                        {{site_survey_error_msg.FNAME}}
                                                    </div>
                                                    <div class="error"
                                                        *ngIf="surveyorFillFormRequest.controls?.cp_firstname?.errors?.required && isSubmitSurveyorFillFormRequest">
                                                        {{site_survey_error_msg.BLANK_FIELD}}
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="field-wrapper">
                                                    <label for="">Contact Person Last Name </label>
                                                    <div class="form-field">
                                                        <input class="text-caps" type="text" formControlName="cp_lastname"
                                                            placeholder="Last Name" (focusout)="submitButtonValue(3)">
                                                        <div class="error"
                                                            *ngIf="surveyorFillFormRequest.controls?.cp_lastname?.errors?.pattern">
                                                            {{site_survey_error_msg.LNAME}}
                                                        </div>
                                                        <div class="error"
                                                            *ngIf="surveyorFillFormRequest.controls?.cp_lastname?.errors?.required && isSubmitSurveyorFillFormRequest">
                                                            {{site_survey_error_msg.BLANK_FIELD}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="field-wrapper">
                                                        <label for="">Contact person's Contact Number</label>
                                                        <div class="form-field">
                                                            <input class="text-caps" type="text" formControlName="cp_mobileno"
                                                                placeholder="Contact Number" maxlength="10"
                                                                (focusout)="submitButtonValue(3)">
                                                            <div class="error"
                                                                *ngIf="surveyorFillFormRequest.controls?.cp_mobileno?.errors?.pattern && isSubmitSurveyorFillFormRequest">
                                                                {{site_survey_error_msg.MOBILENO_PATTERN}}
                                                            </div>
                                                            <div class="error"
                                                                *ngIf="surveyorFillFormRequest.controls?.cp_mobileno?.errors?.required && isSubmitSurveyorFillFormRequest">
                                                                {{site_survey_error_msg.BLANK_FIELD}}
                                                            </div>
                                                        </div>
                                                    </div>
                                    </div>

                            </div>
                        </p-panel>
                        <p-panel header="Survey Form:" [toggleable]="true" [ngClass]="{'hide-all': isloadExpand}">
                            <div class="tab-content-detail">
                                <h3>Electric Parameter</h3>
                                <div class="field-wrapper">
                                    <label for="">Sanctioned Load Capacity (kVA)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_sanctioned_load_capacity" placeholder="kVA"
                                            (focusout)="submitButtonValue(3)">
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_sanctioned_load_capacity?.errors?.pattern ">
                                            Please enter valid value Ex:14.53</div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Type of Connection</label>
                                    <div class="form-field">
                                        <select formControlName="sf_connection_type" id=""
                                            (focusout)="submitButtonValue(3)">
                                            <option value="single">Single</option>
                                            <option value="three">Three</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Main Line Transformer Status (If installed by customer)*</label>
                                    <div class="form-field">
                                        <select [(ngModel)]="selectedValue"
                                            formControlName="sf_mainline_transformer_status" id=""
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                        <div class="error"
                                        *ngIf="surveyorFillFormRequest.controls?.sf_mainline_transformer_status?.errors?.required && isSubmitSurveyorFillFormRequest">
                                        {{site_survey_error_msg.BLANK_FIELD}}
                                    </div>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValue == '1'">
                                    <label for="">Transformer Capacity (kVA)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_transformer_capacity"
                                            placeholder="kVA" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper" *ngIf="selectedValue == '1'">
                                        <label for="">Transformer Connection type</label>
                                        <div class="form-field">
                                            <select formControlName="sf_transformer_connection_type" id="" (focusout)="submitButtonValue(3)">
                                                <option value="single">Single</option>
                                                <option value="three">Three</option>
                                            </select>
                                        </div>
                                    </div> -->
                                <h3>Existing Power Back-Up Solutions</h3>
                                <!-- <div class="field-wrapper">
                                        <label for="">Is DG Set installed ?</label>
                                        <div class="form-field">
                                            <select [(ngModel)]="selectedValueIsDG" id="" [ngModelOptions]="{standalone: true}">
                                                <option value="1">Yes</option>
                                                <option value="0">No</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsDG == '1'">
                                        <label for="">DG Set capacity (kVA)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_dgset_capacity" placeholder="kVA" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsDG == '1'">
                                        <label for="">DG Set Connection type</label>
                                        <div class="form-field">
                                            <select formControlName="sf_dgset_connection_type" id="" (focusout)="submitButtonValue(3)">
                                                <option value="single">Single</option>
                                                <option value="three">Three</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsDG == '1'">
                                        <label for="">DG Brand</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_dg_brand" placeholder="DG Brand" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <!-- <div class="field-wrapper">
                                        <label for="">Is Inverter installed ?</label>
                                        <div class="form-field">
                                            <select [(ngModel)]="selectedValueIsInverter" id="" [ngModelOptions]="{standalone: true}">
                                                <option value="1">Yes</option>
                                                <option value="0">No</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                        <label for="">Inverter capacity (VA)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_inverter_capacity" placeholder="VA" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                        <label for="">Inverter Connection type</label>
                                        <div class="form-field">
                                            <select formControlName="sf_inverter_connection_type" id="" (focusout)="submitButtonValue(3)">
                                                <option value="single">Single</option>
                                                <option value="three">Three</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                        <label for="">Inverter Brand</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_inverter_brand" placeholder="Inverter Brand" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                        <label for="">Inverter DC Voltage (Volt)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_inverterdc_voltage" placeholder="Volt" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div>
                                    <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                        <label for="">Battery Brand</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_battery_brand" placeholder="Battery Brand" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                    <label for="">Battery Capacity (AH)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_battery_capacity"
                                            placeholder="AH " (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                    <label for="">Battery Rating Factor (AH)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_battery_rating_factor"
                                            placeholder="AH " (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                    <label for="">Battery Type</label>
                                    <div class="form-field">
                                        <select formControlName="sf_battery_type" id=""
                                            (focusout)="submitButtonValue(3)">
                                            <option value="tabular">Tublar</option>
                                            <option value="flat">Flat</option>
                                            <option value="vrla">VRLA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueIsInverter == '1'">
                                    <label for="">Battery Age</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_battery_age"
                                            placeholder="Months " (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Availability of Grid (7 AM-6 PM)</label>
                                    <div class="form-field">
                                        <ng-select [options]="slotList" formControlName="sf_availability_of_grid1"
                                            placeholder="Hours" (focusout)="submitButtonValue(3)">
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Availability of Grid (6PM-7 AM)</label>
                                    <div class="form-field">
                                        <ng-select [options]="slotList1" formControlName="sf_availability_of_grid2"
                                            placeholder="Hours" (focusout)="submitButtonValue(3)">
                                        </ng-select>
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">Primary Source of Supply during day</label>
                                        <div class="form-field">
                                            <select formControlName="sf_primary_source_of_supply_during_day" id="" (focusout)="submitButtonValue(3)">
                                                <option value="grid">Grid</option>
                                                <option value="dg" *ngIf="selectedValueIsDG == '1'">DG</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Primary Source of Supply during evening</label>
                                        <div class="form-field">
                                            <select formControlName="sf_primary_source_of_supply_during_evening" id="" (focusout)="submitButtonValue(3)">
                                                <option value="grid">Grid</option>
                                                <option value="dg" *ngIf="selectedValueIsDG == '1'">DG</option>
                                            </select>
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Maximum Load Running in day time (7 AM-6 PM) (kW)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_min_running_loadin_daytime" placeholder="kW"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Load running after (6 PM) (kW)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_load_running_after6"
                                            placeholder="kW" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">Critical Load on which back up is required (kW)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_critical_load_onwhich_backup_isrequired" placeholder="kW" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Operation Hours of Critical Load (Back up Hours)

                                    </label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_operation_hour_of_critical_load" placeholder="Hrs"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">Secondary Source of supply if available</label>
                                        <div class="form-field">
                                            <select formControlName="sf_secondary_source_of_supply_if_available" id="" (focusout)="submitButtonValue(3)">
                                                <option value="inverter">Inverter</option>
                                                <option value="dg">DG</option>
                                            </select>
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Termination DB/LT panel capacity (Amp & Volt)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_termination_dblt_panel_capacity"
                                            placeholder="Amp & Volt" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">No. of existing Earthing Pit</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_no_of_existing_earthin_pit" placeholder="Nos." (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Evacuation Voltage (kVA)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_evacuation_voltage"
                                            placeholder="kVA" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>

                                <h3>
                                    SPACE Availability
                                </h3>

                                <div class="field-wrapper">
                                    <label for="">Type of Roof</label>
                                    <div class="form-field">
                                        <select [(ngModel)]="selectedValueTypeRoof" formControlName="sf_type_of_roof"
                                            id="" (focusout)="submitButtonValue(3)">
                                            <option value="rcc">Flat RCC</option>
                                            <option value="tin_shed">Tin Shed</option>
                                            <option value="park">Asbestos</option>
                                            <option value="ground">Ground Mount</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Shadow Free Area Available (Sqr.Feet)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_shadow_free_area"
                                            placeholder="Sqr.Feet" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">Installation Location (Name of Building)</label>
                                        <div class="form-field">
                                            <input class="text-caps" formControlName="sf_installation_location" type="text" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Other Spaces Available for Installation</label>
                                    <div class="form-field">
                                        <select formControlName="sf_other_spaces_available_for_installation" id=""
                                            (focusout)="submitButtonValue(3)">
                                            <option value="rcc">RCC</option>
                                            <option value="tin_shed">Tin Shed</option>
                                            <option value="park">Park</option>
                                            <option value="ground">Ground</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- <div class="field-wrapper">
                                        <label for="">Number of floors in the building</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_no_of_floors_in_the_building" placeholder="Nos." (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Roof Accessibility</label>
                                        <div class="form-field">
                                            <select formControlName="sf_roof_accessibility">
                                                <option value="lift">Lift</option>
                                                <option value="stairs">Stairs</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="field-wrapper">
                                        <label for="">Distance of Existing LT Panel / LT Board from Roof (mtrs)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_distance_of_existing_lt_panelboard_from_roof" placeholder="mtrs" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Chipping on roof allowance</label>
                                    <div class="form-field">
                                        <select formControlName="sf_chipping_on_roof_allowance"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="allowed">Allowed</option>
                                            <option value="not_allowed">Not Allowed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Can the panels be mounted facing towards true south*</label>
                                    <div class="form-field">
                                        <select formControlName="sf_can_the_panels_be_mounted_facing_towards_true_south"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                        <div class="error"
                                        *ngIf="surveyorFillFormRequest.controls?.sf_can_the_panels_be_mounted_facing_towards_true_south?.errors?.required && isSubmitSurveyorFillFormRequest">
                                        {{site_survey_error_msg.BLANK_FIELD}}
                                    </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">In case of non true south sites (mention the diflection / azimuth
                                        angle)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_incase_of_nontrue_southsites" placeholder="(N/S/E/W)"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>

                                <!-- <div class="field-wrapper">
                                        <label for="">Any preference (Floor/Location) for inverter installation</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_preference_for_invertor_installation" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Area of the place where PCU / Battery to be placed (Sqr.Feet)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_area_of_the_place_where_pcu" placeholder="Sqr.Feet"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Ventilation Available in Battery/PCU Room</label>
                                    <div class="form-field">
                                        <select formControlName="sf_ventilation_available_in_batterypcu_room"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Distance from Roof to Inverter / Battery Room (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_distance_from_roof_to_inverter_battery_room"
                                            placeholder="Mtrs" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Distance from Inverter / Battery Room to LT Board (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_distance_from_inverter_battery_room_to_lt_board"
                                            placeholder="Mtrs" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Length of wire-run from each array to Inverter (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_length_of_wirerun_from_each_array_to_inverter"
                                            placeholder="Mtrs" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Space Available for Secure Storage of Material</label>
                                    <div class="form-field">
                                        <select formControlName="sf_space_available_for_secure_storage_of_material"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Space available for earthing</label>
                                    <div class="form-field">
                                        <select formControlName="sf_space_available_for_earthing"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueTypeRoof=='tin_shed'">
                                    <label for="">In case of shed, is the drilling allowed on it</label>
                                    <div class="form-field">
                                        <select formControlName="sf_incase_of_shed_isdrill_allowed"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                            <option value="2">NA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueTypeRoof=='tin_shed'">
                                    <label for="">Is the shed facing towards true south</label>
                                    <div class="form-field">
                                        <select formControlName="sf_isthe_shed_facing_towards_true_south"
                                            (focusout)="submitButtonValue(3)">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                            <option value="2">NA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="field-wrapper" *ngIf="selectedValueTypeRoof=='tin_shed'">
                                    <label for="">Details of Shed</label>
                                    <div class="form-field">
                                        <select formControlName="sf_details_of_shed" (focusout)="submitButtonValue(3)">
                                            <option value="slope">Slope</option>
                                            <option value="mounting">Mounting</option>
                                            <option value="na">NA</option>
                                        </select>
                                    </div>
                                </div>
                                <h3>Shadow Consideration</h3>
                                <!-- <div class="field-wrapper">
                                        <label for="">Shading: describe type of shading here(Array 1:2: 3: 4:) (Feet)</label>
                                        <div class="form-field">
                                            <input class="text-caps" type="text" formControlName="sf_shading" placeholder="Feet" (focusout)="submitButtonValue(3)">
                                        </div>
                                    </div> -->
                                <div class="field-wrapper">
                                    <label for="">Height of the Parapet Wall (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_height_of_the_parapet_wall" placeholder="Mtrs"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>


                                <div class="field-wrapper">
                                    <label for="">Protruding Objects/Mumty in installation location(water tank,
                                        Dish,Antennae) (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_protruding_objects_mumty_in_installation_location"
                                            placeholder="Mtrs" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Details of High Altitude Trees/Buildings facing south (Mtrs)</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_details_of_high_altitude_trees_buildings_facing_south"
                                            placeholder="Mtrs" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>

                                <div class="field-wrapper">
                                    <label for="">Latitude, Longitude of site*</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_latitude_longitude_of_site" placeholder="(N/S/E/W)"
                                            (focusout)="submitButtonValue(3)">
                                            <div class="error"
                                                *ngIf="surveyorFillFormRequest.controls?.sf_latitude_longitude_of_site?.errors?.required && isSubmitSurveyorFillFormRequest">
                                                {{site_survey_error_msg.BLANK_FIELD}}
                                            </div>
                                    </div>
                                </div>

                            </div>
                        </p-panel>


                        <p-panel header="Feasibility Status Form:" [toggleable]="true"
                            [ngClass]="{'hide-all': isloadExpand}">
                            <div class="tab-content-detail">
                                <h3>Project Feasibility</h3>
                                <div class="field-wrapper">
                                    <label for="">Feasible Solution Type *</label>
                                    <div class="form-field">
                                        <select formControlName="sf_feasible_solution_type" id=""
                                            (focusout)="submitButtonValue(3)">
                                            <option value="none">Not Feasible</option>
                                            <option value="on_grid">On Grid(Grid Tie)</option>
                                            <option value="off_grid">Off Grid(Back-up)</option>
                                            <option value="hybrid">Hybrid</option>
                                        </select>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_feasible_solution_type?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Ground Clearance of structure recommended by surveyor</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text"
                                            formControlName="sf_ground_clearance_of_structure_recommended_by_surveyor"
                                            placeholder="Ground Clearance of structure recommended by surveyor"
                                            (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Proposed DC Capacity</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_proposed_dc_capacity"
                                            placeholder="Proposed DC Capacity" (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Proposed AC Capacity</label>
                                    <div class="form-field">
                                        <input class="text-caps" type="text" formControlName="sf_proposed_ac_capacity"
                                            placeholder="Proposed AC Capacity " (focusout)="submitButtonValue(3)">
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Solution Feasiblity Remarks *</label>
                                    <div class="form-field">
                                        <textarea name="remarks" formControlName="sf_feasiblity_remarks"
                                            placeholder="Enter Remarks.."></textarea>
                                        <div class="error"
                                            *ngIf="surveyorFillFormRequest.controls?.sf_feasiblity_remarks?.errors?.required && isSubmitSurveyorFillFormRequest">
                                            {{site_survey_error_msg.BLANK_FIELD}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-panel>

                        <!-- start survey-form table -->
                        <!-- <p-panel header="Load Survey Form:" [toggleable]="true" [ngClass]="{'hide-all': isloadExpand}">
                            <div class="table-wrapper load-form-class" [ngClass]="{'full-expand-div': isloadExpand}">
                                       <i class="fa fa-arrows-alt" aria-hidden="true" (click)="toggleLoadForm()"></i>
                                   <div class="formFull table-wrapper">

                                      <table cellpadding="0" cellspacing="0">
                                       <thead>
                                           <tr>
                                               <th>Load Category</th>
                                               <th>Device Description</th>
                                               <th>Operating Source</th>
                                               <th>Operating Voltage</th>
                                               <th>Power Watts (B)</th>
                                               <th>Quantity Day Time (A)</th>
                                               <th>Back-up Hours of use During Day time (c)</th>
                                               <th>Quantity night time (E)</th>
                                               <th>Back-up Hours of use During night time (D)</th>
                                               <th>
                                                   <span>= A * B * C</span>
                                                   Watt hour energy day time</th>
                                               <th>
                                                   <span>= E * B * D</span>
                                                   Watt hour energy night time</th>
                                               <th></th>
                                           </tr>
                                       </thead>
                                       <tbody *ngFor="let appliance of appliances | slice:1; let i = index" formArrayName="load_survey">
                                           <tr *ngFor="let control of surveyorFillFormRequest.get('load_survey').at(i).controls; let j = index" [formGroup]="control">
                                               <td>
                                                   <strong>{{ appliance.text }}</strong>
                                               </td>
                                               <td>
                                                   <select formControlName="lsf_device_description" *ngIf="appliance.add_devices[0]">
                                                       <option *ngFor="let type of appliance.add_devices" [value]="type.id">{{type.text}}</option>
                                                   </select>
                                               </td>
                                               <td>
                                                   <select formControlName="lsf_operating_source">
                                                       <option value="0">AC</option>
                                                       <option value="1">DC</option>
                                                   </select>
                                               </td>
                                               <td>
                                                   <select formControlName="lsf_operating_voltage">
                                                       <option value="1">220~240V</option>
                                                   </select>
                                               </td>
                                               <td>
                                                   <select #watts [select]="watts" formControlName="lsf_power_watts" luminousSurveyor [group]="control" (focusout)="wattSum()">
                                                       <option [value]="0">0</option>
                                                       <option *ngFor="let watt of appliance.watt" [value]="watt.id">{{ watt.text }}</option>
                                                   </select>
                                               </td>
                                               <td>
                                                   <input luminousSurveyor [select]="watts" [group]="control" formControlName="lsf_quantity_day_time" type="text" value="" (focusout)="wattSum()">
                                               </td>
                                               <td>
                                                   <input luminousSurveyor [select]="watts" [group]="control" formControlName="lsf_backup_hours_of_use_during_day_time" type="text"
                                                       value="" (focusout)="wattSum()">
                                               </td>
                                               <td>
                                                   <input luminousSurveyor [select]="watts" [group]="control" formControlName="lsf_quantity_night_time" type="text" value="" (focusout)="wattSum()">
                                               </td>
                                               <td>
                                                   <input luminousSurveyor [select]="watts" [group]="control" formControlName="lsf_backup_hours_of_use_during_night_time" type="text"
                                                       value="" (focusout)="wattSum()">
                                               </td>
                                               <td>
                                                   <input formControlName="lsf_watt_hour_energy_day_time" type="text" value="" readonly>
                                               </td>
                                               <td>
                                                   <input formControlName="lsf_watt_hour_energy_night_time" type="text" value="" readonly>
                                               </td>
                                               <td>
                                                   <i class="fa fa-plus" (click)="addMore(i, appliance, codeStatus)" aria-hidden="true"></i>
                                               </td>
                                           </tr>
                                       </tbody>



                                      </table>
                                 </div>
                               </div>
                           </p-panel> -->
                        <!-- end survey-form table -->

                    </div>
                    <!-- end survey-form -->

                    <!-- <div class="table-wrapper backup-requirement" [ngClass]="{'hide-all': isloadExpand}">
                            <table cellpadding="0" cellspacing="0">
                                <tr>
                                    <th>Backup Requiremen</th>
                                    <th>Value</th>
                                    <th>UOM</th>
                                </tr>
                                <tr>
                                    <td>Back up (Watt Hrs.) day time </td>
                                    <td>{{totalWattHoursDay}}</td>
                                    <td></td>
                                </tr>

                                <tr>
                                    <td>Back up (Watt Hrs.) Evn. time</td>
                                    <td>{{totalWattHoursNight}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>DC load in watts</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                        </div> -->
                    <div class="btn-set" style="padding-top: 35px; text-align:center;">
                        <a class="btn btn-blue" (click)="getLeadListDetails('surveyor_action_listing')" style="color:white;
                        margin: 0px;">Back</a>
                        <!-- <button class="btn btn-skyblue" (click)="submitButtonValue(1)">Save as Draft</button> -->
                        <button *ngIf="!actionLoader" class="btn btn-blue"
                            (click)="submitButtonValue(2)">Submit</button>
                        <span *ngIf="actionLoader == 'surveyForm_loader'" class="btn btn-blue">
                            <img src="/assets/images/loader.gif" style="width:30px;height:30px;" alt="LUMINOUS" />
                        </span>
                    </div>
                </form>
                <!---@description: to Show Existing Projects and leads of mobile
                                 @developer: Roshan
                            -->
                <div *ngIf="ongoingLead || coldLead || ongoingProject || rejectedProject" class="table-wrapper">
                    <div>
                        <h2 class="box-title">
                            Existing Leads:
                        </h2>
                    </div>
                    <!--Existing projects Code-->
                    <div class="table-wrapper">
                        <table cellpadding="0" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>Lead Id</th>
                                    <th>Project Id</th>
                                    <th>Name</th>
                                    <th>Address</th>
                                    <th>Lead Status</th>
                                    <th>Project Status</th>
                                    <th>Lead Mobile</th>
                                    <th>Alternate Mobile</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="ongoingLead.length>0">
                                <tr *ngFor="let ongLd of ongoingLead; let i = index">
                                    <td>{{ongLd?.lead_id}}</td>
                                    <td>N/A</td>
                                    <td>{{ongLd?.consumer_full_name}}</td>
                                    <td>{{ongLd?.address}}</td>
                                    <td>Lead In Progress</td>
                                    <td>N/A</td>
                                    <td>{{ongLd?.lead_mobile}}</td>
                                    <td>{{ongLd?.consumer_mobileno}}</td>
                                </tr>
                            </tbody>

                            <tbody *ngIf="coldLead.length>0">
                                <tr *ngFor="let coldLd of coldLead; let j = index">
                                    <td>{{coldLd?.lead_id}}</td>
                                    <td>N/A</td>
                                    <td>{{coldLd?.consumer_full_name}}</td>
                                    <td>{{coldLd?.address}}</td>
                                    <td>Rejected Lead</td>
                                    <td>N/A</td>
                                    <td>{{coldLd?.lead_mobile}}</td>
                                    <td>{{coldLd?.consumer_mobileno}}</td>
                                </tr>
                            </tbody>

                            <tbody *ngIf="ongoingProject.length>0">
                                <tr *ngFor="let ongPj of ongoingProject; let k = index">
                                    <td>{{ongPj?.lead_id}}</td>
                                    <td>{{ongPj?.project_code}}</td>
                                    <td>{{ongPj?.consumer_full_name}}</td>
                                    <td>{{ongPj?.address}}</td>
                                    <td>N/A</td>
                                    <td>Project In Progress</td>
                                    <td>{{ongPj?.lead_mobile}}</td>
                                    <td>{{ongPj?.consumer_mobileno}}</td>
                                </tr>
                            </tbody>

                            <tbody *ngIf="rejectedProject.length>0">
                                <tr *ngFor="let rejPj of rejectedProject; let l = index">
                                    <td>{{rejPj?.lead_id}}</td>
                                    <td>{{rejPj?.project_code}}</td>
                                    <td>{{rejPj?.consumer_full_name}}</td>
                                    <td>{{rejPj?.address}}</td>
                                    <td>N/A</td>
                                    <td>Project Rejected</td>
                                    <td>{{rejPj?.lead_mobile}}</td>
                                    <td>{{rejPj?.consumer_mobileno}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- start audit page -->
            <div class="survey-page-left" *ngIf="showForm == 'audit_form'">
                <!-- start survey-form -->
                <div class="survey-form audit-form">
                    <p-panel header="Customer Care Form:" [toggleable]="true">
                        <div class="tab-content-detail">
                            <h3>Consumer Personal Information</h3>
                            <div class="field-wrapper">
                                <label for="">First Name *</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_firstname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Middle Name </label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_middlename}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Last Name *</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_lastname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 1</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_address1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 2</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_address2}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Pincode</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_pincode}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">City</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_cityid}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">State</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_stateid}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Contact Number</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_mobileno}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Email ID</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_email}}</span>
                                </div>
                            </div>

                        </div>
                    </p-panel>
                    <p-panel header="Survey Form:" [toggleable]="true">
                        <div class="tab-content-detail">
                            <h3>Electric Parameter</h3>
                            <div class="field-wrapper">
                                <label for="">Sanctioned Load Capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_sanctioned_load_capacity}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Type of Connection</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_connection_type}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Main Line Transformer Status (If installed by customer)</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_mainline_transformer_status]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Transformer Capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_transformer_capacity}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Transformer Connection type</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_transformer_connection_type}}</span>
                                    </div>
                                </div> -->
                            <h3>Existing Power Back-Up Solutions</h3>
                            <!-- <div class="field-wrapper">
                                    <label for="">DG Set capacity</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_dgset_capacity}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">DG Set Connection type</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_dgset_connection_type}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">DG Brand</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_dg_brand}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Inverter capacity</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_inverter_capacity}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Inverter Connection type</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_inverter_connection_type}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Inverter Brand</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_inverter_brand}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Inverter DC Voltage (DC operation Voltage</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_inverterdc_voltage}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Battery Brand</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_battery_brand}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Battery Capacity</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_battery_capacity}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Battery Rating Factor</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_battery_rating_factor}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Battery Type</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_battery_type}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Battery Age</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_battery_age}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Availability of Grid (7 AM-6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_availability_of_grid1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Availability of Grid (6PM-7 AM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_availability_of_grid2}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Primary Source of Supply during day</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_primary_source_of_supply_during_day}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Primary Source of Supply during evening</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_primary_source_of_supply_during_evening}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Minimum Running Load in day time (7 AM-6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_min_running_loadin_daytime}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Load running after (6 PM)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_load_running_after6}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Critical Load on which back up is required</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_critical_load_onwhich_backup_isrequired}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Operation Hours of Critical Load (Back up Hours)

                                </label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_operation_hour_of_critical_load}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Secondary Source of supply if available</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_secondary_source_of_supply_if_available}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Termination DB/LT panel capacity</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_secondary_source_of_supply_if_available}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">No. of existing Earthing Pit</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_no_of_existing_earthin_pit}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Evacuation Voltage</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_evacuation_voltage}}</span>
                                </div>
                            </div>

                            <h3>
                                SPACE Availability
                            </h3>

                            <div class="field-wrapper">
                                <label for="">Type of Roof</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_type_of_roof}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Shadow Free Area Available</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_shadow_free_area}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Installation Location (Name of Building)</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_installation_location}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Other Spaces Available for Installation</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_other_spaces_available_for_installation}}</span>
                                </div>
                            </div>
                            <!-- <div class="field-wrapper">
                                    <label for="">Number of floors in the building</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_no_of_floors_in_the_building}}</span>
                                    </div>
                                </div> -->
                            <!-- <div class="field-wrapper">
                                    <label for="">Roof Accessibility</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_roof_accessibility}}</span>
                                    </div>
                                </div> -->
                            <!-- <div class="field-wrapper">
                                    <label for="">Distance of Existing LT Panel / LT Board from Roof</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_distance_of_existing_lt_panelboard_from_roof}}</span>
                                    </div>
                                </div> -->
                            <!-- <div class="field-wrapper">
                                    <label for="">Any preference (Floor/Location) for inverter installation</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_preference_for_invertor_installation}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Chipping on roof allowance</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_chipping_on_roof_allowance}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Can the panels be mounted facing towards true south</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_can_the_panels_be_mounted_facing_towards_true_south}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">In case of non true south sites (mention the diflection / azimuth
                                    angle)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_incase_of_nontrue_southsites}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">In case of shed, is the drilling allowed on it</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_incase_of_shed_isdrill_allowed]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Is the shed facing towards true south</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_isthe_shed_facing_towards_true_south]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Details of Shed</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_details_of_shed}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Area of the place where PCU / Battery to be placed</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_area_of_the_place_where_pcu}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Ventilation Available in Battery/PCU Room</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_ventilation_available_in_batterypcu_room]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Distance from Roof to Inverter / Battery Room</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_distance_from_roof_to_inverter_battery_room}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Distance from Inverter / Battery Room to LT Board</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_distance_from_inverter_battery_room_to_lt_board}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Length of wire-run from each array to Inverter</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_length_of_wirerun_from_each_array_to_inverter}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Space Available for Secure Storage of Material</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_space_available_for_secure_storage_of_material]}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Space available for earthing</label>
                                <div class="form-field">
                                    <span>{{yesNo[surveyorFormData?.sf_space_available_for_earthing]}}</span>
                                </div>
                            </div>
                            <h3>Shadow Consideration</h3>
                            <!-- <div class="field-wrapper">
                                    <label for="">Shading: describe type of shading here(Array 1:2: 3: 4:)</label>
                                    <div class="form-field">
                                        <span>{{surveyorFormData?.sf_shading}}</span>
                                    </div>
                                </div> -->
                            <div class="field-wrapper">
                                <label for="">Height of the Parapet Wall</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_height_of_the_parapet_wall}}</span>
                                </div>
                            </div>


                            <div class="field-wrapper">
                                <label for="">Protruding Objects/Mumty in installation location(water tank,
                                    Dish,Antennae)</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_protruding_objects_mumty_in_installation_location}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Details of High Altitude Trees/Buildings facing south</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_details_of_high_altitude_trees_buildings_facing_south}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Latitude, Longitude of site</label>
                                <div class="form-field">
                                    <span>{{surveyorFormData?.sf_latitude_longitude_of_site}}</span>
                                </div>
                            </div>

                        </div>
                    </p-panel>
                    <p-panel header="Feasibility Status:" [toggleable]="true">
                        <br>
                        <div class="field-wrapper">
                            <label for="">Feasible Solution Type</label>
                            <div class="form-field">
                                <span>{{(surveyorFormData?.sf_feasible_solution_type)?solutionType[surveyorFormData?.sf_feasible_solution_type]:'Not Entered'}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Ground Clearance of structure recommended by surveyor</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_ground_clearance_of_structure_recommended_by_surveyor}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Proposed DC Capacity</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_proposed_dc_capacity}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Proposed AC Capacity</label>
                            <div class="form-field">
                                <span>{{(surveyorFormData?.sf_proposed_ac_capacity)?surveyorFormData?.sf_proposed_ac_capacity:'Not
                                        Entered'}}</span>
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Feasible Solution Remarks:</label>
                            <div class="form-field">
                                <span>{{surveyorFormData?.sf_feasiblity_remarks}}</span>
                            </div>
                        </div>

                    </p-panel>
                    <!-- <p-panel header="Load Survey Form:" [toggleable]="true">
                            <div class="table-wrapper full-wth">
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <th>Load Category</th>
                                        <th>Device Description</th>
                                        <th>Operating Source</th>
                                        <th>Operating Voltage</th>
                                        <th>Power Watts (B)</th>
                                        <th>Quantity Day Time (A)</th>
                                        <th>Back-up Hours of use During Day time (c)</th>
                                        <th>Quantity night time (E)</th>
                                        <th>Back-up Hours of use During night time (D)</th>
                                        <th>
                                            <span>= A * B * C</span>
                                            Watt hour energy day time</th>
                                        <th>
                                            <span>= E * B * D</span>
                                            Watt hour energy night time</th>

                                    </tr>
                                    <tr *ngFor="let hero of loadSurveyorFormData; let i = index;">
                                        <td>
                                            <strong>{{hero?.lsf_load_category}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_device_description}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{opSource[hero?.lsf_operating_source]}}</strong>
                                        </td>
                                        <td>
                                            <strong>220~240V</strong>

                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_power_watts}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_quantity_day_time}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_backup_hours_of_use_during_day_time}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_quantity_night_time}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_backup_hours_of_use_during_night_time}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_watt_hour_energy_day_time}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{hero?.lsf_watt_hour_energy_night_time}}</strong>
                                        </td>

                                    </tr>


                                </table>
                            </div>
                        </p-panel> -->


                    <p-panel header="Audit Details:" [toggleable]="true">
                        <div class="tab-content-detail">
                            <h3>
                                Material Audit
                            </h3>
                            <ul class="audit-status">
                                <li>
                                    <strong>Audit Status</strong>
                                    <span
                                        *ngIf="isMaterial == true">{{opQual[auditorData?.ssd_materialauditcompleted]}}</span>
                                </li>
                                <li>
                                    <strong>Remarks</strong>
                                    <span *ngIf="isMaterial == true">{{auditorData?.ssd_material_remarks}}</span>
                                </li>
                                <li>
                                    <strong>Auditor Detail</strong>
                                    <span *ngIf="isMaterial == true">{{auditorData?.emp_firstname}}
                                        {{auditorData?.emp_middlename}} {{auditorData?.emp_lastname}}</span>
                                </li>
                                <li>
                                    <strong>Date</strong>
                                    <span *ngIf="isMaterial == true">{{auditorData?.ssd_lastmodifiedon}}</span>
                                </li>
                                <li>
                                    <strong></strong>
                                    <span></span>
                                </li>
                            </ul>
                            <h3>
                                Installation Audit
                            </h3>
                            <ul class="audit-status">
                                <li>
                                    <strong>Audit Status</strong>
                                    <span
                                        *ngIf="isInstall == true">{{opQual[auditorData?.ssd_installationauditcompleted]}}</span>
                                </li>
                                <li>
                                    <strong>Remarks</strong>
                                    <span *ngIf="isInstall == true">{{auditorData?.ssd_installation_remarks}}</span>
                                </li>
                                <li>
                                    <strong>Auditor Detail</strong>
                                    <span *ngIf="isInstall == true">{{auditorData?.emp_firstname}}
                                        {{auditorData?.emp_middlename}} {{auditorData?.emp_lastname}}</span>
                                </li>
                                <li>
                                    <strong>Date</strong>
                                    <span *ngIf="isInstall == true">{{auditorData?.ssd_lastmodifiedon}}</span>
                                </li>
                                <li>
                                    <strong></strong>
                                    <span></span>
                                </li>
                            </ul>
                        </div>
                    </p-panel>

                </div>
                <!-- end survey-form do task-->
                <!-- start survey-form table  -->

                <!-- end survey-form table  -->
            </div>

            <!-- end audit page -->


            <!-- start project status page -->
            <div class="survey-page-left" *ngIf="showForm == 'project_status_form'">
                <!-- start survey-form -->
                <div class="survey-form audit-form">
                    <p-panel header="Customer Care Form:" [toggleable]="true">
                        <div class="tab-content-detail">
                            <h3>Consumer Personal Information</h3>
                            <div class="field-wrapper">
                                <label for="">First Name *</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_firstname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Middle Name </label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_middlename}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Last Name *</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_lastname}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 1</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_address1}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address 2</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_address2}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Pincode</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_pincode}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">City</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_city}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">State</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_state}}</span>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Contact Number</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_mobileno}}</span>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Email ID</label>
                                <div class="form-field">
                                    <span>{{consumerProjectData?.cceld_email}}</span>
                                </div>
                            </div>



                        </div>
                    </p-panel>
                    <!-- proposed -->
                    <!-- <p-panel header="Customer Care Form:" [toggleable]="true"> -->
                    <!-- <div class="tab-content-detail">
                                <h3>Proposed Solution</h3>
                                <div class="field-wrapper">
                                    <label for="">Project Title</label>
                                    <div class="form-field">
                                        <span>{{consumerProjectData?.project_title}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Project Description </label>
                                    <div class="form-field">
                                        <span>{{consumerProjectData?.project_description}}</span>
                                    </div>
                                </div>
                                <div class="field-wrapper">
                                    <label for="">Total Cost</label>
                                    <div class="form-field">
                                        <span>{{consumerProjectData?.project_total_cost}}</span>
                                    </div>
                                </div>

                            </div> -->
                    <!-- </p-panel> -->
                    <!-- project status detailed part -->
                    <p-panel header="Project History" [toggleable]="true">
                        <div class="table-wrapper">
                            <table cellpadding="0" cellspacing="0">
                                <tr>
                                    <th>S.no.</th>
                                    <th>Role</th>
                                    <th>Name</th>
                                    <th>Checklist</th>
                                    <th>Completion</th>
                                    <th>Status</th>
                                    <th>Date & Time</th>
                                    <!-- <th></th> -->
                                </tr>
                                <ng-template ngFor let-projectData [ngForOf]="projectDetail" let-i="index">
                                    <tr *ngIf="projectData?.pstatus_lastmodifiedby">
                                        <!-- <tr *ngFor="let projectData of projectDetail; let i = index;"> -->
                                        <td>
                                            <strong>{{ i+1 }}</strong>
                                        </td>
                                        <td>
                                            <strong>{{projectData?.role_name}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{projectData?.emp_firstname}} {{projectData?.emp_middlename}}
                                                {{projectData?.emp_lastname}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{projectData?.psm_status}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{yesNo[projectData?.pstatus_checkliststatus]}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{isSuccess[projectData?.pstatus_checkliststatus]}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{projectData?.pstatus_lastmodifiedon}}</strong>
                                        </td>

                                    </tr>
                                </ng-template>


                            </table>
                        </div>
                    </p-panel>
                    <!-- rejection details -->

                    <p-panel header="Rejection History" [toggleable]="true">
                        <div class="table-wrapper">
                            <table cellpadding="0" cellspacing="0">
                                <tr>
                                    <th>S.no.</th>
                                    <th>Role</th>
                                    <th>Name</th>
                                    <th>Checklist</th>
                                    <th>Remarks</th>

                                    <!-- <th></th> -->
                                </tr>
                                <ng-template ngFor let-rejectionData [ngForOf]="projectRejectionData" let-i="index">
                                    <tr *ngIf="rejectionData?.role_name">
                                        <td>
                                            <strong>{{ i+1 }}</strong>
                                        </td>
                                        <td>
                                            <strong>{{rejectionData?.role_name}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{rejectionData?.emp_firstname}} {{projectData?.emp_middlename}}
                                                {{projectData?.emp_lastname}}</strong>
                                        </td>
                                        <td>
                                            <strong>{{rejectionData?.psm_status}}</strong>
                                        </td>

                                        <td>
                                            <strong>{{rejectionData?.prd_remarks}}</strong>
                                        </td>
                                    </tr>
                                </ng-template>
                            </table>
                        </div>
                    </p-panel>
                    <!-- add more code -->
                </div>

            </div>

            <!-- end project status page -->


            <!--jdlksdksjklsjdksjlkdsjdjskdjsdjsjdjslda-->
            <div class="survey-page-right" *ngIf="checklistStatus" [ngClass]="{'hide-all': isloadExpand}">
                <div class="dashboard-inner">

                    <div *ngIf="sendsmsblock">
                    <form [formGroup]="customerNotificationForm" class="text-center">
                    <textarea formControlName="sms_text" readonly>

                    </textarea>

                    <button  (click)="submitCustomerNotification(this.customermobile)" class="btn btn-green btn-sm p-0" style="margin: 10px;">Send SMS</button>
                    </form>
                </div>

                    <h2>Project Checklists Details</h2>
                    <form *ngIf="!actionLoader" id="surveyor_checklist_submit" [formGroup]="checklistSubmitForm" (ngSubmit)="changeProjectStatus()">
                        <div class="">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="ChecklistItems" formControlName="checklist_name"
                                        placeholder="Select Checklist" (selected)="checkIfRemarkable($event.value)">
                                    </ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.checklist_name?.errors?.required && isSubmitChecklist">
                                    This Is Required
                                </div>
                            </div>
                        </div>
                        <div class="" *ngIf="isRejectReason">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="projectRejectReason" formControlName="project_reject_reason"
                                        placeholder="Select Reason"></ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.project_reject_reason?.errors?.required && isSubmitChecklist">
                                    Select Reject Reason
                                </div>
                            </div>
                        </div>

                        <div class="row">
                           <div class="col-12" *ngIf="isVisited">
                            <h3 style="margin-top: 40px">Visited date</h3>
                            <div class="form-field">
                                <div class="field-addon" style="margin-top: 5px; margin-bottom: 0px;">
                                    <!--  -->
                                    <p-calendar hideOnDateTimeSelect="true" dateFormat="yy-MM-dd"
                                        [maxDate]="currentDate" formControlName="visited_date_time" placeholder="Date"
                                        (onFocus)="scheduleCalendarFocusEvent();"></p-calendar>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.visited_date_time?.errors?.required && isSubmitChecklist">
                                    Select visit date
                                </div>
                            </div>
                            <div class="form-field">
                                <div class="field-addon">
                                    <!--  -->
                                    <ng-select [options]="newSurveyTime" formControlName="visited_time"
                                        (click)="checkTimeSlot()" placeholder="Select Time"></ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.visited_time?.errors?.required && isSubmitChecklist">
                                    Select visit time
                                </div>
                            </div>
                        </div>

                        <div class="col-12" *ngIf="isNotVisited">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="projectNotVisitedReason" formControlName="not_visited_reason"
                                        placeholder="Select Non Visit Category"
                                        (selected)="checkForNotVisitedReason($event.value)"></ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.not_visited_reason?.errors?.required && isSubmitChecklist">
                                    Select Not Visited Reason
                                </div>
                            </div>
                        </div>
                        </div>


                        <div class="col-md-6" *ngIf="isCloseReason">
                            <div class="form-field">
                                <div class="field-addon">
                                    <span class="field-icon"></span>
                                    <ng-select [options]="projectCloseReason" formControlName="project_close_reason"
                                        placeholder="Select Close Reason"></ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.project_close_reason?.errors?.required && isSubmitChecklist">
                                    Select Close Reason
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="isNotVisited && isRescheduleSurvey">
                            <h3>Reschedule visit date</h3>
                            <div class="form-field">
                                <div class="field-addon">
                                    <p-calendar dateFormat="dd/mm/y" [minDate]="minDate" readonlyInput="true"
                                        formControlName="cceld_scheduledate" placeholder="Date"
                                        (onSelect)="checkScheduledSiteSurvey()"></p-calendar>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.cceld_scheduledate?.errors?.required && isSubmitChecklist">
                                    Select visit date
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="isNotVisited && isRescheduleSurvey">
                            <h3>Reschedule visit time</h3>
                            <!--<label for="">Time</label>-->
                            <div class="form-field">
                                <div class="field-addon">
                                    <ng-select [options]="newSurveyTime" formControlName="cceld_scheduleTime"
                                        placeholder="Select Time"></ng-select>
                                </div>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.cceld_scheduleTime?.errors?.required && isSubmitChecklist">
                                    Select visit time
                                </div>
                            </div>
                        </div>
                        <div class="form-field" *ngIf="isNotVisited && isRescheduleSurvey">
                            <div class="col-md-6" *ngFor="let surveyData of siteSurveyDatabyDate; let i = index;">
                                <div class="form-field">
                                    <h3>Booked Survey</h3>
                                    <div class="field-addon">{{surveyData.cceld_firstname}}
                                        &nbsp;{{surveyData.cceld_lastname}},&nbsp;{{surveyData.cceld_mobileno}},&nbsp;
                                        {{surveyData.cceld_address1}},&nbsp;{{surveyData.cceld_pincode}}
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6"
                                *ngIf="isNotVisited && isRescheduleSurvey && siteSurveyDatabyDate.length==0">
                                No Survey Booked.
                            </div>
                        </div>
                        <div class="">
                            <!-- <div class="form-field">
                                    <h3>Checklist Status</h3>
                                    <div class="field-addon">
                                        <span>
                                            <label for="">
                                                <input type="radio" value="0" name="checklist_status" formControlName="checklist_status"> No</label>
                                        </span>
                                        <span>
                                            <label for="">
                                                <input type="radio" value="1" name="checklist_status" formControlName="checklist_status"> Yes</label>
                                        </span>
                                    </div>
                                    <div class="error" *ngIf="checklistSubmitForm.controls?.checklist_status?.errors?.required && isSubmitChecklist">
                                        This Is Required
                                    </div>
                                </div> -->
                            <div *ngIf="isRemarkable">
                                <textarea name="remarks" formControlName="remarks"
                                    placeholder="Enter Remarks.."></textarea>
                                <div class="error"
                                    *ngIf="checklistSubmitForm.controls?.remarks?.errors?.required && isSubmitChecklist">
                                    This Is Required
                                </div>
                            </div>
                        </div>

                        <div class="actions text-center">
                            <input type="submit" class="btn btn-green btn-md p-0" value="Submit">
                        </div>
                    </form>
                    <div *ngIf="actionLoader=='checklist_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>

                </div>
                <div class="dashboard-inner" *ngIf="!isListing">
                    <form [formGroup]="uploadDocument" *ngIf="isEligibleForDocUpload && !actionLoader">
                        <h3>Upload Documents</h3>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <ng-select [options]="documentList" formControlName="documentListName"
                                        placeholder="Select Document">
                                    </ng-select>
                                    <div class="error"
                                        *ngIf="uploadDocument.controls?.documentListName?.errors?.required && isSubmittedDocument">
                                        Document is required.</div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <input type="file" (change)="fileChange($event,currentProjectId)" name="file"
                                        formControlName="uploadDocumentFile" class="w-100" />
                                    <div class="error"
                                        *ngIf="uploadDocument.controls?.uploadDocumentFile?.errors?.required && isSubmittedDocument">
                                        Upload document is required.</div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- File dropalble directive by @ctrl/ngx-droppable@1.2.2  @developer: Roshan-->
                    <div droppable (filesDropped)="handleFilesDropped($event,currentProjectId)"
                        *ngIf="!isListing && isEligibleForDocUpload && !actionLoader"
                        style="height:150px; width:100%; border:1px dotted grey">Or Drop File Here</div>
                    <!--Ends dropable-->

                    <div *ngIf="actionLoader=='upload_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>

                    <div class="margin-20" [innerHTML]="myHtml">
                    </div>


                    <h3>Uploaded Documents</h3>
                    <div *ngIf="actionLoader=='uploadedDocs_loader'">
                        <img src="/assets/images/loader1.gif" alt="LUMINOUS" />
                    </div>

                    <div *ngIf="!actionLoader">
                        <div *ngFor="let docs of projectDocuments" class="checkoff">

                            <i class="fa fa-remove confirmRemove" (click)="confirmDeleteDoc(docs)"
                                *ngIf="isEligibleForDocUpload"></i>
                            <div
                                *ngIf="['jpeg', 'jpg', 'png', 'JPEG', 'JPG', 'PNG'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                                <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                    <img width="200px" src="{{baseurl}}{{docs.pdoc_filename}}">
                                </a>
                                <div class="documentType">{{docs.pdoc_type}}</div>
                            </div>
                            <div *ngIf="['pdf', 'PDF'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                                <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                    <img width="200px" src="/assets/images/pdf_image.png">
                                </a>
                                <div class="documentType">{{docs.pdoc_type}}</div>
                            </div>
                            <div
                                *ngIf="['doc', 'docx', 'DOC', 'DOCX'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                                <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                    <img width="200px" src="/assets/images/docx.png">
                                </a>
                                <div class="documentType">{{docs.pdoc_type}}</div>
                            </div>
                            <div
                                *ngIf="['xls', 'xlsx', 'csv', 'XLS', 'XLSX', 'CSV'].indexOf(docs.pdoc_filename.split('.').pop())!=-1">
                                <a href="{{baseurl}}{{docs.pdoc_filename}}" target="_blank">
                                    <img width="200px" src="/assets/images/xls.png">
                                </a>
                                <div class="documentType">{{docs.pdoc_type}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <!-- Payment Recieved All Leads -->
    <div class="container" *ngIf="isListing == 'advance-received'">

        <h2>Handoff Lead Listing</h2>
        <!-- <div>
                <form [formGroup]="searchLeadForm" (ngSubmit)="submitLeadSearch()">
                    <div class="field-wrapper">
                        <label for="">Search Type</label>
                        <div class="form-field">
                            <select formControlName="qType">
                                <option value="">Select</option>
                                <option value="lead_id">Lead Id</option>
                                <option value="lead_fname">First Name</option>
                                <option value="lead_mname">Middle Name</option>
                                <option value="lead_lname">Last Name</option>
                                <option value="lead_mobile">Phone</option>
                            </select>
                        </div>
                    </div>
                    <div class="field-wrapper">
                        <label for="">Search String</label>
                        <div class="form-field">
                            <input type="text" formControlName="q" placeholder="Please enter search string">
                            <div class="error" *ngIf="searchLeadForm.controls?.q?.errors?.required && isLeadSearchFormSubmitted">Please enter search string</div>
                            <div class="error" *ngIf="searchLeadForm.controls?.q?.errors?.pattern && isLeadSearchFormSubmitted">Special character not allowed</div>
                        </div>
                    </div>
                    <div class="field-wrapper serchFild">
                        <div class="form-field">
                            <button type="submit" class="btn nbtn btn-blue btn-md">Search</button>
                        </div>
                    </div>
                </form>
            </div> -->
        <!-- <h2>Lead Search Results</h2> -->
        <div class="table-wrapper handoff-table" *ngIf="HandoffLeadListing.length>0 ">
            <!-- <p>hello</p> -->
            <table cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>
                            Project ID
                        </th>
                        <th>
                            Customer Name
                        </th>
                        <th>
                            Contact No.
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Project Status
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of HandoffLeadListing; let i = index">
                        <td>{{data?.project_code}}</td>
                        <td>{{data?.customer_name}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.lead_address1}} {{data?.lead_address2}} {{data?.district_name}}
                            {{data?.state_name}}-{{data?.cceld_pincode}}</td>
                        <td>{{(data.h_id)? 'Rejected by Ops-Head':'Advance Received'}}</td>
                        <td>
                            <button class="send-pay-button" type="button"
                                (click)="createHandOff(data.project_id)">Create Handoff</button>
                            <button *ngIf="sendLinkLoader && i == currentButton" class="send-pay-button" type="button">
                                <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="HandoffLeadListing.length<=0">
            No Results.
        </div>
    </div>

    <div id="wrapper" class="container" *ngIf="isListing == 'create-handoff'">
        <!--Content Area Start-->
        <div id="content" *ngIf="HandoffLeadListingData == null">
        <div class="container">
        <div class="row" >
            <div class="col-12">
                <div class="top-title d-flex align-items-center justify-content-between">
                    <a href="javascript:void(0)" (click)="advanceReceived()"  class="btn p-2 " style="margin-left: auto;">Close</a>
                </div>
            </div>
        </div>
        </div>
        </div>
        <div id="content" *ngIf="HandoffLeadListingData">
            <div class="container">
                <form [formGroup]="createhandoff" (ngSubmit)="submitHandoff()">
                    <div class="row">
                        <div class="col-12">
                            <div class="top-title d-flex align-items-center justify-content-between">
                                <h2>Create Handoff</h2>
                                <a (click)="getIntercationLog(HandoffLeadListingData?.consumerProject?.project_id)" class="btn viwintrbtn">View Interaction Log</a>
                                <a href="javascript:void(0)" (click)="advanceReceived()"  class="btn p-2 ">Close</a>
                            </div>
                        </div>
                    </div>
                    <h4 *ngIf="HandoffLeadListingData?.handOffdata" >Rejected by Ops-Head</h4>
                    <div class="project-wrap">
                        <div class="row">
                            <div class="col-12">
                                <div class="title d-flex align-items-center justify-content-between">
                                    <div class="left">
                                        <h3>Sales to Project Management Handing Over Document</h3>
                                        <h5 *ngIf="HandoffLeadListingData?.h_rejection_reason">
                                            Rejection Reason - {{ HandoffLeadListingData.h_rejection_reason }}
                                        </h5>
                                    </div>
                                    <div class="right date d-flex align-items-center justify-content-between">
                                        <strong>Date</strong>
                                        <span>{{today | date:'dd/MM/yyyy' }}</span>
                                    </div>
                                </div>
                                <!-- <div class="row-wrap d-flex align-items-center justify-content-between">
                        <div class="left">
                          <strong>Handed over by (Sales)</strong>
                          <span>Lorem Ipsum</span>
                        </div>
                        <div class="right">
                          <strong>Handed over by (Projects)</strong>
                          <span>Lorem Ipsum</span>
                        </div>
                      </div> -->
                            </div>
                        </div>
                        <div class="customer-detail">
                            <div class="row">
                                <div class="col-12">
                                    <div class="divide-heading">
                                        <h4>Customer Details</h4>
                                    </div>
                                    <div
                                        class="row-wrap border-top-0 d-flex align-items-center justify-content-between">
                                        <div class="left">
                                            <strong>Proposal ID &amp; Date</strong>
                                            <span>{{HandoffLeadListingData?.proposalDetails?.proposal_code}} (generated
                                                on
                                                {{HandoffLeadListingData?.proposalDetails?.proposal_created_on | date:'dd/MM/yyyy' }})</span>
                                        </div>
                                        <div class="right">
                                            <strong>Project ID</strong>
                                            <span>{{HandoffLeadListingData?.consumerProject?.project_code}}</span>
                                            <input type="hidden" formControlName="project_id">
                                        </div>
                                    </div>
                                    <div class="row-wrap d-flex align-items-center justify-content-between">
                                        <div class="left">
                                            <strong>Customer Name</strong>
                                            <span>{{HandoffLeadListingData?.customer_name}}</span>
                                        </div>
                                        <div class="right">
                                            <strong>Customer ID</strong>
                                            <span>{{HandoffLeadListingData?.consumer?.consumer_code}}</span>
                                           </div>
                                    </div>
                                    <div class="row-wrap white d-flex align-items-center justify-content-between">
                                        <div class="left border-right-0">
                                            <strong>Site Address</strong>
                                            <span>{{HandoffLeadListingData?.cceLeaddata?.cceld_address1}}
                                                {{HandoffLeadListingData?.cceLeaddata?.cceld_address2}}
                                                {{HandoffLeadListingData?.district_name}}
                                                {{HandoffLeadListingData?.state_name}}-{{HandoffLeadListingData?.cceLeaddata?.cceld_pincode}}</span>
                                        </div>

                                    </div>
                                    <div class="row-wrap d-flex align-items-center justify-content-between">
                                        <div class="left border-right-0">
                                            <strong>GST No (if applicable)</strong>
                                            <span><input type="text" formControlName="gst" max="16" class="form-control"></span>
                                            <div class="error" *ngIf="(createhandoff.controls?.gst?.errors?.pattern || createhandoff.controls?.gst?.errors?.required) && submitHandoffdata">
                                                Please Enter 15 digit valid GST Number
                                            </div>
                                        </div>

                                    </div>
                                    <!-- <div class="row-wrap white  d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Documents Collected
                                                from Customer</strong>
                                        </div>
                                        <div class="divide-three">
                                            <div class="item top">
                                                <ul class="d-flex">

                                                    <li
                                                        *ngFor="let projectDocuments of HandoffLeadListingData?.ProjectDocuments; let i = index">
                                                        <label>{{i+1}}. {{projectDocuments?.pdoc_type}}</label></li>
                                                     <li><label>2.</label><input type="text" class="form-control"></li>
                                <li><label>3.</label><input type="text" class="form-control"></li>
                              </ul>
                            </div>
                            <div class="item bottom">
                              <ul class="d-flex">
                                <li><label>4.</label><input type="text" class="form-control"></li>
                                <li><label>5.</label><input type="text" class="form-control"></li>
                                <li><label>6.</label><input type="text" class="form-control"></li>
                                                </ul>
                                            </div>

                                        </div>

                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <div class="project-details">
                            <div class="row">
                                <div class="col-12">
                                    <div class="divide-heading">
                                        <h4>Project Details</h4>
                                    </div>
                                    <div class="row-wrap d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Solution Type</strong>
                                        </div>
                                        <div class="divide-three d-flex">
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Installation Type</strong>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_solution_type == 1">Grid-Tied</span>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_solution_type == 2">Off-Grid</span>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_solution_type == 3">Hybrid</span>
                                                </li>
                                                <!-- <li>
                                                    <strong>Package</strong>
                                                    <span>{{(HandoffLeadListingData?.proposalDetails?.proposal_pricing_options == 1) ? "GOLD" : (HandoffLeadListingData?.proposalDetails?.proposal_pricing_options == 2) ? "SILVER" : "GOLD - SILVER"}}</span>
                                                </li> -->
                                                <li>
                                                    <strong>DC Capacity</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_dc_capacity}}</span>
                                                </li>
                                                <li>
                                                    <strong>Phases</strong>
                                                    <span>{{HandoffLeadListingData?.surveyForm?.sf_connection_type}} <span>Phase</span></span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>


                                     <div class="row-wrap d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Panel Rating / Quantity</strong>
                                        </div>
                                        <div class="divide-three d-flex">
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Panel Type</strong>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_panel_type == 1">72-Cell Poly-Crystalline</span>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_panel_type == 2">144-Cell Mono PERC Half Cut</span>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_panel_type == 3">72-Cell Mono Crystalline</span>
                                                    <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_panel_type == 4">72-Cell Mono Crystalline PERC</span>
                                                </li>

                                                <li>
                                                    <strong>Module capacity</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_module_capacity}}</span>
                                                </li>
                                                <li>
                                                    <strong>Panel Qty</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_number_of_solar_panel}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row-wrap white  d-flex justify-content-between" *ngIf="handoff_data?.h_data?.proposalDetails?.proposal_solution_type =='2' ">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Batteries</strong>
                                        </div>
                                        <div class="divide-two d-flex">
                                            <div class="item top">
                                                <ul class="d-flex w-100 border-none">
                                                    <li>
                                                        <strong>Battery Type</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_solar_battery}}</span>
                                                    </li>
                                                    <li>
                                                        <strong *ngIf="HandoffLeadListingData?.proposalDetails?.battery_nos">Battery Quantity</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.battery_nos}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row-wrap d-flex justify-content-between" *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_solution_type =='2' ">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Battery Rating / Quantity</strong>
                                        </div>
                                        <div class="divide-three d-flex">
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Battery</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_solar_battery}}</span>
                                                </li>

                                                <li>
                                                    <strong>Battery H-Series/L-Series</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.battery_series=='5' ? 'H Series / 5 Years': HandoffLeadListingData?.proposalDetails?.battery_series=='3' ? 'L Series / 3 Years': ''}}</span>
                                                </li>
                                                <li>
                                                    <strong>Battery Qty</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.battery_nos}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>


                                    <div class="row-wrap d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Other Customisation
                                                Required*</strong>
                                        </div>
                                        <div class="customize-area d-flex align-items-center">

                                            <div class="radio-group">
                                                <label class="radio-wrap">
                                                    <input type="radio" [(ngModel)]="result" formControlName="h_customization_status" (click)=clearfields(1)
                                                        value="1">
                                                    <i class="custom-radio"></i>
                                                    Yes
                                                </label>
                                                <label class="radio-wrap">
                                                    <input type="radio" [(ngModel)]="result" formControlName="h_customization_status" (click)=clearfields(2)
                                                        value="0">
                                                    <i class="custom-radio"></i>
                                                    No
                                                </label>
                                            </div>
                                            <div class="error" *ngIf="createhandoff.controls?.h_customization_status?.errors?.required && submitHandoffdata">
                                                Mandatory Field
                                            </div>
                                            <textarea *ngIf="result== 1" formControlName="h_customization_remark" class="form-control"></textarea>
                                            <div class="error" *ngIf="createhandoff.controls?.h_customization_remark?.errors?.required && submitHandoffdata">
                                                Please specify other Customisation
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row-wrap d-flex justify-content-between" *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='1' || HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='2' || HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='3' " >
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Inverter Rating/ Quantity</strong>
                                        </div>
                                        <div class="divide-three d-flex"  >
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Solar Inverter Rating (S.no.1)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_rating}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Phase (S.no.1)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_phase}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Quantity (S.no.1)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_quantity}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row-wrap d-flex justify-content-between" *ngIf=" HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='2' || HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='3' " >
                                        <div class="docs-title d-flex  align-items-center ">
                                        </div>
                                        <div class="divide-three d-flex">
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Solar Inverter Rating (S.no.2)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_rating2}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Phase (S.no.2)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_phase2}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Quantity (S.no.2)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_quantity2}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row-wrap d-flex justify-content-between" *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_inverter_number =='3' " >
                                        <div class="docs-title d-flex  align-items-center ">
                                        </div>
                                        <div class="divide-three d-flex">
                                            <ul class="d-flex w-100 border-none">
                                                <li>
                                                    <strong>Solar Inverter Rating (S.no.3)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_rating3}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Phase (S.no.3)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_phase3}}</span>
                                                </li>
                                                <li>
                                                    <strong>Solar Inverter Quantity (S.no.3)</strong>
                                                    <span>{{HandoffLeadListingData?.proposalDetails?.proposal_inverter_quantity3}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>



                                    <div class="row-wrap d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Structure</strong>
                                        </div>
                                        <div class="divide-two d-flex">
                                            <div class="item top">
                                                <ul class="d-flex w-100 border-none">
                                                    <li>
                                                        <strong>Structure Type</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_structure_type}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>Structure BOM</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.StrucBOM}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="pricing-details">
                            <div class="row">
                                <div class="col-12">
                                    <div class="divide-heading">
                                        <h4>Pricing &amp; Other Terms</h4>
                                    </div>
                                    <div class="row-wrap white d-flex align-items-center justify-content-between">
                                        <div class="divide-two d-flex">
                                            <div class="item top">
                                                <ul class="d-flex w-100 border-none">
                                                    <li [ngSwitch]="HandoffLeadListingData?.cceLeaddata?.cceld_buildingtype">
                                                        <strong *ngSwitchCase="'commercial'">Net Project Cost (Inclusive of discount and Taxes - INR)</strong>
                                                        <strong *ngSwitchCase="'2'">Net Project Cost (Inclusive of discount and Taxes - INR)</strong>
                                                        <strong *ngSwitchCase="'residential'">Net Project Cost (Inclusive of Subsidy and Taxes - INR)</strong>
                                                        <strong *ngSwitchCase="'1'">Net Project Cost (Inclusive of Subsidy and Taxes - INR)</strong>
                                                        <strong *ngSwitchdefault>Net Project Cost (Inclusive of discount and Taxes - INR)</strong>
                                                        <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold !=0">
                                                            GOLD-{{(HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount)}} </span>
                                                        <span *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver !=0" class="p-1">
                                                            SILVER-{{(HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver)}}</span>
                                                    </li>
                                                    <li  *ngIf="HandoffLeadListingData?.proposalDetails?.is_discount == 1" [ngSwitch]="HandoffLeadListingData?.cceLeaddata?.cceld_buildingtype">
                                                        <strong *ngSwitchCase="'commercial'">Discount Offered</strong>
                                                        <strong *ngSwitchCase="'2'">Discount Offered</strong>
                                                        <strong *ngSwitchCase="'residential'">Subsidy Offered</strong>
                                                        <strong *ngSwitchCase="'1'">Subsidy Offered</strong>
                                                        <strong *ngSwitchdefault>Discount Offered</strong>

                                                        <!-- <span *ngIf="HandoffLeadListingData?.proposalDetails?.discount != ''">
                                                            GOLD -{{ HandoffLeadListingData?.proposalDetails?.discount }} </span> -->
                                                            <span *ngIf="HandoffLeadListingData?.proposalDetails?.discount != ''">
                                                                <ng-container *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold !=0">
                                                                GOLD -{{ HandoffLeadListingData?.proposalDetails?.discount }}
                                                                </ng-container>
                                                            </span>
                                                        <!-- <span *ngIf="HandoffLeadListingData?.proposalDetails?.discount_silver != ''" class="p-1">
                                                            SILVER-{{ HandoffLeadListingData?.proposalDetails?.discount_silver }}</span> -->
                                                            <span *ngIf="HandoffLeadListingData?.proposalDetails?.discount_silver != ''" class="p-1">
                                                                <ng-container *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver !=0">
                                                                SILVER-{{ HandoffLeadListingData?.proposalDetails?.discount_silver }}
                                                                </ng-container>
                                                            </span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="row-wrap white d-flex align-items-center justify-content-between">
                                        <div class="border-right-0 p-1">
                                            <strong>Solution Value including taxes (INR)</strong>
                                            <span
                                                *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold !=0">GOLD-{{(HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount)}} </span>
                                            <span
                                                *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver !=0" class="p-1"> SILVER-{{(HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver)}}</span>
                                        </div>
                                    </div> -->
                                    <div class="row-wrap d-flex align-items-center justify-content-between">
                                        <div class="left border-right-0">
                                            <strong>Payment Terms / Plan*</strong>
                                           <span>
                                                <select [(ngModel)]="selectedplan" formControlName="plan">
                                                    <option value="1"
                                                    *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold !=0">GOLD
                                                    {{HandoffLeadListingData?.proposalDetails?.proposal_advanced}}-{{HandoffLeadListingData?.proposalDetails?.proposal_payment_2}}-{{HandoffLeadListingData?.proposalDetails?.proposal_payment_3}}<span *ngIf="(HandoffLeadListingData.proposalDetails.proposal_payment_4>0)">-{{HandoffLeadListingData?.proposalDetails?.proposal_payment_4}}</span>
                                                    </option>
                                                    <option value="2"
                                                    *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver !=0">SILVER
                                                    {{HandoffLeadListingData?.proposalDetails?.proposal_advance_silver}}-{{HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_1}}-{{HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_2}}<span *ngIf="(HandoffLeadListingData.proposalDetails.proposal_advance_silver_3>0)">-{{HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_3}}</span>
                                                    </option>
                                                </select>
                                            </span>
                                            <div class="error" *ngIf="createhandoff.controls?.plan?.errors?.required && submitHandoffdata">
                                                Mandatory Field
                                            </div>
                                          </div>
                                    </div>
                                    <div class="row-wrap white  d-flex justify-content-between"
                                        *ngIf="(selectedplan == 1) && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold && HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold !=0">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Payment GOLD Slabs
                                                (in INR)</strong>
                                        </div>
                                        <div class="divide-two">
                                            <div class="item top">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>P1</strong>
                                                        <span>
                                                            {{ ( HandoffLeadListingData?.proposalDetails?.proposal_advanced?((HandoffLeadListingData?.proposalDetails?.proposal_advanced* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount) )/100):'' )}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>P2</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_payment_2?((HandoffLeadListingData?.proposalDetails?.proposal_payment_2* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount) )/100):'' )}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="item bottom">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>P3</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_payment_3?((HandoffLeadListingData?.proposalDetails?.proposal_payment_3* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount) )/100):'' )}}</span>
                                                    </li>
                                                    <li *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_payment_4">
                                                        <strong>P4</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_payment_4?((HandoffLeadListingData?.proposalDetails?.proposal_payment_4* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_gold - HandoffLeadListingData?.proposalDetails?.discount) )/100):'' )}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row-wrap white  d-flex justify-content-between"
                                        *ngIf="(selectedplan == 2) && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver && HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver !=0">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Payment SILVER Slabs
                                                (in INR)</strong>
                                        </div>
                                        <div class="divide-two">
                                            <div class="item top">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>P1</strong>
                                                        <span>
                                                            {{ ( HandoffLeadListingData?.proposalDetails?.proposal_advance_silver?((HandoffLeadListingData?.proposalDetails?.proposal_advance_silver* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver) )/100):'' )}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>P2</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_1?((HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_1* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver) )/100):'' )}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="item bottom">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>P3</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_2?((HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_2* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver) )/100):'' )}}</span>
                                                    </li>
                                                    <li
                                                        *ngIf="HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_3">
                                                        <strong>P4</strong>
                                                        <span>{{ ( HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_3?((HandoffLeadListingData?.proposalDetails?.proposal_advance_silver_3* (HandoffLeadListingData?.proposalDetails?.proposal_project_value_silver - HandoffLeadListingData?.proposalDetails?.discount_silver) )/100):'' )}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>


                                    <div *ngIf="(selectedplan == 1)" class="row-wrap   d-flex justify-content-between" >
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Other Inclusions/
                                                Commitments (specify)</strong>
                                        </div>
                                        <div class="divide-two">
                                            <div class="item top">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>Insurance</strong>
                                                        <span>{{ HandoffLeadListingData?.proposalDetails?.proposal_insurance_gold}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>Maintenance Visits</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_maintenance_gold}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="item bottom">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>RMS</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_remote_monitoring_system_gold}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>Any Other</strong>
                                                        <span><input type="text" formControlName="commitment_remark"></span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                   <div *ngIf="(selectedplan == 2)" class="row-wrap   d-flex justify-content-between">
                                        <div class="docs-title d-flex  align-items-center ">
                                            <strong>Other Inclusions/
                                                Commitments (specify)</strong>
                                        </div>
                                        <div class="divide-two">
                                            <div class="item top">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>Insurance</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_insurance_silver}}</span>
                                                    </li>
                                                    <li>
                                                        <strong>Maintenance Visits</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_maintenance_silver}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="item bottom">
                                                <ul class="d-flex">
                                                    <li>
                                                        <strong>RMS</strong>
                                                        <span>{{HandoffLeadListingData?.proposalDetails?.proposal_remote_monitoring_system_silver}}</span>
                                                    </li>

                                                </ul>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>

                        <!-- <div class="partners-details">
                    <div class="row">
                      <div class="col-12">
                        <div class="divide-heading">
                          <h4>Proposed Partner Details</h4>
                        </div>
                        <div class="row-wrap d-flex align-items-center justify-content-between">
                          <div class="left p-0">
                            <ul>
                              <li>
                                <strong>Payment Terms / Plan</strong>
                                <span>25-70-5</span>
                              </li>
                              <li>
                                <strong>Payment Terms / Plan</strong>
                                <span>25-70-5</span>
                              </li>
                            </ul>

                          </div>
                          <div class="right">
                            <strong>Special Terms
                            </strong>
                            <span>N/A</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div> -->
                        <!-- <div class="orders-details">
                    <div class="row">
                      <div class="col-12">
                        <div class="divide-heading">
                          <h4>Proposed Partner Details</h4>
                        </div>
                        <div class="row-wrap white d-flex align-items-center justify-content-between">
                          <div class="list-wrap w-100">
                            <ul class="d-flex">
                              <li>
                                <strong>Supply Order Ref</strong>

                              </li>
                              <li>
                                <strong>Date</strong>
                                <span>01/07/2019</span>
                              </li>
                              <li>
                                <strong>Acceptance Date</strong>
                                <span>03/07/2019</span>
                              </li>
                            </ul>

                          </div>

                        </div>
                      </div>
                    </div>
                  </div> -->
                    </div>
                    <!-- Handover project documets upload -->
                    <div class="project-document">
                        <div class="row">
                            <div class="col-12">
                                <div class="title d-flex align-items-center justify-content-between">
                                    <h3>Project Documents</h3>

                                </div>
                                <div class="doc-wrap d-flex justify-content-between">
                                    <div class="upload">
                                        <strong>Uploaded Document:</strong>
                                        <ul class="d-flex flex-wrap">
                                            <li
                                                *ngFor="let projectDocuments of HandoffLeadListingData?.ProjectDocuments; let i = index">
                                              <span><i class="fa fa-remove confirmRemove crossign" (click)="confirmDeleteDoc(projectDocuments,HandoffLeadListingData?.consumerProject?.project_id)"></i>

                                             <a href="{{baseurl}}{{projectDocuments.pdoc_filename}}" target="_blank">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="26"
                                                        viewBox="0 0 20 26">
                                                        <g fill="none" fill-rule="nonzero">
                                                            <path fill="#E9E9E0"
                                                                d="M14.084 0H.892C.525 0 .227.298.227.875V25c0 .157.298.455.665.455h18.216c.367 0 .665-.298.665-.455V5.9c0-.317-.043-.42-.117-.494l-5.29-5.29A.402.402 0 0 0 14.085 0z" />
                                                            <path fill="#D9D7CA" d="M14.318.069v5.386h5.386z" />
                                                            <path fill="#CC4B4C"
                                                                d="M6.143 15.147a.73.73 0 0 1-.44-.148c-.473-.355-.537-.75-.507-1.019.083-.74.998-1.515 2.72-2.304A30.512 30.512 0 0 0 9.64 6.79c-.454-.987-.895-2.268-.574-3.02.113-.263.254-.465.516-.552.104-.034.365-.078.462-.078.229 0 .43.295.573.477.134.17.438.533-.17 3.092.613 1.265 1.481 2.554 2.313 3.437a8.843 8.843 0 0 1 1.526-.163c.712 0 1.144.166 1.32.508.145.283.085.613-.178.982-.253.354-.602.541-1.009.541-.553 0-1.196-.349-1.914-1.039-1.29.27-2.795.75-4.013 1.283-.38.807-.744 1.456-1.083 1.932-.466.653-.868.957-1.265.957zm1.21-2.33c-.972.546-1.368.995-1.396 1.248-.005.041-.017.151.196.314.067-.021.463-.202 1.2-1.562zm6.198-2.019c.37.285.461.43.704.43.106 0 .41-.005.55-.201a.72.72 0 0 0 .104-.189c-.056-.03-.13-.09-.534-.09-.23.001-.518.011-.824.05zm-3.395-2.992a32.405 32.405 0 0 1-1.216 3.439c.95-.37 1.983-.69 2.953-.919a15.56 15.56 0 0 1-1.737-2.52zM9.88 3.96c-.045.015-.605.799.044 1.462.431-.962-.024-1.468-.044-1.462zM19.108 25.455H.892a.665.665 0 0 1-.665-.665v-7.063h19.546v7.063a.665.665 0 0 1-.665.665z" />
                                                            <g fill="#FFF">
                                                                <path
                                                                    d="M5.175 24.09h-.746v-4.58h1.317c.195 0 .388.032.578.094.19.062.361.156.513.28.151.124.273.274.367.45.093.176.14.374.14.594 0 .232-.04.442-.119.63a1.319 1.319 0 0 1-.33.476c-.14.128-.31.228-.509.298a1.96 1.96 0 0 1-.658.106h-.553v1.653zm0-4.014v1.815h.684c.09 0 .18-.016.27-.047a.681.681 0 0 0 .426-.447 1.397 1.397 0 0 0 .037-.727.744.744 0 0 0-.127-.28.753.753 0 0 0-.27-.223c-.117-.06-.27-.09-.46-.09h-.56zM11.918 21.674c0 .376-.04.699-.122.966-.08.267-.183.49-.307.671a1.58 1.58 0 0 1-.42.426c-.155.104-.305.181-.45.233a1.861 1.861 0 0 1-.398.1c-.12.014-.21.02-.267.02H8.22v-4.58H9.6c.385 0 .724.062 1.015.184.292.122.535.285.728.488.192.203.336.434.432.693.095.259.143.525.143.799zm-2.213 1.87c.506 0 .87-.161 1.094-.484.224-.324.336-.792.336-1.405 0-.19-.023-.38-.069-.565a1.21 1.21 0 0 0-.264-.507 1.394 1.394 0 0 0-.531-.367c-.224-.093-.514-.14-.87-.14h-.435v3.468h.74zM13.757 20.076v1.442h1.914v.51h-1.914v2.063H13v-4.58h2.865v.565z" />
                                                            </g>
                                                        </g>
                                                    </svg>
                                                    <p *ngIf="projectDocuments.pdoc_type != 'Add more files' && projectDocuments.pdoc_type != 'Other'" class="docnem">{{projectDocuments.pdoc_type}}</p>
                                                    <p *ngIf="projectDocuments.pdoc_type === 'Add more files' || projectDocuments.pdoc_type === 'Other'" class="docnem">{{projectDocuments.pdoc_filename.split("/").pop()}}</p>
                                                   </a>
                                                </span>
                                                  </li>
                                        </ul>
                                    </div>
                                    <div>
                                        <form [formGroup]="handOfFileForm">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="file-wrap d-flex align-items-center">
                                                    <label>File Name</label>
                                                   <ng-select [options]="doclist_handoff" formControlName="fileName"
                                                        placeholder="Select Doc">
                                                    </ng-select>
                                                </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <input type="file" formControlName="uploadFile"
                                                            (change)="fileChange($event,false)" class="w-100" />
                                                        <!--<div class="error" *ngIf="uploadDocument.controls?.uploadDocumentFile?.errors?.required && isSubmittedDocument">Upload document is required.</div>-->
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        <!-- File dropalble directive by @ctrl/ngx-droppable@1.2.2  @developer: Roshan-->
                                        <div class="attach">
                                            <div droppable (filesDropped)="handleFilesDropped($event,false)"
                                             class="document d-flex align-items-center justify-content-center"> <strong class="m-0">Drop Your File Here</strong>
                                        </div>
                                        </div>

                                        <!--Ends dropable-->
                                    </div>
                                    <!-- <div class="attach">
                          <strong>Attach Document</strong>
                          <div class="d-flex align-items-center">
                            <div class="document d-flex  justify-content-center">
                              <strong>drop here</strong>
                            </div>
                            <span>Browse</span>
                          </div>
                        </div> -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="remark-wrap d-flex  ">
                        <h4>Remarks if any</h4>
                        <textarea formControlName="h_remark" class="form-control"></textarea>
                    </div>
                    <p>
                        Note: <br>
1. Please upload exact documents under same name folder <br>
2. All documents(proposal, aadhar etc.) should be same name as per name mentioned in elec. bill.<br>
3. In Haryana- the name of person on property document and electricity bill should be same
                    </p>

                    <div class="button-wrap text-center">
                        <input type="submit"  class="btn p-0" *ngIf="creatinghandoff==0" value='Create'/>
                        <img style="height: 37px; width: 37px;" alt="LUMINOUS" *ngIf="creatinghandoff==1" src="/assets/images/loader1.gif">
                        <a href="javascript:void(0)" (click)="advanceReceived()" class="btn p-1">Cancel</a>
                    </div>
</form>
            </div>

        </div>
        <!--Content Area End-->
        <div *ngIf="HandoffLeadListingData == null">
            <h3>No Active Proposal Found</h3>
            </div>
    </div>

    <div class="container" *ngIf="isListing == 'add-lead'">
        <div class="box fill-form mb-30" >
            <h2 class="box-title">APPLICATION FORM</h2>
            <section class="box-content">

                <form id="lead-information" [formGroup]="customerFillFormRequest" (ngSubmit)="submitConsumerFormRequest()">
                    <div class="form-n-script text-top">
                        <div class="col-form">
                            <h3 class="mt0">Fill lead information below:-</h3>
                            <div class="field-wrapper">
                                <label for="">Lead Reference</label>
                                <div class="form-field">
                                    <ng-select [options]="refrenceList" formControlName="cceld_reference_id" placeholder="Lead Reference" (focusout)="submitConsumerFormRequest(3)"></ng-select>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">&nbsp;</label>
                                <div class="form-field ">
                                    <textarea formControlName="cceld_referenceremarks" cols="50" rows="3" placeholder="Add Remarks" (focusout)="submitConsumerFormRequest(3)"></textarea>
                                </div>
                            </div>
                            <h3>Customer Information</h3>
                            <div class="field-wrapper">
                                <label for="">First Name*</label>
                                <div class="form-field">
                                    <input type="text" class="text-caps mandate-field" formControlName="cceld_firstname" maxlength="30" placeholder="First Name" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_firstname?.errors?.required && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.BLANK_FIELD}}
                                    </div>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_firstname?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        Please Enter valid First Name
                                    </div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Middle Name</label>
                                <div class="form-field">
                                    <input type="text" class="text-caps" formControlName="cceld_middlename" maxlength="30" placeholder="Middle Name" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Last Name*</label>
                                <div class="form-field">
                                    <input type="text" class="text-caps mandate-field" formControlName="cceld_lastname" maxlength="30" placeholder="Last Name" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_lastname?.errors?.required && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.BLANK_FIELD}}
                                    </div>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_lastname?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        Please Enter valid Last Name
                                    </div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Contact Number*</label>
                                <div class="form-field">
                                    <input class="mandate-field" type="text" formControlName="cceld_mobileno" placeholder="Contact Number" maxlength="10" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_mobileno?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.MOBILENO_PATTERN}}
                                    </div>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_mobileno?.errors?.required && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.BLANK_FIELD}}
                                    </div>
                                </div>

                            </div>
                            <div class="field-wrapper">
                                <label for="">Name of contact person at site</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_contactperson" placeholder="Name of contact person at site" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Contact Number of contact person at site</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_contactnumber" placeholder="Contact Number" maxlength="10" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_contactnumber?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.MOBILENO_PATTERN}}
                                    </div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Email ID</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_email" placeholder="Email ID" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_email?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.EMAIL_PATTERN}}
                                    </div>

                                </div>
                            </div>
                            <h3>Address Information</h3>
                            <div class="field-wrapper">
                                <label for="">Address1</label>
                                <div class="form-field">
                                    <input  type="text" formControlName="cceld_address1" placeholder="Address1" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_address1?.errors?.required && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.BLANK_FIELD}}
                                    </div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Address2</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_address2" placeholder="Address2" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Landmark</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_landmark" placeholder="Landmark" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Pincode</label>
                                <div class="form-field">

                                    <input class="form-text" type="text" formControlName="cceld_pincode" placeholder="Pincode" (input)="knowYourStateCity($event.target.value, 'form-fill')"
                                        (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error">
                                        <p *ngIf="isPincode == true">{{lead_panal_form.PINCODE}}</p>
                                    </div>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_pincode?.errors?.pattern && isSubmitCustomerFillFormRequest">
                                        {{lead_panal_form.PINCODE}}
                                    </div>
                                    <div class="error" *ngIf="isPincode != true && customerFillFormRequest.controls?.cceld_pincode?.errors?.required">{{lead_panal_form.BLANK_FIELD}}</div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">State</label>
                                <div class="form-field">
                                    <ng-select  [options]="stateList" formControlName="cceld_state" placeholder="Select State" (selected)="ifStateIfCity('state', 'form-fill')" [(ngModel)]="selectedState" (focusout)="submitConsumerFormRequest(3)"></ng-select>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_state?.errors?.required">State Required*</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">City</label>
                                <div class="form-field">
                                    <ng-select  [options]="cityList" formControlName="cceld_city" placeholder="Select City" (selected)="ifStateIfCity('city', 'form-fill')" [(ngModel)]="selectedCity" (focusout)="submitConsumerFormRequest(3)"></ng-select>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_city?.errors?.required">City Required*</div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Locality</label>
                                <div class="form-field">
                                    <input *ngIf="otherPincode" type="text" formControlName="cceld_locality" placeholder="Locality" (focusout)="submitConsumerFormRequest(3)">
                                    <ng-select *ngIf="!otherPincode" [options]="localityList" formControlName="cceld_locality" placeholder="Select Locality" (focusout)="submitConsumerFormRequest(3)"></ng-select>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_locality?.errors?.required">Locality Required*</div>

                                </div>
                            </div>


                            <div class="field-wrapper">
                                <label for="">Country</label>
                                <div class="form-field">
                                    <select class="mandate-field" formControlName="cceld_country" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="356">India</option>
                                    </select>
                                </div>
                            </div>
                            <h3>Feasibility</h3>
                            <div class="field-wrapper">
                                <label for="">Building type</label>
                                <div class="form-field">
                                    <select formControlName="cceld_buildingtype" (change)="onChange($event.target.value)" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="residential" >Residential</option>
                                        <option value="commercial">Commercial</option>
                                    </select>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_buildingtype?.errors?.required ">
                                    Building Type Required*
                                     </div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label>Move Project To</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_move_surveyour" name="cceld_move_surveyour" value="1" (focusout)="submitConsumerFormRequest(3)" >
                                    <label for="">Surveyor</label>
                                    <input type="radio" formControlName="cceld_move_surveyour" name="cceld_move_surveyour" value="0" (focusout)="submitConsumerFormRequest(3)" >
                                    <label for="">Funnel</label>
                                    <div class="error" *ngIf="MoveProjectTo?.errors?.required">
                                        Move Project To Required*
                                      </div>
                                </div>

                            </div>
                            <div class="field-wrapper">
                                <label for="">Type of site</label>
                                <div class="form-field">
                                    <select *ngIf="isCommercialProject" formControlName="cceld_sitetype" (focusout)="submitConsumerFormRequest(3)">
                                        <option value=" Industrial">Industrial</option>
                                        <option value="Institutional/Corporate">Institutional/Corporate</option>
                                        <option value="MSME">MSME</option>
                                        <option value="Education">Education</option>
                                        <option value="Government">Government</option>
                                        <option value="Others">Others</option>
                                    </select>
                                    <select *ngIf="!isCommercialProject" formControlName="cceld_sitetype" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="Multi-Storey">Multi-Storey</option>
                                        <option value="Villa/Independent House">Villa / Independent House</option>
                                        <option value="RWA/GroupHousing">RWA / Group Housing</option>
                                        <option value="HighRiseSociety">High Rise Society</option>
                                        <option value="Others">Others</option>
                                    </select>
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_sitetype?.errors?.required ">
                                         Type Of Site Required*
                                      </div>
                                </div>
                            </div>

                            <div class="field-wrapper">
                                <label for="">Proposal Type</label>
                                <div class="form-field">
                                    <select formControlName="proposal_type">
                                        <option value="1">Short</option>
                                        <option value="2">Detailed</option>
                                    </select>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Number of floors</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_totalfloor" placeholder="Number of floors" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_totalfloor?.errors?.pattern && isSubmitCustomerFillFormRequest">Please enter correct number of floors</div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Customer floor</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_customerfloor" placeholder="Customer floor" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_customerfloor?.errors?.pattern && isSubmitCustomerFillFormRequest">Please enter correct number of floors</div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Owner</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_isowner" name="cceld_isowner" value="1" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Yes</label>
                                    <input type="radio" formControlName="cceld_isowner" name="cceld_isowner" value="0" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">No</label>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Roof Rights</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_roofright" name="cceld_roofright" value=1 (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Yes</label>
                                    <input type="radio" formControlName="cceld_roofright" name="cceld_roofright" value=0 (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">No</label>
                                </div>
                            </div>
                            <h3>Roof Details</h3>
                            <div class="field-wrapper">
                                <label for="">Roof Type</label>
                                <div class="form-field">
                                    <select formControlName="cceld_rooftype" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="rcc">Flat RCC</option>
                                        <option value="tin_shed">Tin Shed</option>
                                        <option value="park">Asbestos</option>
                                        <option value="ground">Ground Mount</option>
                                    </select>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Area</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_roofarea" placeholder="Roof area" (focusout)="submitConsumerFormRequest(3)">
                                    <select formControlName="cceld_roofareaunit" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="sq_m">square meter</option>
                                        <option value="sq_ft">square feet</option>
                                        <option value="sq_yd">square yard</option>
                                    </select>
                                </div>
                            </div>

                            <div class="field-wrapper field-witlimith-other">
                                <label for="">Other area if available</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_otherarea" placeholder="Other area if available" (focusout)="submitConsumerFormRequest(3)">
                                    <select formControlName="cceld_otherareaunit" (focusout)="submitConsumerFormRequest(3)">
                                        <option value="sq_m">square meter</option>
                                        <option value="sq_ft">square feet</option>
                                        <option value="sq_yd">square yard</option>
                                    </select>
                                </div>
                            </div>
                            <h3>Affordability</h3>
                            <div class="field-wrapper">
                                <label for="">Budget</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_budget" placeholder="INR" (focusout)="submitConsumerFormRequest(3)">
                                    <div class="error" *ngIf="customerFillFormRequest.controls?.cceld_budget?.errors?.pattern && isSubmitCustomerFillFormRequest">Please enter correct budget</div>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Financing Required</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_isfinancereq" name="cceld_isfinancereq" value="1" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Yes</label>
                                    <input type="radio" formControlName="cceld_isfinancereq" name="cceld_isfinancereq" value="0" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-n-script">
                        <div class="col-form">
                            <h3>Need Assessment</h3>
                        </div>
                    </div>
                    <div class="form-n-script">
                        <div class="col-from">
                            <div class="field-wrapper">
                                <label for="">Average Electricity Bill</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_avgelectricitybill" placeholder="INR" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Solution Required</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_ongridoffgrid" name="cceld_ongridoffgrid" [checked]="true" value="on_grid" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Savings/On-Grid</label>
                                    <input type="radio" formControlName="cceld_ongridoffgrid" name="cceld_ongridoffgrid" value="off_grid" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Backup/Off-Grid</label>
                                    <input type="radio" formControlName="cceld_ongridoffgrid" name="cceld_ongridoffgrid" value="hybrid" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Hybrid</label>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Existing Power Source</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_existpowersource" name="cceld_existpowersource" [checked]="true" value="inverter"
                                        (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Inverter</label>
                                    <input type="radio" formControlName="cceld_existpowersource" name="cceld_existpowersource" value="dg_setup" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">DG Setup</label>
                                    <input type="radio" formControlName="cceld_existpowersource" name="cceld_existpowersource" value="society_backup" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Society Backup</label>
                                    <input type="radio" formControlName="cceld_existpowersource" name="cceld_existpowersource" value="other" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Other</label>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Enter Backup details</label>
                                <div class="form-field">
                                    <textarea formControlName="cceld_backupdetail" placeholder="Load to be run on backup" (focusout)="submitConsumerFormRequest(3)"></textarea>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Type of connection</label>
                                <div class="form-field">
                                    <input type="radio" formControlName="cceld_phasetype" [checked]="true" name="cceld_phasetype" value="single_phase" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Single Phase</label>
                                    <input type="radio" formControlName="cceld_phasetype" name="cceld_phasetype" value="three_phase" (focusout)="submitConsumerFormRequest(3)">
                                    <label for="">Three Phase</label>
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Average power cut during day</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_powercutinday" placeholder="hrs" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>
                            <div class="field-wrapper">
                                <label for="">Average power cut during night</label>
                                <div class="form-field">
                                    <input type="text" formControlName="cceld_powercutinnight" placeholder="hrs" (focusout)="submitConsumerFormRequest(3)">
                                </div>
                            </div>


                        </div>
                        <div class="col-script">&nbsp;</div>
                    </div>


                    <div class="form-n-script">
                        <div class="col-form">

                                <div class="field-wrapper">
                                    <label for="">Notes</label>
                                    <div class="form-field">
                                        <textarea formControlName="cceld_notes" cols="30" rows="10" placeholder="Note" (focusout)="submitConsumerFormRequest(3)"></textarea>
                                    </div>
                                </div>

                            <div class="form-actions" style="flex-direction: column;">
                                <div style="text-align: right;">
                                    <input *ngIf="!loading" class="button button-blue" type="button" value="Submit" (click)="submitConsumerFormRequest(2)">
                                    <button *ngIf="loading" class="button button-blue" type="button">
                                        <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                                    </button>
                                </div>
                                <div style="text-align: right;">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>

    <!--- Today's survey    -->
    <div class="container" *ngIf="isListing == 'today_survey'">
        <h2>Today's Survey</h2>
        <div class="table-wrapper" *ngIf="todaySurveyData.length>0">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Mobile</th>
                        <th>Survey Date</th>
                        <th>Payment Status</th>
                        <th>Payment Method</th>
                        <th>Payment amount</th>
                        <th>Cash Receipt</th>
                        <th>Payment link status</th>
                        <th>Payment link timestamp</th>
                        <th>Payment link sender</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of todaySurveyData; let i = index">
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_scheduledate}} {{times[data?.cceld_scheduletime]}}</td>
                        <td *ngIf="data?.status == 3">
                            Paid
                        </td>
                        <td *ngIf="data?.status != 3">
                            Not Paid
                        </td>
                        <td>
                            {{data?.payment_type}}
                        </td>
                        <td>
                            {{data?.amount}}
                        </td>
                        <td *ngIf="data.status != 3">
                            <button class="gbgBtn"
                                (click)="openAddCashPopup(data?.consumer_lead_id,data?.consumer_code,data?.project_id);">Add</button>
                        </td>
                        <td *ngIf="data.status == 3">Paid</td>
                        <td>
                            <button *ngIf="!sendLinkLoader || currentButton != i" class="gbgBtn" type="button"
                                (click)="sendPaymentLink(data?.consumer_lead_id, i, true)">Send</button>
                            <button *ngIf="sendLinkLoader && currentButton == i" class="send-pay-button" type="button">
                                <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                            </button>
                        </td>
                        <td *ngIf="!data?.lead_payment_link_last_sent_at">
                            Not Sent
                        </td>
                        <td *ngIf="data?.lead_payment_link_last_sent_at">
                            {{data?.lead_payment_link_last_sent_at}}
                        </td>
                        <td>
                            {{data?.emp_firstname}}&nbsp;{{data?.emp_lastname}}
                        </td>
                        <td>
                            <a *ngIf="openStates.indexOf(data?.project_state) > -1" class="gbgBtn"
                                (click)="openProjectChecklistDetails(data?.project_id,data?.cceld_consumerid)">Open4</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="todaySurveyData.length==0">
            No Today Survey
        </div>
        <br>
        <h2>Next 7 Days Survey</h2>
        <div class="table-wrapper" *ngIf="nextSevenDaySurvey.length>0">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Mobile</th>
                        <th>Survey Date</th>
                        <th>Payment Status</th>
                        <th>Payment Method</th>
                        <th>Payment amount</th>
                        <th>Cash Receipt</th>
                        <th>Payment link status</th>
                        <th>Payment link timestamp</th>
                        <th>Payment link sender</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of nextSevenDaySurvey; let i = index">
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_scheduledate}} {{times[data?.cceld_scheduletime]}}</td>

                        <td *ngIf="data?.status == 3">
                            Paid
                        </td>
                        <td *ngIf="data?.status != 3">
                            Not Paid
                        </td>
                        <td>
                            {{data?.payment_type}}
                        </td>
                        <td>
                            {{data?.amount}}
                        </td>
                        <td *ngIf="data?.status != 3"><button class="gbgBtn"
                                (click)="openAddCashPopup(data?.consumer_lead_id,data?.consumer_code,data?.project_id);">Add</button>
                        </td>
                        <td *ngIf="data?.status == 3">Paid</td>
                        <td>
                            <button *ngIf="!sendLinkLoader || currentButton != i" class="gbgBtn" type="button"
                                (click)="sendPaymentLink(data?.consumer_lead_id, i, true)">Send</button>
                            <button *ngIf="sendLinkLoader && currentButton == i" class="send-pay-button" type="button">
                                <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                            </button>
                        </td>
                        <td *ngIf="!data?.lead_payment_link_last_sent_at">
                            Not Sent
                        </td>
                        <td *ngIf="data?.lead_payment_link_last_sent_at">
                            {{data?.lead_payment_link_last_sent_at}}
                        </td>
                        <td>
                            {{data?.emp_firstname}}&nbsp;{{data?.emp_lastname}}
                        </td>
                        <td>
                            <a *ngIf="openStates.indexOf(data?.project_state) > -1" class="gbgBtn"
                                (click)="openProjectChecklistDetails(data?.project_id,data?.consumer_code)">Open5</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="nextSevenDaySurvey.length==0">
            No Next 7 Days survey
        </div>
        <br />
        <h2>Last 7 Days Survey</h2>
        <div class="table-wrapper" *ngIf="pastSevenDaySurvey.length>0">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Mobile</th>
                        <th>Survey Date</th>
                        <th>Payment Status</th>
                        <th>Payment Method</th>
                        <th>Payment amount</th>
                        <th>Cash Receipt</th>
                        <th>Payment link status</th>
                        <th>Payment link timestamp</th>
                        <th>Payment link sender</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of pastSevenDaySurvey; let i = index">
                        <td>{{data?.cceld_firstname}} {{data?.cceld_middlename}} {{data?.cceld_lastname}}</td>
                        <td>{{data?.cceld_address1}}</td>
                        <td>{{data?.cceld_mobileno}}</td>
                        <td>{{data?.cceld_scheduledate}} {{times[data?.cceld_scheduletime]}}</td>

                        <td *ngIf="data?.status == 3">
                            Paid
                        </td>
                        <td *ngIf="data?.status != 3">
                            Not Paid
                        </td>
                        <td>
                            {{data?.payment_type}}
                        </td>
                        <td>
                            {{data?.amount}}
                        </td>
                        <td *ngIf="data?.status != 3"><button class="gbgBtn"
                                (click)="openAddCashPopup(data?.consumer_lead_id,data?.consumer_code,data?.project_id);">Add</button>
                        </td>
                        <td *ngIf="data?.status == 3">Paid</td>
                        <td>
                            <button *ngIf="!sendLinkLoader || currentButton != i" class="gbgBtn" type="button"
                                (click)="sendPaymentLink(data?.consumer_lead_id, i, true)">Send</button>
                            <button *ngIf="sendLinkLoader && i == currentButton" class="send-pay-button" type="button">
                                <img src="/assets/images/loader.gif" style="width:20px;height:20px;" alt="LUMINOUS" />
                            </button>
                        </td>
                        <td *ngIf="!data?.lead_payment_link_last_sent_at">
                            Not Sent
                        </td>
                        <td *ngIf="data?.lead_payment_link_last_sent_at">
                            {{data?.lead_payment_link_last_sent_at}}
                        </td>
                        <td>
                            {{data?.emp_firstname}}&nbsp;{{data?.emp_lastname}}
                        </td>
                        <td>
                            <a *ngIf="openStates.indexOf(data?.project_state) > -1" class="gbgBtn"
                                (click)="openProjectChecklistDetails(data?.project_id,data?.consumer_code)">Open6</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="no-data" *ngIf="pastSevenDaySurvey.length==0">
            No last 7 Days survey
        </div>

    </div>
</div>

<!-- end of this -->
<div class="sendBox" [ngClass]="{hideAside:openCashDeatilBox,showAside:!openCashDeatilBox}">
    <div class="box-wrapper cash-box">
        <div class="tableBoxx">
            <div class="cellBoxx">
                <div class="sendWrapper">
                    <h4>Cash Payment Details</h4>
                    <form [formGroup]="cashDetailForm" (ngSubmit)="submitCashPayment()">
                        <div class="field-wrapper">
                            <label for="">Amount to billed</label>
                            <div class="form-field">
                                {{siteSurveyAmount}}
                            </div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Cash receipt no </label>
                            <div class="form-field">
                                <input type="textbox" formControlName="receiptNo" name="receiptNo">
                            </div>
                            <div class="error" *ngIf="cashDetailForm.controls?.receiptNo?.errors">Please enter receipt
                                number.</div>
                        </div>
                        <div class="field-wrapper">
                            <label for="">Amount received</label>
                            <div class="form-field">
                                <input type="textbox" formControlName="cashReceived" name="cashReceived">
                            </div>
                            <div class="error" *ngIf="cashDetailForm.controls?.cashReceived?.errors">Please enter amount
                                received.</div>
                        </div>
                        <div class="field-wrapper">
                            <div class="form-field save-btn">
                                <button *ngIf="!saveCashPaymentLoader" type="submit"
                                    class="btn btn-blue btn-md">Save</button>
                                <button *ngIf="saveCashPaymentLoader" type="button">
                                    <img src="/assets/images/loader.gif" style="width:30px;height:30px;"
                                        alt="LUMINOUS" />
                                </button>
                            </div>
                        </div>
                        <a href="javascript:void(0)" class="menu example5"
                            (click)="openCashDeatilBox=!openCashDeatilBox">
                            <span>x</span>
                        </a>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>
<div *ngIf="isLoginEmp == true"
    style="margin: 30px; padding: 30px; background-color: #fff; font-size: 32px; text-align: center;">
    <p>Unauthorised Access. Please login to access.</p>
</div>


    <!--  start of view interaction log -->
                 <div *ngIf="viewinteractionlog" style="margin-top: 60px;">
                        <div class="loader-wrapper" >
                            <div class=" viewintraction">

                                  <!-- data -->
                                    <div class="overlay-wrap">
                                        <div class="overlay working-overlay">
                                        <div class="overlay-content">
                                            <div class="">
                                                 <input type="button" class="btn p-0 pull-right" (click)="ViewinteractionClose()"  value="Close" >
                                            </div>

                                            <h3>Interaction Log</h3>
                                                <div class="table-wrapper call-history">
                                                <table>
                                                <thead>
                                                    <tr>
                                                        <th>
                                                        Date & Time
                                                        </th>
                                                        <th>
                                                        Username
                                                        </th>
                                                        <th>
                                                        User Role
                                                        </th>
                                                        <th>
                                                        Project Status
                                                        </th>
                                                        <th>
                                                        Interaction
                                                        </th>
                                                        <th>
                                                        Interaction Completed
                                                        </th>
                                                        <th>
                                                        SMS Sent
                                                        </th>
                                                        <th>
                                                        E-mail sent
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of interactionLog; let i = index">
                                                        <td> {{item.fui_created_at}} </td>
                                                        <td> {{item.emp_full_name}} </td>
                                                        <td> {{item.primary_role_name}} </td>
                                                        <td> {{item.fpsm_status}} </td>
                                                        <td> {{item.fui_conversation}}</td>
                                                        <td *ngIf="item.fui_is_submited === '0'" style="color: red">NO</td>
                                                        <td *ngIf="item.fui_is_submited === '1'" style="color: green">YES</td>
                                                        <td> {{item.fui_sent_sms}} </td>
                                                        <td><div [innerHtml]="item.fui_sent_email"></div> </td>
                                                    </tr>
                                                    <div *ngIf="interactionLog.length <= 0 " >No Record Found</div>
                                                </tbody>
                                                </table>
                                                </div>
                                                <div class="table-wrapper" *ngIf="!interactionLog" >
                                                No Interactions!
                                                </div>

                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                 <!--  end of data -->
                            </div>
                        </div>

                 <!--  end of view interaction log -->




<div class="loader-wrapper" [style.display]="!userData ? 'block' : 'none'">
    <div class="loader"></div>
</div>

<div class="loader-wrapper" *ngIf="ConfirmDeleting">
    <div class="wraperDelete">
        <h3 class="padding">Are you sure you want to delete selected document</h3>
        <div class="alignRight">
            <input type="Delete" class="btn button-blue button-norm" (click)="DeleteDocument(pdoc_data,pid)"
                value="Delete">
            <input type="close" class="btn button-grey button-norm" (click)="hideConfirmDeleting()" value="Close">
        </div>

    </div>

</div>

